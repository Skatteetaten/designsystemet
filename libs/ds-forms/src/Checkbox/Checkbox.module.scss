@use 'libs/ds-core-utils/src/mixins/styles' as style;

.container {
  width: fit-content;

  &[data-has-spacing='true'] {
    margin-bottom: var(--spacing-m);
  }
}

.checkbox {
  display: flex;

  --checkbox-border-color: var(--semantic-page-foreground);
  --checkbox-background-color: var(--semantic-page-background);
  --check-color: var(--palette-graphite-0);
  --label-color: var(--semantic-page-foreground);
  --description-color: var(--palette-graphite-70);
  --required-color: var(--semantic-danger-foreground);
  --outline-width: 0;
  --cursor: pointer;

  &:has(&Input:disabled) {
    --checkbox-border-color: var(--semantic-disabled-foreground);
    --checkbox-background-color: var(--semantic-disabled-background);
    --check-color: var(--semantic-disabled-background);
    --label-color: var(--semantic-disabled-foreground);
    --description-color: var(--semantic-disabled-foreground);
    --required-color: var(--semantic-disabled-foreground);
    --cursor: not-allowed;
  }

  &:has(&Input:checked:disabled) {
    --check-color: var(--semantic-disabled-foreground);
  }

  &:has(&Input[aria-invalid='true']:not(:disabled)) {
    --checkbox-border-color: var(--semantic-danger-foreground);
  }

  &:has(&Input:hover:not(:disabled)) {
    --checkbox-border-color: var(--semantic-interactive-main);
    --checkbox-background-color: var(--semantic-interactive-background);
    --check-color: var(--semantic-interactive-background);
    --label-color: var(--semantic-interactive-main);
    --description-color: var(--semantic-interactive-main);
  }

  &:has(&Input:focus-visible:not(:disabled)) {
    --outline-width: var(--spacing-xxs);
  }

  &:has(&Input:active:not(:disabled)) {
    --checkbox-border-color: var(--semantic-interactive-foreground);
    --label-color: var(--semantic-interactive-foreground);
    --description-color: var(--semantic-interactive-foreground);
  }

  &:has(&Input[data-read-only='true']:not(:disabled)) {
    --checkbox-border-color: var(--semantic-page-background);
    --checkbox-background-color: var(--semantic-page-background);
    --check-color: var(--palette-graphite-0);
    --label-color: var(--palette-graphite-70);
    --description-color: var(--palette-graphite-70);
    --cursor: default;

    pointer-events: none;
  }

  &:has(&Input:checked:not(:disabled)) {
    --checkbox-border-color: var(--semantic-interactive-main);
    --checkbox-background-color: var(--semantic-interactive-main);
  }

  &:has(&Input:checked:hover:not(:disabled)) {
    --check-color: var(--palette-graphite-0);
  }

  &:has(&Input:checked:active:not(:disabled)) {
    --checkbox-border-color: var(--semantic-interactive-foreground);
    --checkbox-background-color: var(--semantic-interactive-foreground);
  }

  &:has(&Input:checked[data-read-only='true']:not(:disabled)) {
    --checkbox-border-color: var(--semantic-page-background);
    --checkbox-background-color: var(--semantic-page-background);
    --check-color: var(--palette-graphite-70);
  }

  &:has(
      &Input[aria-invalid='true']:required:not(
          [data-read-only='true'],
          :disabled
        )
    ) {
    background-color: var(--semantic-danger-background);
    box-shadow: calc(-1 * var(--spacing-xs)) 0 var(--semantic-danger-background);
  }

  &Input {
    position: relative;
    width: var(--size-medium);
    height: var(--size-medium);
    box-sizing: border-box;
    flex-shrink: 0;
    border: var(--spacing-xxs) solid var(--checkbox-border-color);
    margin-top: 6px;
    appearance: none;
    background-color: var(--checkbox-background-color);
    cursor: var(--cursor);
    outline: var(--outline-width) solid var(--semantic-interactive-main);
    outline-offset: var(--spacing-xxs);

    &::before {
      position: absolute;
      top: 0.1875rem;
      left: 0.0625rem;
      width: 0.71875rem;
      height: 0.3125rem;
      border-bottom: var(--spacing-xxs) solid var(--check-color);
      border-left: var(--spacing-xxs) solid var(--check-color);
      content: '';
      transform: rotate(-45deg);
    }
  }

  &Label {
    padding: var(--spacing-xs) var(--spacing-xs) var(--spacing-xs)
      var(--spacing-s);
    color: var(--label-color);
    cursor: var(--cursor);
    font-size: var(--font-size-m);
    gap: var(--spacing-xs);
    line-height: var(--semantic-line-height-input);
    overflow-wrap: anywhere;
    word-break: normal;

    &_required {
      &::after {
        color: var(--required-color);
        content: '*';
        font-weight: var(--font-weight-bold);
      }
    }

    &Description {
      display: block;
      margin-top: var(--spacing-xs);
      color: var(--description-color);
    }
  }
}

.srOnly {
  @include style.sr-only;
}
