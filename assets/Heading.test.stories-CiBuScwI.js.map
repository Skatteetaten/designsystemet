{"version":3,"file":"Heading.test.stories-CiBuScwI.js","sources":["../../../../libs/ds-typography/src/Heading/Heading.types.ts","../../../../apps/ds-playground/src/stories/__tests__/Heading.test.stories.tsx"],"sourcesContent":["import { ReactNode, Ref } from 'react';\n\nimport { BaseProps, HeadingAs } from '@skatteetaten/ds-core-utils';\n\nexport const headingLevelArr = [1, 2, 3, 4, 5] as const;\nexport type HeadingLevel = (typeof headingLevelArr)[number];\n\nexport interface HeadingProps extends BaseProps {\n  ref?: Ref<HTMLHeadingElement>;\n  /** Heading tag h1-6 */\n  as: HeadingAs;\n  /** Tekst eller markup for heading */\n  children: ReactNode;\n  /** Margin under heading */\n  hasSpacing?: boolean;\n  /** Hierarkinivå som styrer font størrelse, line height og spacing */\n  level?: HeadingLevel;\n  /** Lar komponenten være fokuserbar ved å sett tabIndex: -1 */\n  canBeManuallyFocused?: boolean;\n}\n","import { StoryFn, Meta, StoryObj } from '@storybook/react-vite';\nimport { expect, within } from 'storybook/test';\n\nimport { headingAsArr } from '@skatteetaten/ds-core-utils';\nimport {\n  Heading,\n  HeadingProps,\n  headingLevelArr,\n} from '@skatteetaten/ds-typography';\n\nconst meta = {\n  component: Heading,\n  title: 'Tester/Heading',\n  argTypes: {\n    // Baseprops\n    ref: { table: { disable: true } },\n    className: { table: { disable: true } },\n    id: { table: { disable: true } },\n    lang: { table: { disable: true } },\n    'data-testid': { table: { disable: true } },\n    // Props\n    canBeManuallyFocused: { table: { disable: true } },\n    children: {\n      table: { disable: true },\n      control: 'text',\n    },\n    hasSpacing: { table: { disable: true } },\n    as: { table: { disable: true } },\n    level: { table: { disable: true } },\n  },\n  tags: ['test'],\n  parameters: {\n    imageSnapshot: { disableSnapshot: false },\n  },\n} satisfies Meta<typeof Heading>;\nexport default meta;\ntype Story = StoryObj<typeof meta>;\n\nconst defaultArgs: HeadingProps = {\n  as: 'h2',\n  children: 'Dette er en heading',\n};\n\nexport const WithRef = {\n  name: 'With Ref (FA1)',\n  args: {\n    ...defaultArgs,\n    ref: (instance: HTMLHeadingElement | null): void => {\n      if (instance) {\n        instance.id = 'dummyIdForwardedFromRef';\n      }\n    },\n  },\n  argTypes: {\n    ref: { table: { disable: false } },\n  },\n  parameters: { imageSnapshot: { disableSnapshot: true } },\n  play: async ({ canvasElement }): Promise<void> => {\n    const canvas = within(canvasElement);\n    const heading = canvas.getByRole('heading');\n    await expect(heading).toHaveAttribute('id', 'dummyIdForwardedFromRef');\n  },\n} satisfies Story;\n\nexport const WithAttributes = {\n  name: 'With Attributes (FA2-5)',\n  args: {\n    ...defaultArgs,\n    id: 'htmlId',\n    className: 'dummyClassname',\n    lang: 'nb',\n    'data-testid': '123ID',\n  },\n  argTypes: {\n    id: { table: { disable: false } },\n    className: { table: { disable: false } },\n    lang: { table: { disable: false } },\n    'data-testid': { table: { disable: false } },\n  },\n  parameters: {\n    a11y: {\n      test: 'off',\n    },\n  },\n  play: async ({ canvasElement }): Promise<void> => {\n    const canvas = within(canvasElement);\n    const heading = canvas.getByRole('heading');\n    await expect(heading).toHaveClass('dummyClassname');\n    await expect(heading).toHaveAttribute('id', 'htmlId');\n    await expect(heading).toHaveAttribute('lang', 'nb');\n    await expect(heading).toHaveAttribute('data-testid', '123ID');\n  },\n} satisfies Story;\n\nconst TemplateWithAllLevels: StoryFn<typeof Heading> = (args) => (\n  <>\n    {headingLevelArr.map((headingLevel, item) => {\n      return (\n        <Heading key={`level_${item}`} {...args} level={headingLevel}>\n          {`Heading level ${headingLevel}`}\n        </Heading>\n      );\n    })}\n  </>\n);\n\nexport const Defaults = {\n  render: TemplateWithAllLevels,\n  name: 'Defaults All Levels (A1, A2)',\n  args: {\n    ...defaultArgs,\n  },\n  play: async ({ canvasElement }): Promise<void> => {\n    const canvas = within(canvasElement);\n    const headings = canvas.getAllByRole('heading', { level: 2 });\n    for (const [index, heading] of headings.entries()) {\n      await expect(heading).toBeInTheDocument();\n      await expect(heading).toHaveAttribute('data-level', `${index + 1}`);\n    }\n  },\n} satisfies Story;\n\nexport const DefaultsMobile = {\n  render: TemplateWithAllLevels,\n  name: 'Defaults All Levels On Small Screen (A1, A2)',\n  args: {\n    ...defaultArgs,\n  },\n  globals: {\n    viewport: {\n      value: '--breakpoint-xs',\n    },\n  },\n} satisfies Story;\n\nexport const LevelsWithSpacing = {\n  render: TemplateWithAllLevels,\n  name: 'With Spacing All Levels (A4)',\n  args: {\n    ...defaultArgs,\n    hasSpacing: true,\n  },\n  argTypes: {\n    hasSpacing: {\n      table: { disable: false },\n    },\n  },\n} satisfies Story;\n\nexport const LevelsWithSpacingMobile = {\n  render: TemplateWithAllLevels,\n  name: 'With Spacing All Levels On Small Screen (A4)',\n  args: {\n    ...defaultArgs,\n    hasSpacing: true,\n  },\n  argTypes: {\n    hasSpacing: {\n      table: { disable: false },\n    },\n  },\n  globals: {\n    viewport: {\n      value: '--breakpoint-xs',\n    },\n  },\n} satisfies Story;\n\nconst AsTemplate: StoryFn<typeof Heading> = (args) => (\n  <>\n    {headingAsArr.map((heading) => (\n      <Heading key={`heading-${heading}`} {...args} as={heading}>\n        {`Heading ${heading}`}\n      </Heading>\n    ))}\n  </>\n);\n\nexport const WithAs = {\n  render: AsTemplate,\n  name: 'With As (B1)',\n  args: {\n    ...defaultArgs,\n  },\n  play: async ({ canvasElement }): Promise<void> => {\n    const canvas = within(canvasElement);\n    const headings = canvas.getAllByRole('heading');\n    for (const [index, heading] of headings.entries()) {\n      await expect(heading.tagName).toBe(\n        headingAsArr[index].toLocaleUpperCase()\n      );\n    }\n  },\n} satisfies Story;\n\nconst TemplateWithMarkup: StoryFn<typeof Heading> = (args) => (\n  <>\n    <Heading {...args} hasSpacing>\n      {'Dette er den '}\n      <a href={'https://www.skatteetaten.no'}>{'fyneste markup headingen'}</a>\n      <em>{' som finnes i italic '}</em>\n      <strong>{'og strong '}</strong>\n      <mark>{'mark '}</mark>\n      <code>{'code '}</code>\n      {'med spacing under og en skrivefeil'}\n    </Heading>\n    <Heading {...args} />\n  </>\n);\n\nexport const WithMarkup = {\n  render: TemplateWithMarkup,\n  name: 'With Markup And String (A3, B2)',\n  args: {\n    ...defaultArgs,\n    children: 'Dette er den fineste string headingen uten markup',\n  },\n  argTypes: {\n    children: {\n      table: { disable: false },\n      control: { disable: true },\n    },\n  },\n} satisfies Story;\n\nexport const WithCanBeManuallyFocused: Story = {\n  render: (args) => <Heading {...args} />,\n  args: {\n    ...defaultArgs,\n    canBeManuallyFocused: true,\n  },\n  argTypes: {\n    canBeManuallyFocused: { table: { disable: false } },\n  },\n  play: async ({ canvasElement }): Promise<void> => {\n    const canvas = within(canvasElement);\n    const heading = canvas.getByRole('heading');\n    heading.focus();\n    await expect(heading).toBeInTheDocument();\n    await expect(heading).toHaveAttribute('tabIndex', '-1');\n  },\n} satisfies Story;\n"],"names":["headingLevelArr","expect","within","meta","component","Heading","title","argTypes","ref","table","disable","className","id","lang","canBeManuallyFocused","children","control","hasSpacing","as","level","tags","parameters","imageSnapshot","disableSnapshot","defaultArgs","WithRef","name","args","instance","play","canvasElement","heading","getByRole","toHaveAttribute","WithAttributes","a11y","test","toHaveClass","TemplateWithAllLevels","jsx","Fragment","map","headingLevel","item","Defaults","render","headings","getAllByRole","index","entries","toBeInTheDocument","DefaultsMobile","globals","viewport","value","LevelsWithSpacing","LevelsWithSpacingMobile","AsTemplate","headingAsArr","WithAs","tagName","toBe","toLocaleUpperCase","TemplateWithMarkup","jsxs","WithMarkup","WithCanBeManuallyFocused","focus","docs","source","originalSource"],"mappings":"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"}