{"version":3,"file":"TopBannerLogo.test.stories-Dqr3cL5W.js","sources":["../../../../libs/ds-layout/src/TopBannerLogo/TopBannerLogo.types.ts","../../../../apps/ds-playground/src/stories/__tests__/TopBannerLogo.test.stories.tsx"],"sourcesContent":["import { MouseEventHandler, Ref } from 'react';\n\nimport { BaseProps } from '@skatteetaten/ds-core-utils';\n\nexport const logoAsArr = ['a', 'div'] as const;\nexport type LogoAs = (typeof logoAsArr)[number];\n\ntype TopBannerLogoDiscrimatedProps =\n  | {\n      /** Overskriver default logo. Må også angi logo for mobilvisning, alt-tekst og url. */\n      logo?: never;\n      /** Overskriver default logo for mobilvisning. */\n      mobileLogo?: never;\n      /** Overskriver default alt-tekst for logo kun dersom logo og mobileLogo også endres. NB! Alt-tekst må være tilpasset om logo er en lenke eller ikke.*/\n      alt?: never;\n      /** Overskriver default URL. */\n      href?: never;\n      /** HTML-tag for Logo. Styrer om logo skal kodes som en lenke eller ikke. Hvis default logo endres til å ikke være en lenke, så blir logoAltText automatisk tilpasset. */\n      as?: LogoAs;\n    }\n  | {\n      /** Overskriver default logo. Må også angi logo for mobilvisning, alt-tekst og url. */\n      logo: string;\n      /** Overskriver default logo for mobilvisning. */\n      mobileLogo: string;\n      /** Overskriver default alt-tekst for logo kun dersom logo og mobileLogo også endres. NB! Alt-tekst må være tilpasset om logo er en lenke eller ikke.*/\n      alt: string;\n      /** Overskriver default URL. */\n      href: string;\n      /** HTML-tag for Logo. Styrer om logo skal kodes som en lenke eller ikke. Hvis default logo endres til å ikke være en lenke, så blir logoAltText automatisk tilpasset. */\n      as?: Extract<LogoAs, 'a'>;\n    }\n  | {\n      /** Overskriver default logo. Må også angi logo for mobilvisning, alt-tekst og url. */\n      logo: string;\n      /** Overskriver default logo for mobilvisning. */\n      mobileLogo: string;\n      /** Overskriver default alt-tekst for logo kun dersom logo og mobileLogo også endres. NB! Alt-tekst må være tilpasset om logo er en lenke eller ikke.*/\n      alt: string;\n      /** Overskriver default URL. */\n      href?: never;\n      /** HTML-tag for Logo. Styrer om logo skal kodes som en lenke eller ikke. Hvis default logo endres til å ikke være en lenke, så blir logoAltText automatisk tilpasset. */\n      as?: Extract<LogoAs, 'div'>;\n    };\n\ninterface TopBannerLogoCommonProps {\n  ref?: Ref<HTMLAnchorElement | HTMLDivElement | null>;\n  onClick?: MouseEventHandler<HTMLDivElement | HTMLAnchorElement>;\n}\n\nexport type TopBannerLogoProps = TopBannerLogoDiscrimatedProps &\n  TopBannerLogoCommonProps &\n  BaseProps;\n","import { Meta, StoryObj } from '@storybook/react';\nimport { expect, fireEvent, fn, waitFor, within } from '@storybook/test';\n\nimport { dsI18n } from '@skatteetaten/ds-core-utils';\n\nimport { wrapper } from './testUtils/storybook.testing.utils';\n// eslint-disable-next-line @nx/enforce-module-boundaries\nimport { TopBannerLogo } from '../../../../../libs/ds-layout/src/TopBannerLogo/TopBannerLogo';\n// eslint-disable-next-line @nx/enforce-module-boundaries\nimport {\n  logoAsArr,\n  TopBannerLogoProps,\n} from '../../../../../libs/ds-layout/src/TopBannerLogo/TopBannerLogo.types';\nimport customLogo from '../../assets/custom-logo.svg';\nimport customMobileLogo from '../../assets/custom-mobile-logo.svg';\n\nconst meta = {\n  component: TopBannerLogo,\n  title: 'Tester/TopBanner/TopBannerLogo (intern)',\n  argTypes: {\n    // Baseprops\n    ref: { table: { disable: true } },\n    className: { table: { disable: true } },\n    id: { table: { disable: true } },\n    lang: { table: { disable: true } },\n    'data-testid': { table: { disable: true } },\n    // Props\n    as: {\n      table: { disable: true },\n      options: [...logoAsArr],\n      control: 'inline-radio',\n    },\n    logo: {\n      table: { disable: true },\n      control: 'select',\n      options: ['', customLogo],\n    },\n    mobileLogo: {\n      table: { disable: true },\n      control: 'select',\n      options: ['', customMobileLogo],\n    },\n    // HTML\n    alt: { table: { disable: true } },\n    href: { table: { disable: true } },\n  },\n} satisfies Meta<typeof TopBannerLogo>;\nexport default meta;\ntype Story = StoryObj<typeof meta>;\n\nconst logoLinkText = dsI18n.t('ds_layout:topbanner.SkeLogoLinkText');\nconst logoText = dsI18n.t('ds_layout:topbanner.SkeLogoImageText');\nconst defaultArgs: TopBannerLogoProps = {};\n\nexport const WithRef = {\n  name: 'With Ref (FA1)',\n  args: {\n    ...defaultArgs,\n    ref: (instance: HTMLAnchorElement | null): void => {\n      if (instance) {\n        instance.id = 'dummyIdForwardedFromRef';\n      }\n    },\n  },\n  argTypes: {\n    ref: { table: { disable: false } },\n  },\n  parameters: {\n    imageSnapshot: { disable: true },\n  },\n  play: async ({ canvasElement }): Promise<void> => {\n    const canvas = within(canvasElement);\n    const link = canvas.getByRole('link');\n    await expect(link).toHaveAttribute('id', 'dummyIdForwardedFromRef');\n  },\n} satisfies Story;\n\nexport const WithAttributes = {\n  name: 'With Attributes (FA2-5)',\n  args: {\n    ...defaultArgs,\n    id: 'htmlId',\n    className: 'dummyClassname',\n    lang: 'en',\n    'data-testid': '123ID',\n  },\n  argTypes: {\n    id: { table: { disable: false } },\n    className: { table: { disable: false } },\n    lang: { table: { disable: false } },\n    'data-testid': { table: { disable: false } },\n  },\n  play: async ({ canvasElement }): Promise<void> => {\n    const canvas = within(canvasElement);\n    const link = canvas.getByRole('link');\n    await expect(link).toHaveAttribute('id', 'htmlId');\n    await expect(link).toHaveClass('dummyClassname');\n    await expect(link).toHaveAttribute('lang', 'en');\n    await expect(link).toHaveAttribute('data-testid', '123ID');\n  },\n} satisfies Story;\n\nexport const Defaults = {\n  name: 'Defaults (A8, A9)',\n  args: {\n    ...defaultArgs,\n  },\n  argTypes: {},\n  parameters: {\n    imageSnapshot: {\n      focus: `${wrapper} a`,\n    },\n  },\n  play: async ({ canvasElement }): Promise<void> => {\n    const canvas = within(canvasElement);\n    const link = canvas.getByRole('link');\n    await expect(link).toBeInTheDocument();\n    await expect(link).toHaveAttribute('href', 'https://www.skatteetaten.no/');\n    const logo = canvas.getByRole('img', {\n      name: logoLinkText,\n    });\n    await expect(logo).toBeInTheDocument();\n  },\n} satisfies Story;\n\nexport const WithAs = {\n  name: 'With As (A8)',\n  args: {\n    ...defaultArgs,\n    as: 'div',\n  },\n  argTypes: {\n    as: { table: { disable: false } },\n  },\n  parameters: {\n    imageSnapshot: { disable: true },\n  },\n  play: async ({ canvasElement }): Promise<void> => {\n    const canvas = within(canvasElement);\n\n    await expect(canvasElement.querySelector('a')).not.toBeInTheDocument();\n    const logo = canvas.getByRole('img', {\n      name: logoText,\n    });\n    await expect(logo).toBeInTheDocument();\n  },\n} satisfies Story;\n\nexport const WithLogoMobileLogoAltAndHref = {\n  name: 'With Logo, MobileLogo, Alt, And Href (A8, A10)',\n  args: {\n    ...defaultArgs,\n    as: 'a',\n    logo: customLogo,\n    mobileLogo: customMobileLogo,\n    alt: 'custom alt text',\n    href: '#',\n  },\n  argTypes: {\n    logo: { table: { disable: false } },\n    mobileLogo: { table: { disable: false } },\n    alt: { table: { disable: false } },\n    href: { table: { disable: false } },\n  },\n  play: async ({ canvasElement }): Promise<void> => {\n    const canvas = within(canvasElement);\n    const link = canvas.getByRole('link', {\n      name: 'custom alt text',\n    });\n    await expect(link).toBeInTheDocument();\n    await expect(link).toHaveAttribute('href', '#');\n  },\n} satisfies Story;\n\nexport const WithOnClick = {\n  name: 'With OnClick',\n  args: {\n    ...defaultArgs,\n    onClick: fn((e) => {\n      e.preventDefault();\n    }),\n  },\n  parameters: {\n    imageSnapshot: {\n      disable: true,\n    },\n    HTMLSnapshot: { disable: true },\n  },\n  play: async ({ args, canvasElement }): Promise<void> => {\n    const canvas = within(canvasElement);\n    const logo = canvas.getByRole('img', {\n      name: logoLinkText,\n    });\n    await fireEvent.click(logo);\n\n    await waitFor(() => expect(args.onClick).toHaveBeenCalledOnce());\n  },\n} satisfies Story;\n"],"names":["logoAsArr","meta","component","TopBannerLogo","title","argTypes","ref","table","disable","className","id","lang","as","options","control","logo","customLogo","mobileLogo","customMobileLogo","alt","href","logoLinkText","dsI18n","t","logoText","defaultArgs","WithRef","name","args","instance","parameters","imageSnapshot","play","canvasElement","link","within","getByRole","expect","toHaveAttribute","WithAttributes","toHaveClass","Defaults","focus","wrapper","canvas","toBeInTheDocument","WithAs","querySelector","not","WithLogoMobileLogoAltAndHref","WithOnClick","onClick","fn","e","preventDefault","HTMLSnapshot","fireEvent","click","waitFor","toHaveBeenCalledOnce","docs","source","originalSource"],"mappings":"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"}