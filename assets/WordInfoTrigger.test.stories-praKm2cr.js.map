{"version":3,"file":"WordInfoTrigger.test.stories-praKm2cr.js","sources":["../../../../apps/ds-playground/src/stories/__tests__/WordInfoTrigger.test.stories.tsx"],"sourcesContent":["import { JSX } from 'react';\n\nimport { Meta, StoryObj } from '@storybook/react-vite';\nimport { expect, fn, userEvent, waitFor, within } from 'storybook/test';\n\nimport { dsI18n } from '@skatteetaten/ds-core-utils';\nimport { WordInfo } from '@skatteetaten/ds-overlays';\n\nimport { category, htmlEventDescription } from '../../../.storybook/helpers';\n\nconst meta = {\n  component: WordInfo.Trigger,\n  title: 'Tester/WordInfo/Trigger',\n  argTypes: {\n    // Baseprops\n    ref: { table: { disable: true } },\n    className: { table: { disable: true } },\n    id: { table: { disable: true } },\n    lang: { table: { disable: true } },\n    'data-testid': { table: { disable: true } },\n    // Props\n    children: { table: { category: category.htmlAttribute, disable: true } },\n    //todo\n    hasIcon: {\n      table: { category: category.props, disable: true },\n    },\n    //Events\n    onClick: { ...htmlEventDescription, table: { disable: true } },\n  },\n  args: {\n    children: 'arkskrift',\n  },\n  render: (args): JSX.Element => (\n    <WordInfo>\n      <WordInfo.Trigger {...args} />\n    </WordInfo>\n  ),\n  tags: ['test'],\n  parameters: {\n    imageSnapshot: { disableSnapshot: false },\n  },\n} satisfies Meta<typeof WordInfo.Trigger>;\nexport default meta;\ntype Story = StoryObj<typeof meta>;\n\nexport const WithRef = {\n  name: 'With Ref (FA1)',\n  args: {\n    ref: (instance: HTMLButtonElement | null): void => {\n      if (instance) {\n        instance.id = 'dummyIdForwardedFromRef';\n      }\n    },\n  },\n  argTypes: {\n    ref: { table: { disable: false } },\n  },\n  parameters: {\n    imageSnapshot: { disableSnapshot: true },\n  },\n  play: async ({ canvasElement }): Promise<void> => {\n    const canvas = within(canvasElement);\n    const button = canvas.getByRole('button');\n    await expect(button).toHaveAttribute('id', 'dummyIdForwardedFromRef');\n  },\n} satisfies Story;\n\nexport const WithAttributes = {\n  name: 'With Attributes (FA2-5)',\n  args: {\n    id: 'htmlId',\n    className: 'dummyClassname',\n    lang: 'en',\n    'data-testid': '123ID',\n  },\n  argTypes: {\n    id: { table: { disable: false } },\n    className: { table: { disable: false } },\n    lang: { table: { disable: false } },\n    'data-testid': { table: { disable: false } },\n  },\n  parameters: {\n    imageSnapshot: { disableSnapshot: true },\n  },\n  play: async ({ canvasElement }): Promise<void> => {\n    const canvas = within(canvasElement);\n    const button = canvas.getByRole('button');\n    await expect(button).toHaveAttribute('id', 'htmlId');\n    await expect(button).toHaveClass('dummyClassname');\n    await expect(button).toHaveAttribute('lang', 'en');\n    await expect(button).toHaveAttribute('data-testid', '123ID');\n  },\n} satisfies Story;\n\nexport const Defaults = {\n  name: 'Defaults (A1, A5, B2)',\n  args: {},\n  argTypes: {\n    children: { table: { disable: false } },\n  },\n  parameters: {\n    imageSnapshot: { pseudoStates: ['hover', 'focus-visible', 'active'] },\n  },\n  play: async ({ canvasElement }): Promise<void> => {\n    const canvas = within(canvasElement);\n    const button = canvas.getByRole('button');\n    await expect(button).toBeInTheDocument();\n    await expect(button).toHaveAttribute('aria-expanded', 'false');\n    const icon = canvas.getByRole('img', { hidden: true });\n    await expect(icon).toBeInTheDocument();\n    await expect(icon).toHaveAttribute('aria-hidden', 'true');\n    const title = icon.querySelector('title');\n    expect(title).toBeNull();\n    const srOnlyText = canvas.getByText(\n      dsI18n.t('ds_overlays:wordinfo.WordExplanation')\n    );\n    await expect(srOnlyText).toBeInTheDocument();\n    await expect(srOnlyText.className).toContain('srOnly');\n  },\n} satisfies Story;\n\nexport const WithoutIcon = {\n  name: 'Without Icon (A5)',\n  args: {\n    hasIcon: false,\n  },\n  argTypes: {\n    hasIcon: { table: { disable: false } },\n  },\n  parameters: {\n    imageSnapshot: { pseudoStates: ['hover', 'focus-visible', 'active'] },\n  },\n} satisfies Story;\n\nexport const WithOnClick = {\n  name: 'With OnClick (B1)',\n  args: {\n    onClick: fn(),\n  },\n  parameters: {\n    imageSnapshot: { disableSnapshot: true },\n  },\n  play: async ({ args, canvasElement }): Promise<void> => {\n    const canvas = within(canvasElement);\n    const button = canvas.getByRole('button');\n    await expect(button).toBeInTheDocument();\n    await expect(button).toHaveAttribute('aria-expanded', 'false');\n    await userEvent.click(button);\n    await waitFor(() => expect(args.onClick).toHaveBeenCalled());\n    await expect(button).toHaveAttribute('aria-expanded', 'true');\n  },\n} satisfies Story;\n"],"names":["expect","fn","userEvent","waitFor","within","meta","component","WordInfo","Trigger","title","argTypes","ref","table","disable","className","id","lang","children","category","htmlAttribute","hasIcon","props","onClick","htmlEventDescription","args","render","jsx","tags","parameters","imageSnapshot","disableSnapshot","WithRef","name","instance","play","canvasElement","button","getByRole","toHaveAttribute","WithAttributes","toHaveClass","Defaults","pseudoStates","canvas","toBeInTheDocument","icon","hidden","querySelector","toBeNull","srOnlyText","getByText","dsI18n","t","toContain","WithoutIcon","WithOnClick","click","toHaveBeenCalled","docs","source","originalSource"],"mappings":"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"}