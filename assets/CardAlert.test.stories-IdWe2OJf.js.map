{"version":3,"file":"CardAlert.test.stories-IdWe2OJf.js","sources":["../../../../apps/ds-playground/src/stories/__tests__/CardAlert.test.stories.tsx"],"sourcesContent":["import { Meta, StoryFn, StoryObj } from '@storybook/react';\nimport { expect, userEvent, waitFor, within } from '@storybook/test';\n\nimport { Card, CardAlertVariant } from '@skatteetaten/ds-content';\nimport { statusArr } from '@skatteetaten/ds-core-utils';\nimport { SkattetrekkSVGpath } from '@skatteetaten/ds-icons';\nimport { Heading, Paragraph } from '@skatteetaten/ds-typography';\n\nconst meta = {\n  component: Card.Alert,\n  title: 'Tester/Card/Alert',\n  argTypes: {\n    // Baseprops\n    key: { table: { disable: true } },\n    ref: { table: { disable: true } },\n    className: { table: { disable: true } },\n    id: { table: { disable: true } },\n    lang: { table: { disable: true } },\n    'data-testid': { table: { disable: true } },\n    // Props\n    children: {\n      table: { disable: true },\n      control: 'text',\n    },\n    variant: {\n      table: { disable: true },\n      control: 'text',\n    },\n    title: {\n      table: { disable: true },\n      control: 'text',\n    },\n    titleAs: {\n      table: { disable: true },\n    },\n    showAlert: {\n      table: { disable: true },\n      control: 'text',\n    },\n    svgPath: {\n      table: { disable: true },\n    },\n    // Events\n    onClose: {\n      table: { disable: true },\n    },\n  },\n} satisfies Meta<typeof Card.Alert>;\nexport default meta;\ntype Story = StoryObj<typeof meta>;\n\nconst defaultText =\n  'Gruppering av opplysninger i skjema, for eksempel inntekter, personer eller oppsummeringer.';\n\nconst defaultArgs = {\n  children: defaultText,\n  variant: statusArr[1],\n  title: 'Merknad',\n};\n\nexport const WithRef = {\n  name: 'With Ref (FA1)',\n  args: {\n    ...defaultArgs,\n    ref: (instance: HTMLDivElement | null): void => {\n      if (instance) {\n        instance.id = 'dummyIdForwardedFromRef';\n      }\n    },\n  },\n  argTypes: {\n    ref: { table: { disable: false } },\n  },\n  parameters: {\n    imageSnapshot: { disable: true },\n  },\n  play: async ({ canvasElement }): Promise<void> => {\n    const canvas = within(canvasElement);\n    const container = canvas.getAllByRole('generic')[1];\n    await expect(container).toHaveAttribute('id', 'dummyIdForwardedFromRef');\n  },\n} satisfies Story;\n\nexport const WithAttributes = {\n  name: 'With Attributes (FA2-5)',\n  args: {\n    ...defaultArgs,\n    id: 'htmlId',\n    className: 'dummyClassname',\n    lang: 'en',\n    'data-testid': '123ID',\n  },\n  argTypes: {\n    id: { table: { disable: false } },\n    className: { table: { disable: false } },\n    lang: { table: { disable: false } },\n    'data-testid': { table: { disable: false } },\n  },\n  play: async ({ canvasElement }): Promise<void> => {\n    const canvas = within(canvasElement);\n    const cardNote = canvas.getAllByRole('generic')[1];\n    await expect(cardNote).toHaveAttribute('id', 'htmlId');\n    await expect(cardNote).toHaveClass('dummyClassname');\n    await expect(cardNote).toHaveAttribute('lang', 'en');\n    await expect(cardNote).toHaveAttribute('data-testid', '123ID');\n  },\n} satisfies Story;\n\nexport const WithSvgPath = {\n  name: 'With custom icon, children and title (A7)',\n  args: {\n    ...defaultArgs,\n    svgPath: SkattetrekkSVGpath,\n  },\n  argTypes: {\n    children: { table: { disable: false } },\n  },\n} satisfies Story;\n\nconst variantsArr: CardAlertVariant[] = ['neutral', 'warning', 'danger'];\nconst TemplateAllVariants: StoryFn<typeof Card> = (args) => (\n  <Card>\n    {variantsArr.map((variant, index) => {\n      return (\n        <Card.Alert\n          title={defaultArgs.title}\n          {...args}\n          key={`card_${index}`}\n          className={'bottomSpacingXL'}\n          variant={variant}\n        >\n          <Card.Content>{args.children}</Card.Content>\n        </Card.Alert>\n      );\n    })}\n  </Card>\n);\n\nexport const AllVariants = {\n  render: TemplateAllVariants,\n  name: 'All Variants (A7)',\n  args: {\n    ...defaultArgs,\n  },\n} satisfies Story;\n\nexport const WithOnClose = {\n  name: 'With OnClose',\n  args: {\n    ...defaultArgs,\n    children: (\n      <>\n        <Heading as={'h1'} level={4}>\n          {'Avvist av kortutsteder'}\n        </Heading>\n        <Paragraph>\n          {'Ta kontakt med kortutsteder for '}\n          <a href={'#storybook-root'}>{'mer informasjon'}</a>\n        </Paragraph>\n      </>\n    ),\n  },\n  parameters: {\n    imageSnapshot: { disable: true },\n  },\n  play: async ({ canvasElement }): Promise<void> => {\n    const canvas = within(canvasElement);\n    const closeButton = canvas.getByRole('button');\n    await userEvent.click(closeButton);\n    await waitFor(() => {\n      expect(\n        canvas.queryByText('Avvist av kortutsteder')\n      ).not.toBeInTheDocument();\n    });\n  },\n} satisfies Story;\n"],"names":["meta","component","Card","Alert","title","argTypes","key","table","disable","ref","className","id","lang","children","control","variant","titleAs","showAlert","svgPath","onClose","defaultText","defaultArgs","statusArr","WithRef","name","args","instance","parameters","imageSnapshot","play","canvasElement","container","within","getAllByRole","expect","toHaveAttribute","WithAttributes","cardNote","toHaveClass","WithSvgPath","SkattetrekkSVGpath","variantsArr","TemplateAllVariants","jsx","map","index","createElement","AllVariants","render","WithOnClose","jsxs","Fragment","Heading","Paragraph","canvas","closeButton","getByRole","userEvent","click","waitFor","queryByText","not","toBeInTheDocument","docs","source","originalSource"],"mappings":"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"}