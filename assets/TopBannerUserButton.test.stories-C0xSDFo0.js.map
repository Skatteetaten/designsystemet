{"version":3,"file":"TopBannerUserButton.test.stories-C0xSDFo0.js","sources":["../../../../libs/ds-layout/src/TopBannerExternal/TopBannerUserButton/TopBannerUserButton.types.ts","../../../../apps/ds-playground/src/stories/__tests__/TopBannerUserButton.test.stories.tsx"],"sourcesContent":["import { MouseEventHandler, Ref } from 'react';\n\nimport { BaseProps } from '@skatteetaten/ds-core-utils';\n\nimport { User } from '../TopBannerExternal.types';\n\nexport const userRoleArr = ['meg', 'andre', 'virksomhet'] as const;\n\nexport interface TopBannerUserButtonProps extends BaseProps {\n  ref?: Ref<HTMLButtonElement>;\n  /**\n   * Hvilken rolle innlogget bruker har. Hvis user.role er lik 'meg' settes\n   * automatisk teksten 'Meg selv' ellers settes teksten til user.name\n   */\n  user: User;\n  /** Callback når knappen trykkes på. */\n  onClick?: MouseEventHandler<HTMLButtonElement>;\n}\n","import { Meta, StoryFn, StoryObj } from '@storybook/react-vite';\nimport { expect, within } from 'storybook/test';\n\nimport { dsI18n } from '@skatteetaten/ds-core-utils';\n\n// eslint-disable-next-line @nx/enforce-module-boundaries\nimport { TopBannerUserButton } from '../../../../../libs/ds-layout/src/TopBannerExternal/TopBannerUserButton/TopBannerUserButton';\n// eslint-disable-next-line @nx/enforce-module-boundaries\nimport {\n  TopBannerUserButtonProps,\n  userRoleArr,\n} from '../../../../../libs/ds-layout/src/TopBannerExternal/TopBannerUserButton/TopBannerUserButton.types';\n\nconst verifyAttribute =\n  (attribute: string, expectedValue: string) =>\n  async ({ canvasElement }: { canvasElement: HTMLElement }): Promise<void> => {\n    const canvas = within(canvasElement);\n    const button = canvas.getByRole('button');\n    await expect(button).toBeInTheDocument();\n    await expect(button).toHaveAttribute(attribute, expectedValue);\n  };\n\nconst meta = {\n  component: TopBannerUserButton,\n  title: 'Tester/TopBannerExternal/UserButton (intern)',\n  argTypes: {\n    // Baseprops\n    ref: { table: { disable: true } },\n    className: { table: { disable: true } },\n    id: { table: { disable: true } },\n    lang: { table: { disable: true } },\n    'data-testid': { table: { disable: true } },\n    // Props\n    user: { table: { disable: true } },\n    // Events\n    onClick: { table: { disable: true } },\n  },\n  tags: ['test'],\n  parameters: {\n    imageSnapshot: { disableSnapshot: false },\n  },\n} as Meta<typeof TopBannerUserButton>;\nexport default meta;\ntype Story = StoryObj<typeof meta>;\n\nconst defaultArgs: TopBannerUserButtonProps = {\n  user: {\n    role: 'meg',\n  },\n};\n\nexport const WithRef = {\n  name: 'With Ref (FA1)',\n  args: {\n    ...defaultArgs,\n    ref: (instance: HTMLButtonElement | null): void => {\n      if (instance) {\n        instance.id = 'dummyIdForwardedFromRef';\n      }\n    },\n  },\n  argTypes: {\n    ref: { table: { disable: false } },\n  },\n  parameters: {\n    imageSnapshot: { disableSnapshot: true },\n  },\n  play: verifyAttribute('id', 'dummyIdForwardedFromRef'),\n} satisfies Story;\n\nexport const WithAttributes = {\n  name: 'With Attributes (FA2-5)',\n  args: {\n    ...defaultArgs,\n    id: 'htmlid',\n    className: 'dummyClassname',\n    lang: 'nb',\n    'data-testid': '123ID',\n  },\n  argTypes: {\n    id: { table: { disable: false } },\n    className: { table: { disable: false } },\n    lang: { table: { disable: false } },\n    'data-testid': { table: { disable: false } },\n  },\n  parameters: {\n    a11y: {\n      test: 'off',\n    },\n  },\n  play: async ({ canvasElement }): Promise<void> => {\n    const canvas = within(canvasElement);\n    const button = canvas.getByRole('button');\n    await expect(button).toHaveAttribute('id', 'htmlid');\n    await expect(button).toHaveClass('dummyClassname');\n    await expect(button).toHaveAttribute('lang', 'nb');\n    await expect(button).toHaveAttribute('data-testid', '123ID');\n  },\n} satisfies Story;\n\nexport const Defaults = {\n  name: 'Defaults (Username A2)',\n  args: {\n    ...defaultArgs,\n  },\n  argTypes: {\n    user: { table: { disable: false } },\n  },\n  play: async ({ canvasElement }): Promise<void> => {\n    const canvas = within(canvasElement);\n    const usernameButtonText = canvas.getByText(\n      dsI18n.t('ds_layout:topbannerbutton.Myself')\n    );\n    const title = canvas.getByText(\n      dsI18n.t('ds_layout:topbannerbutton.MyselfTitle')\n    );\n    await expect(usernameButtonText).toBeInTheDocument();\n    await expect(title).toBeInTheDocument();\n  },\n} satisfies Story;\n\nconst TemplateWithAllRoles: StoryFn<typeof TopBannerUserButton> = (args) => (\n  <div className={'topbannerButtonContainer'}>\n    {userRoleArr.map((role, index) => {\n      const name =\n        role === 'andre'\n          ? 'SØRUMSAND-SCHOENBERG WILLIAM'\n          : 'Navn på virksomhet';\n      return (\n        <TopBannerUserButton\n          key={`user_${index}`}\n          className={'bottomSpacingXL'}\n          {...args}\n          user={{ role, name }}\n        />\n      );\n    })}\n  </div>\n);\n\nexport const WithAllRoles = {\n  render: TemplateWithAllRoles,\n  name: 'With All Roles (Username A2, A3, A6, A7)',\n  args: {\n    ...defaultArgs,\n  },\n  argTypes: {\n    user: {\n      table: { disable: false },\n      control: { disable: true },\n    },\n  },\n  play: async ({ canvasElement }): Promise<void> => {\n    const canvas = within(canvasElement);\n    const titleSelf = canvas.getByText(\n      dsI18n.t('ds_layout:topbannerbutton.MyselfTitle')\n    );\n    const titleWork = canvas.getByText(\n      dsI18n.t('ds_layout:topbannerbutton.CompanyTitle')\n    );\n    const titleOther = canvas.getByText(\n      dsI18n.t('ds_layout:topbannerbutton.OtherTitle')\n    );\n    await expect(titleSelf).toBeInTheDocument();\n    await expect(titleWork).toBeInTheDocument();\n    await expect(titleOther).toBeInTheDocument();\n\n    await expect(\n      canvas.getByText(dsI18n.t('ds_layout:topbannerbutton.Myself'))\n    ).toBeInTheDocument();\n    await expect(\n      canvas.getByText('SØRUMSAND-SCHOENBERG WILLIAM')\n    ).toBeInTheDocument();\n    await expect(canvas.getByText('Navn på virksomhet')).toBeInTheDocument();\n  },\n} satisfies Story;\n\nexport const WithMobileScreen = {\n  render: TemplateWithAllRoles,\n  name: 'With Small Screen (Username A2, A5)',\n  args: {\n    ...defaultArgs,\n  },\n  globals: {\n    viewport: {\n      value: '--mobile',\n    },\n  },\n} satisfies Story;\n\nexport const WithBreakpointXS = {\n  render: TemplateWithAllRoles,\n  name: 'With Breakpoint-xs (Username A2, A5)',\n  args: {\n    ...defaultArgs,\n  },\n  globals: {\n    viewport: {\n      value: '--breakpoint-xs',\n    },\n  },\n} satisfies Story;\n\nexport const WithBreakpointS = {\n  render: TemplateWithAllRoles,\n  name: 'With Breakpoint-s (Username A2, A5)',\n  args: {\n    ...defaultArgs,\n  },\n  globals: {\n    viewport: {\n      value: '--breakpoint-s',\n    },\n  },\n} satisfies Story;\n\nexport const WithBreakpointM = {\n  render: TemplateWithAllRoles,\n  name: 'With Breakpoint-m (Username A2, A5)',\n  args: {\n    ...defaultArgs,\n  },\n  globals: {\n    viewport: {\n      value: '--breakpoint-m',\n    },\n  },\n} satisfies Story;\n"],"names":["userRoleArr","expect","within","verifyAttribute","attribute","expectedValue","canvasElement","button","getByRole","toBeInTheDocument","toHaveAttribute","meta","component","TopBannerUserButton","title","argTypes","ref","table","disable","className","id","lang","user","onClick","tags","parameters","imageSnapshot","disableSnapshot","defaultArgs","role","WithRef","name","args","instance","play","WithAttributes","a11y","test","toHaveClass","Defaults","canvas","usernameButtonText","getByText","dsI18n","t","TemplateWithAllRoles","jsx","map","index","WithAllRoles","render","control","titleSelf","titleWork","titleOther","WithMobileScreen","globals","viewport","value","WithBreakpointXS","WithBreakpointS","WithBreakpointM","docs","source","originalSource"],"mappings":"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"}