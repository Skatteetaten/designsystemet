{"version":3,"file":"TableEditableRow.test.stories-DNSRM3q4.js","sources":["../../../../apps/ds-playground/src/stories/__tests__/TableEditableRow.test.stories.tsx"],"sourcesContent":["import { JSX } from 'react';\n\nimport { Meta, StoryFn, StoryObj } from '@storybook/react';\nimport { expect, fireEvent, within } from '@storybook/test';\n\nimport { Table } from '@skatteetaten/ds-table';\n\nimport { wrapper } from './testUtils/storybook.testing.utils';\n\nconst meta = {\n  component: Table.EditableRow,\n  title: 'Tester/Table/EditableRow',\n  argTypes: {\n    // Baseprops\n    ref: { table: { disable: true } },\n    className: { table: { disable: true } },\n    id: { table: { disable: true } },\n    lang: { table: { disable: true } },\n    'data-testid': { table: { disable: true } },\n    // Props\n    editableContent: { table: { disable: true } },\n    editButtonAriaDescribedby: { table: { disable: true } },\n    editButtonPosition: { table: { disable: true } },\n    editButtonRef: { table: { disable: true } },\n    editableContentRef: { table: { disable: true } },\n    onEdit: { table: { disable: true } },\n    children: { table: { disable: true } },\n  },\n} satisfies Meta<typeof Table.EditableRow>;\nexport default meta;\ntype Story = StoryObj<typeof meta>;\n\nconst Template: StoryFn<typeof Table.EditableRow> = (args) => (\n  <Table caption={'testtabell'}>\n    <Table.Body>\n      <Table.EditableRow {...args}>\n        <Table.DataCell as={'th'}>{'Cake'}</Table.DataCell>\n        <Table.DataCell>{'3,000'}</Table.DataCell>\n      </Table.EditableRow>\n    </Table.Body>\n  </Table>\n);\n\nexport const WithRef = {\n  render: Template,\n  name: 'With Ref (FA1)',\n  args: {\n    ref: (instance: HTMLTableRowElement | null): void => {\n      if (instance) {\n        instance.id = 'dummyIdForwardedFromRef';\n      }\n    },\n  },\n  argTypes: {\n    ref: { table: { disable: false } },\n  },\n  parameters: {\n    imageSnapshot: { disable: true },\n  },\n  play: async ({ canvasElement }): Promise<void> => {\n    const canvas = within(canvasElement);\n    const table = canvas.getByRole('row');\n    await expect(table).toBeInTheDocument();\n    await expect(table).toHaveAttribute('id', 'dummyIdForwardedFromRef');\n  },\n} satisfies Story;\n\nexport const WithAttributes = {\n  render: Template,\n  name: 'With Attributes (FA2-5)',\n  args: {\n    id: 'htmlId',\n    className: 'dummyClassname',\n    lang: 'nb',\n    'data-testid': '123ID',\n  },\n  argTypes: {\n    id: { table: { disable: false } },\n    className: { table: { disable: false } },\n    lang: { table: { disable: false } },\n    'data-testid': { table: { disable: false } },\n  },\n  parameters: {\n    imageSnapshot: {\n      click: `${wrapper} button`,\n    },\n  },\n  play: async ({ canvasElement }): Promise<void> => {\n    const canvas = within(canvasElement);\n    const table = canvas.getByRole('row');\n    await expect(table).toHaveClass('dummyClassname');\n    await expect(table).toHaveAttribute('id', 'htmlId');\n    await expect(table).toHaveAttribute('lang', 'nb');\n    await expect(table).toHaveAttribute('data-testid', '123ID');\n  },\n} satisfies Story;\n\nexport const WithEditButtonRef = {\n  render: Template,\n  name: 'With EditButtonRef',\n  args: {\n    editButtonRef: (instance: HTMLButtonElement | null): void => {\n      if (instance) {\n        instance.id = 'dummyIdForwardedFromRef';\n      }\n    },\n  },\n  argTypes: {\n    ref: { table: { disable: false } },\n  },\n  parameters: {\n    imageSnapshot: { disable: true },\n    HTMLSnapshot: { disable: true },\n  },\n  play: async ({ canvasElement }): Promise<void> => {\n    const canvas = within(canvasElement);\n    const editButton = canvas.getByRole('button');\n    await expect(editButton).toBeInTheDocument();\n    await expect(editButton).toHaveAttribute('id', 'dummyIdForwardedFromRef');\n  },\n} satisfies Story;\n\nexport const WithEditableContentRef = {\n  render: Template,\n  name: 'With EditableContentRef',\n  args: {\n    editableContentRef: (instance: HTMLSpanElement | null): void => {\n      if (instance) {\n        instance.id = 'dummyIdForwardedFromRef';\n      }\n    },\n  },\n  argTypes: {\n    ref: { table: { disable: false } },\n  },\n  parameters: {\n    imageSnapshot: { disable: true },\n    HTMLSnapshot: { disable: true },\n  },\n  play: async ({ canvasElement }): Promise<void> => {\n    const canvas = within(canvasElement);\n    const editButton = canvas.getByRole('button');\n    await fireEvent.click(editButton);\n    const editableContent = canvas.getByText('Rediger data');\n    await expect(editableContent).toBeInTheDocument();\n    await expect(editableContent).toHaveAttribute(\n      'id',\n      'dummyIdForwardedFromRef'\n    );\n  },\n} satisfies Story;\n\nexport const WithEditableContent = {\n  render: Template,\n  name: 'With EditableContent',\n  args: {\n    editableContent: (closeEditing): JSX.Element => (\n      <span\n        onClick={(): void => {\n          closeEditing();\n        }}\n      >\n        {'Rediger data'}\n      </span>\n    ),\n  },\n  parameters: {\n    imageSnapshot: {\n      click: `${wrapper} button`,\n    },\n  },\n} satisfies Story;\n\nexport const WithEditButtonPositionRight = {\n  render: Template,\n  name: 'With EditButtonPosition Right',\n  args: {\n    editButtonPosition: 'right',\n    editableContent: (closeEditing): JSX.Element => (\n      <span\n        onClick={(): void => {\n          closeEditing();\n        }}\n      >\n        {'Rediger data'}\n      </span>\n    ),\n  },\n  argTypes: {\n    editButtonPosition: { table: { disable: false } },\n  },\n  parameters: {\n    imageSnapshot: {\n      click: `${wrapper} button`,\n    },\n  },\n} satisfies Story;\n"],"names":["meta","component","Table","EditableRow","title","argTypes","ref","table","disable","className","id","lang","editableContent","editButtonAriaDescribedby","editButtonPosition","editButtonRef","editableContentRef","onEdit","children","Template","args","jsx","jsxs","WithRef","render","name","instance","parameters","imageSnapshot","play","canvasElement","within","getByRole","expect","toBeInTheDocument","toHaveAttribute","WithAttributes","click","wrapper","toHaveClass","WithEditButtonRef","HTMLSnapshot","editButton","WithEditableContentRef","canvas","fireEvent","getByText","WithEditableContent","closeEditing","WithEditButtonPositionRight","docs","source","originalSource"],"mappings":"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"}