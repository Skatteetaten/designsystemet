{"version":3,"file":"ErrorMessage.test.stories-CpChG-oi.js","sources":["../../../../apps/ds-playground/src/stories/__tests__/ErrorMessage.test.stories.tsx"],"sourcesContent":["import { StoryFn, Meta, StoryObj } from '@storybook/react';\nimport { expect, within } from '@storybook/test';\n\nimport { ErrorMessage } from '@skatteetaten/ds-forms';\n\nconst meta = {\n  component: ErrorMessage,\n  title: 'Tester/ErrorMessage',\n  argTypes: {\n    // Baseprops\n    key: { table: { disable: true } },\n    ref: { table: { disable: true } },\n    className: { table: { disable: true } },\n    id: { table: { disable: true } },\n    lang: { table: { disable: true } },\n    'data-testid': { table: { disable: true } },\n    // Props\n    children: {\n      table: { disable: true },\n    },\n    showError: {\n      table: { disable: true },\n    },\n  },\n} satisfies Meta<typeof ErrorMessage>;\nexport default meta;\ntype Story = StoryObj<typeof meta>;\n\nconst defaultText = 'Feilmelding';\n\nconst defaultArgs = {\n  showError: false,\n  children: defaultText,\n};\n\nexport const WithRef = {\n  name: 'With Ref (FA1)',\n  args: {\n    ...defaultArgs,\n    ref: (instance: HTMLDivElement | null): void => {\n      if (instance) {\n        instance.id = 'dummyIdForwardedFromRef';\n      }\n    },\n  },\n  argTypes: {\n    ref: { table: { disable: false } },\n  },\n  parameters: {\n    imageSnapshot: { disable: true },\n  },\n  play: async ({ canvasElement }): Promise<void> => {\n    const canvas = within(canvasElement);\n    const container = canvas.getAllByRole('generic')[1];\n    await expect(container).toHaveAttribute('id', 'dummyIdForwardedFromRef');\n  },\n} satisfies Story;\n\nexport const WithAttributes = {\n  name: 'With Attributes (FA2-5, B1)',\n  args: {\n    ...defaultArgs,\n    id: 'htmlId',\n    className: 'dummyClassname',\n    lang: 'nb',\n    'data-testid': '123ID',\n    showError: true,\n  },\n  argTypes: {\n    id: { table: { disable: false } },\n    className: { table: { disable: false } },\n    lang: { table: { disable: false } },\n    'data-testid': { table: { disable: false } },\n  },\n  play: async ({\n    canvasElement,\n  }: {\n    canvasElement: HTMLElement;\n  }): Promise<void> => {\n    const canvas = within(canvasElement);\n    const container = canvas.getAllByRole('generic')[1];\n    const errorMessage = canvas.getAllByRole('generic')[2];\n    await expect(container).toHaveAttribute('id', 'htmlId');\n    await expect(errorMessage).toHaveClass('dummyClassname');\n    await expect(container).toHaveAttribute('lang', 'nb');\n    await expect(container).toHaveAttribute('data-testid', '123ID');\n  },\n} satisfies Story;\n\nexport const Defaults = {\n  name: 'Default (A1, A2)',\n  args: {\n    ...defaultArgs,\n  },\n  play: async ({ canvasElement }): Promise<void> => {\n    const canvas = within(canvasElement);\n    const container = canvas.getAllByRole('generic')[1];\n    await expect(container).toBeInTheDocument();\n    await expect(container).toHaveAttribute('aria-live', 'assertive');\n    await expect(container).toHaveAttribute('aria-atomic');\n\n    const textNode = container.querySelector('p');\n    await expect(textNode).not.toBeInTheDocument();\n  },\n} satisfies Story;\n\nexport const WithPElement = {\n  name: 'With <p>-element (B1)',\n  args: {\n    ...defaultArgs,\n    showError: true,\n  },\n  argTypes: {\n    showError: {\n      table: { disable: false },\n    },\n  },\n  play: async ({ canvasElement }): Promise<void> => {\n    const canvas = within(canvasElement);\n    const textNode = canvas.getByText(defaultText);\n    await expect(textNode.tagName).toBe('P');\n  },\n} satisfies Story;\n\nconst TemplateWithInput: StoryFn<typeof ErrorMessage> = (args) => (\n  <div className={'errorMessageContainer'}>\n    <ErrorMessage {...args} />\n  </div>\n);\n\nexport const WithLongText = {\n  render: TemplateWithInput,\n  name: 'With Long Text (A3)',\n  args: {\n    ...defaultArgs,\n    showError: true,\n    children:\n      'Dette blir en veldig lang feilmelding for å teste om du oppfører seg om den skal.',\n  },\n  argTypes: {\n    children: {\n      table: { disable: false },\n    },\n  },\n} satisfies Story;\n\nexport const WithLongTextAndBreaking = {\n  render: TemplateWithInput,\n  name: 'With Long Text And Breaking',\n  args: {\n    ...defaultArgs,\n    showError: true,\n    children:\n      'Detteblirenveldiglangfeilmeldingforåtesteomduoppførersegomdenskal.',\n  },\n  argTypes: {\n    children: {\n      table: { disable: false },\n    },\n  },\n} satisfies Story;\n"],"names":["meta","component","ErrorMessage","title","argTypes","key","table","disable","ref","className","id","lang","children","showError","defaultText","defaultArgs","WithRef","name","args","instance","parameters","imageSnapshot","play","canvasElement","container","within","getAllByRole","expect","toHaveAttribute","WithAttributes","canvas","errorMessage","toHaveClass","Defaults","toBeInTheDocument","textNode","querySelector","not","WithPElement","getByText","tagName","toBe","TemplateWithInput","jsx","WithLongText","render","WithLongTextAndBreaking","docs","source","originalSource"],"mappings":"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"}