{"version":3,"file":"TableRow.test.stories-C2ijKKMy.js","sources":["../../../../apps/ds-playground/src/stories/__tests__/TableRow.test.stories.tsx"],"sourcesContent":["import { Meta, StoryFn, StoryObj } from '@storybook/react';\nimport { expect, fireEvent, fn, within } from '@storybook/test';\n\nimport { dsI18n } from '@skatteetaten/ds-core-utils';\nimport { Table } from '@skatteetaten/ds-table';\n\nconst meta = {\n  component: Table.Row,\n  title: 'Tester/Table/Row',\n  argTypes: {\n    // Baseprops\n    ref: { table: { disable: true } },\n    className: { table: { disable: true } },\n    id: { table: { disable: true } },\n    lang: { table: { disable: true } },\n    'data-testid': { table: { disable: true } },\n    // Props\n    expandableContent: { table: { disable: true } },\n    expandButtonAriaDescribedby: { table: { disable: true } },\n    expandButtonPosition: { table: { disable: true } },\n    expandButtonTitle: { table: { disable: true } },\n    isExpandable: { table: { disable: true } },\n    isExpanded: { table: { disable: true } },\n    children: { table: { disable: true } },\n    onClose: { table: { disable: true } },\n    onExpand: { table: { disable: true } },\n  },\n} satisfies Meta<typeof Table.Row>;\nexport default meta;\ntype Story = StoryObj<typeof meta>;\n\nconst Template: StoryFn<typeof Table.Row> = (args) => (\n  <Table caption={'testtabell'}>\n    <Table.Body>\n      <Table.Row {...args}>\n        <Table.DataCell id={'Id123'} as={'th'}>\n          {'Cake'}\n        </Table.DataCell>\n        <Table.DataCell>{'3,000'}</Table.DataCell>\n      </Table.Row>\n    </Table.Body>\n  </Table>\n);\n\nexport const WithRef = {\n  render: Template,\n  name: 'With Ref (FA1)',\n  args: {\n    ref: (instance: HTMLTableRowElement | null): void => {\n      if (instance) {\n        instance.id = 'dummyIdForwardedFromRef';\n      }\n    },\n  },\n  argTypes: {\n    ref: { table: { disable: false } },\n  },\n  parameters: {\n    imageSnapshot: { disable: true },\n  },\n  play: async ({ canvasElement }): Promise<void> => {\n    const canvas = within(canvasElement);\n    const table = canvas.getByRole('row');\n    await expect(table).toBeInTheDocument();\n    await expect(table).toHaveAttribute('id', 'dummyIdForwardedFromRef');\n  },\n} satisfies Story;\n\nexport const WithAttributes = {\n  render: Template,\n  name: 'With Attributes (FA2-5)',\n  args: {\n    id: 'htmlId',\n    className: 'dummyClassname',\n    lang: 'nb',\n    'data-testid': '123ID',\n  },\n  argTypes: {\n    id: { table: { disable: false } },\n    className: { table: { disable: false } },\n    lang: { table: { disable: false } },\n    'data-testid': { table: { disable: false } },\n  },\n  parameters: {\n    imageSnapshot: { disable: true },\n  },\n  play: async ({ canvasElement }): Promise<void> => {\n    const canvas = within(canvasElement);\n    const row = canvas.getByRole('row');\n    await expect(row).toHaveClass('dummyClassname');\n    await expect(row).toHaveAttribute('id', 'htmlId');\n    await expect(row).toHaveAttribute('lang', 'nb');\n    await expect(row).toHaveAttribute('data-testid', '123ID');\n  },\n} satisfies Story;\n\nexport const WithExpandable = {\n  render: Template,\n  name: 'With Expandable (TableRow B6)',\n  args: {\n    isExpandable: true,\n    expandButtonAriaDescribedby: 'Id123',\n    onExpand: fn(),\n  },\n  argTypes: {\n    isExpandable: { table: { disable: false } },\n    expandButtonAriaDescribedby: { table: { disable: false } },\n  },\n  parameters: {\n    imageSnapshot: { disable: true },\n    HTMLSnapshot: { disable: true },\n  },\n  play: async ({ canvasElement, args }): Promise<void> => {\n    const canvas = within(canvasElement);\n    const iconButton = canvas.getByRole('button');\n    await expect(iconButton).toHaveAttribute('aria-describedby', 'Id123');\n    await expect(iconButton).toHaveAccessibleName(\n      dsI18n.t('ds_tables:tablerow.Expandable')\n    );\n    await expect(iconButton).toHaveAttribute('aria-expanded', 'false');\n    /* Etter bytte fra @storybook/jest til @storybook/test må denne testen bruke\n    fireevent i stedet for UserEvent. Med userEVent gir testen ustabilt resultat.\n    I tillegg ser det ut som visningen i interactions fanen i storybook ikke samsvarer med resultatet til testen.\n     */\n    await fireEvent.click(iconButton);\n    await expect(\n      canvas.queryByText(dsI18n.t('ds_tables:table.ExpandAreaStart'))\n    ).not.toBeInTheDocument();\n    await expect(args.onExpand).toHaveBeenCalled();\n    await expect(iconButton).toHaveAttribute('aria-expanded', 'true');\n  },\n} satisfies Story;\n\nexport const WithExpandableExtraRows = {\n  render: Template,\n  name: 'With Expandable Multiple Rows',\n  args: {\n    isExpandable: true,\n    expandButtonAriaDescribedby: 'Id123',\n    expandButtonPosition: 'right',\n    onExpand: fn(),\n    expandableContent: (\n      <Table.Row>\n        <Table.DataCell>{'Muffin'}</Table.DataCell>\n        <Table.DataCell>{'9000'}</Table.DataCell>\n        <Table.DataCell />\n      </Table.Row>\n    ),\n  },\n  argTypes: {\n    isExpandable: { table: { disable: false } },\n    expandButtonAriaDescribedby: { table: { disable: false } },\n  },\n  parameters: {\n    imageSnapshot: { disable: true },\n    HTMLSnapshot: { disable: true },\n  },\n  play: async ({ canvasElement, args }): Promise<void> => {\n    const canvas = within(canvasElement);\n    const iconButton = canvas.getByRole('button');\n    await expect(iconButton).toHaveAttribute('aria-describedby', 'Id123');\n    await expect(iconButton).toHaveAccessibleName(\n      dsI18n.t('ds_tables:tablerow.Expandable')\n    );\n    await expect(iconButton).toHaveAttribute('aria-expanded', 'false');\n    /* Etter bytte fra @storybook/jest til @storybook/test må denne testen bruke\n    fireevent i stedet for UserEvent. Med userEVent gir testen ustabilt resultat.\n    I tillegg ser det ut som visningen i interactions fanen i storybook ikke samsvarer med resultatet til testen.\n     */\n    await fireEvent.click(iconButton);\n    await expect(\n      canvas.getByText(dsI18n.t('ds_tables:table.ExpandAreaStart'))\n    ).toBeInTheDocument();\n    await expect(\n      canvas.getByText(dsI18n.t('ds_tables:table.ExpandAreaEnd'))\n    ).toBeInTheDocument();\n    await expect(args.onExpand).toHaveBeenCalled();\n    await expect(iconButton).toHaveAttribute('aria-expanded', 'true');\n  },\n} satisfies Story;\n"],"names":["meta","component","Table","Row","title","argTypes","ref","table","disable","className","id","lang","expandableContent","expandButtonAriaDescribedby","expandButtonPosition","expandButtonTitle","isExpandable","isExpanded","children","onClose","onExpand","Template","args","jsx","jsxs","WithRef","render","name","instance","parameters","imageSnapshot","play","canvasElement","within","getByRole","expect","toBeInTheDocument","toHaveAttribute","WithAttributes","row","toHaveClass","WithExpandable","fn","HTMLSnapshot","canvas","iconButton","toHaveAccessibleName","dsI18n","t","fireEvent","click","queryByText","not","toHaveBeenCalled","WithExpandableExtraRows","getByText","docs","source","originalSource"],"mappings":"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"}