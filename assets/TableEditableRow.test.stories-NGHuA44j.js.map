{"version":3,"file":"TableEditableRow.test.stories-NGHuA44j.js","sources":["../../../../apps/ds-playground/src/stories/__tests__/TableEditableRow.test.stories.tsx"],"sourcesContent":["import { JSX } from 'react';\n\nimport { Meta, StoryFn, StoryObj } from '@storybook/react-vite';\nimport { expect, fireEvent, within } from 'storybook/test';\n\nimport { dsI18n } from '@skatteetaten/ds-core-utils';\nimport { Table } from '@skatteetaten/ds-table';\n\nconst meta = {\n  component: Table.EditableRow,\n  title: 'Tester/Table/EditableRow',\n  argTypes: {\n    // Baseprops\n    ref: { table: { disable: true } },\n    className: { table: { disable: true } },\n    id: { table: { disable: true } },\n    lang: { table: { disable: true } },\n    'data-testid': { table: { disable: true } },\n    // Props\n    editableContent: { table: { disable: true } },\n    editButtonAriaDescribedby: { table: { disable: true } },\n    editButtonPosition: { table: { disable: true } },\n    editButtonRef: { table: { disable: true } },\n    editableContentRef: { table: { disable: true } },\n    onEdit: { table: { disable: true } },\n    children: { table: { disable: true } },\n    isNew: { table: { disable: true } },\n  },\n  tags: ['test'],\n  parameters: {\n    imageSnapshot: { disableSnapshot: false },\n  },\n} satisfies Meta<typeof Table.EditableRow>;\nexport default meta;\ntype Story = StoryObj<typeof meta>;\n\nconst Template: StoryFn<typeof Table.EditableRow> = (args) => (\n  <Table caption={'testtabell'}>\n    <Table.Body>\n      <Table.EditableRow {...args}>\n        <Table.DataCell as={'th'}>{'Cake'}</Table.DataCell>\n        <Table.DataCell>{'3,000'}</Table.DataCell>\n      </Table.EditableRow>\n    </Table.Body>\n  </Table>\n);\n\nexport const WithRef = {\n  render: Template,\n  name: 'With Ref (FA1)',\n  args: {\n    ref: (instance: HTMLTableRowElement | null): void => {\n      if (instance) {\n        instance.id = 'dummyIdForwardedFromRef';\n      }\n    },\n  },\n  argTypes: {\n    ref: { table: { disable: false } },\n  },\n  parameters: {\n    imageSnapshot: { disableSnapshot: true },\n  },\n  play: async ({ canvasElement }): Promise<void> => {\n    const canvas = within(canvasElement);\n    const table = canvas.getByRole('row');\n    await expect(table).toBeInTheDocument();\n    await expect(table).toHaveAttribute('id', 'dummyIdForwardedFromRef');\n  },\n} satisfies Story;\n\nexport const WithAttributes = {\n  render: Template,\n  name: 'With Attributes (FA2-5)',\n  args: {\n    id: 'htmlId',\n    className: 'dummyClassname',\n    lang: 'nb',\n    'data-testid': '123ID',\n  },\n  argTypes: {\n    id: { table: { disable: false } },\n    className: { table: { disable: false } },\n    lang: { table: { disable: false } },\n    'data-testid': { table: { disable: false } },\n  },\n  parameters: {\n    a11y: {\n      test: 'off',\n    },\n  },\n  play: async ({ canvasElement }): Promise<void> => {\n    const canvas = within(canvasElement);\n    const table = canvas.getByRole('row');\n    await expect(table).toHaveClass('dummyClassname');\n    await expect(table).toHaveAttribute('id', 'htmlId');\n    await expect(table).toHaveAttribute('lang', 'nb');\n    await expect(table).toHaveAttribute('data-testid', '123ID');\n  },\n} satisfies Story;\n\nexport const WithEditButtonRef = {\n  render: Template,\n  name: 'With EditButtonRef',\n  args: {\n    editButtonRef: (instance: HTMLButtonElement | null): void => {\n      if (instance) {\n        instance.id = 'dummyIdForwardedFromRef';\n      }\n    },\n  },\n  argTypes: {\n    ref: { table: { disable: false } },\n  },\n  parameters: {\n    imageSnapshot: { disableSnapshot: true },\n  },\n  play: async ({ canvasElement }): Promise<void> => {\n    const canvas = within(canvasElement);\n    const editButton = canvas.getByRole('button');\n    await expect(editButton).toBeInTheDocument();\n    await expect(editButton).toHaveAttribute('id', 'dummyIdForwardedFromRef');\n  },\n} satisfies Story;\n\nexport const WithEditableContentRef = {\n  render: Template,\n  name: 'With EditableContentRef',\n  args: {\n    editableContentRef: (instance: HTMLSpanElement | null): void => {\n      if (instance) {\n        instance.id = 'dummyIdForwardedFromRef';\n      }\n    },\n  },\n  argTypes: {\n    ref: { table: { disable: false } },\n  },\n  parameters: {\n    imageSnapshot: { disableSnapshot: true },\n  },\n  play: async ({ canvasElement }): Promise<void> => {\n    const canvas = within(canvasElement);\n    const editButton = canvas.getByRole('button');\n    await fireEvent.click(editButton);\n    const editableContent = canvas.getByText('Rediger data');\n    await expect(editableContent).toBeInTheDocument();\n    await expect(editableContent).toHaveAttribute(\n      'id',\n      'dummyIdForwardedFromRef'\n    );\n  },\n} satisfies Story;\n\nexport const WithEditableContent = {\n  render: Template,\n  name: 'With EditableContent',\n  args: {\n    editableContent: (closeEditing): JSX.Element => (\n      <span\n        onClick={(): void => {\n          closeEditing();\n        }}\n      >\n        {'Rediger data'}\n      </span>\n    ),\n  },\n  play: async ({ canvasElement }): Promise<void> => {\n    const canvas = within(canvasElement);\n    const inlineButton = canvas.getByRole('button', {\n      name: dsI18n.t('ds_tables:tablerow.Editable'),\n    });\n    await fireEvent.click(inlineButton);\n  },\n} satisfies Story;\n\nexport const WithEditButtonPositionRight = {\n  render: Template,\n  name: 'With EditButtonPosition Right',\n  args: {\n    editButtonPosition: 'right',\n    editableContent: (closeEditing): JSX.Element => (\n      <span\n        onClick={(): void => {\n          closeEditing();\n        }}\n      >\n        {'Rediger data'}\n      </span>\n    ),\n  },\n  argTypes: {\n    editButtonPosition: { table: { disable: false } },\n  },\n  play: async ({ canvasElement }): Promise<void> => {\n    const canvas = within(canvasElement);\n    const inlineButton = canvas.getByRole('button', {\n      name: dsI18n.t('ds_tables:tablerow.Editable'),\n    });\n    await fireEvent.click(inlineButton);\n  },\n} satisfies Story;\n"],"names":["expect","within","meta","component","Table","EditableRow","title","argTypes","ref","table","disable","className","id","lang","editableContent","editButtonAriaDescribedby","editButtonPosition","editButtonRef","editableContentRef","onEdit","children","isNew","tags","parameters","imageSnapshot","disableSnapshot","Template","args","jsx","jsxs","WithRef","render","name","instance","play","canvasElement","getByRole","toBeInTheDocument","toHaveAttribute","WithAttributes","a11y","test","toHaveClass","WithEditButtonRef","editButton","WithEditableContentRef","canvas","fireEvent","click","getByText","WithEditableContent","closeEditing","inlineButton","dsI18n","t","WithEditButtonPositionRight","docs","source","originalSource"],"mappings":"wFAGA,KAAA,CAAA,OAAAA,EAASA,UAAAA,UAAmBC,EAAAA,0BAKtBC,EAAO,CACXC,UAAWC,EAAMC,YACjBC,MAAO,2BACPC,SAAU,CAERC,IAAK,CAAEC,MAAO,CAAEC,QAAS,EAAA,CAAK,EAC9BC,UAAW,CAAEF,MAAO,CAAEC,QAAS,EAAA,CAAK,EACpCE,GAAI,CAAEH,MAAO,CAAEC,QAAS,EAAA,CAAK,EAC7BG,KAAM,CAAEJ,MAAO,CAAEC,QAAS,EAAA,CAAK,EAC/B,cAAe,CAAED,MAAO,CAAEC,QAAS,EAAA,CAAK,EAExCI,gBAAiB,CAAEL,MAAO,CAAEC,QAAS,EAAA,CAAK,EAC1CK,0BAA2B,CAAEN,MAAO,CAAEC,QAAS,EAAA,CAAK,EACpDM,mBAAoB,CAAEP,MAAO,CAAEC,QAAS,EAAA,CAAK,EAC7CO,cAAe,CAAER,MAAO,CAAEC,QAAS,EAAA,CAAK,EACxCQ,mBAAoB,CAAET,MAAO,CAAEC,QAAS,EAAA,CAAK,EAC7CS,OAAQ,CAAEV,MAAO,CAAEC,QAAS,EAAA,CAAK,EACjCU,SAAU,CAAEX,MAAO,CAAEC,QAAS,EAAA,CAAK,EACnCW,MAAO,CAAEZ,MAAO,CAAEC,QAAS,EAAA,CAAK,CAAE,EAEpCY,KAAM,CAAC,MAAM,EACbC,WAAY,CACVC,cAAe,CAAEC,gBAAiB,EAAA,CAAM,CAE5C,EAIMC,EAA+CC,GACnDC,MAACxB,EAAA,CAAM,QAAS,aACd,SAAAwB,EAAAA,IAACxB,EAAM,KAAN,CACC,SAAAyB,OAACzB,EAAM,YAAN,CAAkB,GAAIuB,EACrB,SAAA,CAAAC,EAAAA,IAACxB,EAAM,SAAN,CAAe,GAAI,KAAO,SAAA,OAAO,EAClCwB,EAAAA,IAACxB,EAAM,SAAN,CAAgB,SAAA,OAAA,CAAQ,CAAA,CAAA,CAC3B,EACF,EACF,EAGW0B,EAAU,CACrBC,OAAQL,EACRM,KAAM,iBACNL,KAAM,CACJnB,IAAMyB,GAA+C,CAC/CA,IACFA,EAASrB,GAAK,0BAElB,CAAA,EAEFL,SAAU,CACRC,IAAK,CAAEC,MAAO,CAAEC,QAAS,EAAA,CAAM,CAAE,EAEnCa,WAAY,CACVC,cAAe,CAAEC,gBAAiB,EAAA,CAAK,EAEzCS,KAAM,MAAO,CAAEC,cAAAA,CAAAA,IAAmC,CAEhD,MAAM1B,EADSR,EAAOkC,CAAa,EACdC,UAAU,KAAK,EACpC,MAAMpC,EAAOS,CAAK,EAAE4B,kBAAAA,EACpB,MAAMrC,EAAOS,CAAK,EAAE6B,gBAAgB,KAAM,yBAAyB,CACrE,CACF,EAEaC,EAAiB,CAC5BR,OAAQL,EACRM,KAAM,0BACNL,KAAM,CACJf,GAAI,SACJD,UAAW,iBACXE,KAAM,KACN,cAAe,OAAA,EAEjBN,SAAU,CACRK,GAAI,CAAEH,MAAO,CAAEC,QAAS,EAAA,CAAM,EAC9BC,UAAW,CAAEF,MAAO,CAAEC,QAAS,EAAA,CAAM,EACrCG,KAAM,CAAEJ,MAAO,CAAEC,QAAS,EAAA,CAAM,EAChC,cAAe,CAAED,MAAO,CAAEC,QAAS,EAAA,CAAM,CAAE,EAE7Ca,WAAY,CACViB,KAAM,CACJC,KAAM,KAAA,CACR,EAEFP,KAAM,MAAO,CAAEC,cAAAA,CAAAA,IAAmC,CAEhD,MAAM1B,EADSR,EAAOkC,CAAa,EACdC,UAAU,KAAK,EACpC,MAAMpC,EAAOS,CAAK,EAAEiC,YAAY,gBAAgB,EAChD,MAAM1C,EAAOS,CAAK,EAAE6B,gBAAgB,KAAM,QAAQ,EAClD,MAAMtC,EAAOS,CAAK,EAAE6B,gBAAgB,OAAQ,IAAI,EAChD,MAAMtC,EAAOS,CAAK,EAAE6B,gBAAgB,cAAe,OAAO,CAC5D,CACF,EAEaK,EAAoB,CAC/BZ,OAAQL,EACRM,KAAM,qBACNL,KAAM,CACJV,cAAgBgB,GAA6C,CACvDA,IACFA,EAASrB,GAAK,0BAElB,CAAA,EAEFL,SAAU,CACRC,IAAK,CAAEC,MAAO,CAAEC,QAAS,EAAA,CAAM,CAAE,EAEnCa,WAAY,CACVC,cAAe,CAAEC,gBAAiB,EAAA,CAAK,EAEzCS,KAAM,MAAO,CAAEC,cAAAA,CAAAA,IAAmC,CAEhD,MAAMS,EADS3C,EAAOkC,CAAa,EACTC,UAAU,QAAQ,EAC5C,MAAMpC,EAAO4C,CAAU,EAAEP,kBAAAA,EACzB,MAAMrC,EAAO4C,CAAU,EAAEN,gBAAgB,KAAM,yBAAyB,CAC1E,CACF,EAEaO,EAAyB,CACpCd,OAAQL,EACRM,KAAM,0BACNL,KAAM,CACJT,mBAAqBe,GAA2C,CAC1DA,IACFA,EAASrB,GAAK,0BAElB,CAAA,EAEFL,SAAU,CACRC,IAAK,CAAEC,MAAO,CAAEC,QAAS,EAAA,CAAM,CAAE,EAEnCa,WAAY,CACVC,cAAe,CAAEC,gBAAiB,EAAA,CAAK,EAEzCS,KAAM,MAAO,CAAEC,cAAAA,CAAAA,IAAmC,CAChD,MAAMW,EAAS7C,EAAOkC,CAAa,EAC7BS,EAAaE,EAAOV,UAAU,QAAQ,EAC5C,MAAMW,EAAUC,MAAMJ,CAAU,EAChC,MAAM9B,EAAkBgC,EAAOG,UAAU,cAAc,EACvD,MAAMjD,EAAOc,CAAe,EAAEuB,kBAAAA,EAC9B,MAAMrC,EAAOc,CAAe,EAAEwB,gBAC5B,KACA,yBACF,CACF,CACF,EAEaY,EAAsB,CACjCnB,OAAQL,EACRM,KAAM,uBACNL,KAAM,CACJb,gBAAkBqC,GAChBvB,EAAAA,IAAC,OAAA,CACC,QAAS,IAAY,CACnBuB,EAAAA,CACF,EAEC,SAAA,cAAA,CACH,CAAA,EAGJjB,KAAM,MAAO,CAAEC,cAAAA,CAAAA,IAAmC,CAEhD,MAAMiB,EADSnD,EAAOkC,CAAa,EACPC,UAAU,SAAU,CAC9CJ,KAAMqB,EAAOC,EAAE,6BAA6B,CAAA,CAC7C,EACD,MAAMP,EAAUC,MAAMI,CAAY,CACpC,CACF,EAEaG,EAA8B,CACzCxB,OAAQL,EACRM,KAAM,gCACNL,KAAM,CACJX,mBAAoB,QACpBF,gBAAkBqC,GAChBvB,EAAAA,IAAC,OAAA,CACC,QAAS,IAAY,CACnBuB,EAAAA,CACF,EAEC,SAAA,cAAA,CACH,CAAA,EAGJ5C,SAAU,CACRS,mBAAoB,CAAEP,MAAO,CAAEC,QAAS,EAAA,CAAM,CAAE,EAElDwB,KAAM,MAAO,CAAEC,cAAAA,CAAAA,IAAmC,CAEhD,MAAMiB,EADSnD,EAAOkC,CAAa,EACPC,UAAU,SAAU,CAC9CJ,KAAMqB,EAAOC,EAAE,6BAA6B,CAAA,CAC7C,EACD,MAAMP,EAAUC,MAAMI,CAAY,CACpC,CACF,EAAiBtB,EAAAP,WAAA,CAAA,GAAAO,EAAAP,WAAAiC,KAAA,CAAA,GAAA1B,EAAAP,YAAAiC,KAAAC,OAAA,CAAAC,eAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,mBAAA,GAAA5B,EAAAP,YAAAiC,MAAAC,MAAAA,CAAA,CAAA,EAAAlB,EAAAhB,WAAA,CAAA,GAAAgB,EAAAhB,WAAAiC,KAAA,CAAA,GAAAjB,EAAAhB,YAAAiC,KAAAC,OAAA,CAAAC,eAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,mBAAA,GAAAnB,EAAAhB,YAAAiC,MAAAC,MAAAA,CAAA,CAAA,EAAAd,EAAApB,WAAA,CAAA,GAAAoB,EAAApB,WAAAiC,KAAA,CAAA,GAAAb,EAAApB,YAAAiC,KAAAC,OAAA,CAAAC,eAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,mBAAA,GAAAf,EAAApB,YAAAiC,MAAAC,MAAAA,CAAA,CAAA,EAAAZ,EAAAtB,WAAA,CAAA,GAAAsB,EAAAtB,WAAAiC,KAAA,CAAA,GAAAX,EAAAtB,YAAAiC,KAAAC,OAAA,CAAAC,eAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,mBAAA,GAAAb,EAAAtB,YAAAiC,MAAAC,MAAAA,CAAA,CAAA,EAAAP,EAAA3B,WAAA,CAAA,GAAA2B,EAAA3B,WAAAiC,KAAA,CAAA,GAAAN,EAAA3B,YAAAiC,KAAAC,OAAA,CAAAC,eAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,mBAAA,GAAAR,EAAA3B,YAAAiC,MAAAC,MAAAA,CAAA,CAAA,EAAAF,EAAAhC,WAAA,CAAA,GAAAgC,EAAAhC,WAAAiC,KAAA,CAAA,GAAAD,EAAAhC,YAAAiC,KAAAC,OAAA,CAAAC,eAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,mBAAA,GAAAH,EAAAhC,YAAAiC,MAAAC,MAAAA,CAAA,CAAA"}