{"version":3,"file":"DatePicker.stories-LemYgxKw.js","sources":["../../../../apps/ds-playground/src/stories/components/DatePicker.stories.tsx"],"sourcesContent":["import { useState, JSX } from 'react';\n\nimport { useArgs } from '@storybook/preview-api';\nimport { Meta, StoryObj } from '@storybook/react';\nimport { isWithinInterval, format } from 'date-fns';\n\nimport {\n  dsI18n,\n  formArrSize,\n  getAutoCompletePropDescription,\n  getCommonAutoCompleteDefault,\n  getCommonFormVariantDefault,\n} from '@skatteetaten/ds-core-utils';\nimport {\n  DatePicker,\n  getDatePickerDateFormat,\n  TextArea,\n} from '@skatteetaten/ds-forms';\n\nimport { category, htmlEventDescription } from '../../../.storybook/helpers';\nimport { SystemSVGPaths } from '../utils/icon.systems';\nimport { exampleParameters } from '../utils/stories.utils';\n\nconst meta = {\n  component: DatePicker,\n  title: 'Komponenter/DatePicker',\n  argTypes: {\n    // Props\n    classNames: { control: false, table: { category: category.props } },\n    value: { table: { category: category.props }, control: 'date' },\n    description: { table: { category: category.props } },\n    dateFormat: {\n      table: {\n        category: category.props,\n        defaultValue: { summary: getDatePickerDateFormat() },\n      },\n    },\n    label: { table: { category: category.props } },\n    disabledDates: { table: { category: category.props } },\n    errorMessage: { table: { category: category.props } },\n    helpSvgPath: {\n      options: Object.keys(SystemSVGPaths),\n      mapping: SystemSVGPaths,\n      table: {\n        category: category.props,\n        defaultValue: { summary: 'HelpSimpleSVGpath' },\n      },\n    },\n    helpText: { control: 'text', table: { category: category.props } },\n    hideLabel: { table: { category: category.props } },\n    initialPickerDate: { table: { category: category.props }, control: 'date' },\n    minDate: { table: { category: category.props }, control: 'date' },\n    maxDate: { table: { category: category.props }, control: 'date' },\n    showRequiredMark: { table: { category: category.props } },\n    titleHelpSvg: {\n      table: {\n        category: category.props,\n        defaultValue: { summary: dsI18n.t('Shared:shared.Help') },\n      },\n    },\n    variant: {\n      options: [...formArrSize],\n      control: 'inline-radio',\n      table: {\n        category: category.props,\n        defaultValue: { summary: getCommonFormVariantDefault() },\n      },\n    },\n    // HTML\n    autoComplete: {\n      table: {\n        category: category.htmlAttribute,\n        defaultValue: { summary: getCommonAutoCompleteDefault() },\n        type: { summary: 'string' },\n      },\n      type: 'string',\n      description: getAutoCompletePropDescription(),\n    },\n    disabled: { table: { category: category.htmlAttribute } },\n    name: { table: { category: category.htmlAttribute } },\n    placeholder: {\n      table: {\n        category: category.htmlAttribute,\n        defaultValue: { summary: dsI18n.t('ds_forms:datepicker.TypeOrSelect') },\n      },\n    },\n    readOnly: { table: { category: category.htmlAttribute } },\n    required: {\n      control: 'boolean',\n      table: { category: category.htmlAttribute },\n    },\n    // Events\n    onBlur: { ...htmlEventDescription },\n    onChange: { ...htmlEventDescription },\n    onFocus: { ...htmlEventDescription },\n    onHelpToggle: { table: { category: category.event } },\n    onSelectDate: { table: { category: category.event } },\n  },\n  args: {\n    label: 'Fødselsdato',\n  },\n} satisfies Meta<typeof DatePicker>;\n\nexport default meta;\ntype Story = StoryObj<typeof meta>;\n\nexport const Preview: Story = {\n  render: (args): JSX.Element => {\n    const [, setArgs] = useArgs();\n    /* Fordi date control konverterer datoen til et UNIX-tidsstempel når verdien endres,\n     må den konverteres til et date objekt. Dette er en kjent begrensing som vil bli fikset\n    en gang i fremtiden står det i Storybook sin dokumentasjon over Controls. */\n\n    // value settes til null dersom undefined for å unngå advarsel om controlled/uncontrolled.\n    args.value = !args.value ? null : new Date(args.value);\n    args.minDate =\n      args.minDate === undefined ? undefined : new Date(args.minDate);\n    args.maxDate =\n      args.maxDate === undefined ? undefined : new Date(args.maxDate);\n    args.initialPickerDate =\n      args.initialPickerDate === undefined\n        ? undefined\n        : new Date(args.initialPickerDate);\n\n    const handleSelectDate = (date: Date | null): void => {\n      args.onSelectDate?.(date);\n      setArgs({ value: date });\n    };\n\n    return <DatePicker {...args} onSelectDate={handleSelectDate} />;\n  },\n} satisfies Story;\n\nexport const Examples: Story = {\n  render: (_args): JSX.Element => {\n    const [value, setValue] = useState<Date | null>(null);\n    const [inputValue, setInputValue] = useState('');\n    const [errorMessage, setErrorMessage] = useState('');\n\n    const minDate = new Date(2024, 6, 1);\n    const maxDate = new Date(2024, 12, 1);\n\n    // Ved å lytte på onSelectDate får man tilgang til dato (eller null dersom datoen i feltet ikke er gyldig).\n    const handleSelect = (date: Date | null): void => {\n      if (date === null) {\n        const errorMessage =\n          inputValue !== ''\n            ? 'Datoen har ikke rett format. Skriv slik: 17.05.2024.'\n            : 'Dato må fylles ut eller velges.';\n        setErrorMessage(errorMessage);\n      } else if (!isWithinInterval(date, { start: minDate, end: maxDate })) {\n        // isWithinInterval og format kommer fra date-fns\n        setErrorMessage(\n          `Dato må være mellom ${format(minDate, 'dd.MM.yyyy')} og ${format(\n            maxDate,\n            'dd.MM.yyyy.'\n          )}.`\n        );\n      } else {\n        setErrorMessage('');\n      }\n\n      setValue(date);\n    };\n    return (\n      <>\n        <DatePicker\n          label={'Fødselsdato'}\n          value={value}\n          errorMessage={errorMessage}\n          maxDate={maxDate}\n          minDate={minDate}\n          required\n          onSelectDate={handleSelect}\n          onChange={(e) => setInputValue(e.target.value)}\n        />\n        <TextArea className={'textField300'} label={'Andre opplysninger'} />\n      </>\n    );\n  },\n} satisfies Story;\nExamples.parameters = exampleParameters;\n"],"names":["useArgs","meta","component","DatePicker","title","argTypes","classNames","control","table","category","props","value","description","dateFormat","defaultValue","summary","getDatePickerDateFormat","label","disabledDates","errorMessage","helpSvgPath","options","Object","keys","SystemSVGPaths","mapping","helpText","hideLabel","initialPickerDate","minDate","maxDate","showRequiredMark","titleHelpSvg","dsI18n","t","variant","formArrSize","getCommonFormVariantDefault","autoComplete","htmlAttribute","getCommonAutoCompleteDefault","type","getAutoCompletePropDescription","disabled","name","placeholder","readOnly","required","onBlur","htmlEventDescription","onChange","onFocus","onHelpToggle","event","onSelectDate","args","Preview","render","setArgs","Date","undefined","handleSelectDate","date","jsx","Examples","_args","setValue","useState","inputValue","setInputValue","setErrorMessage","handleSelect","isWithinInterval","start","end","format","jsxs","Fragment","e","target","TextArea","parameters","exampleParameters","docs","source","originalSource"],"mappings":"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"}