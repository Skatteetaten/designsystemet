{"version":3,"file":"TableRow.test.stories-DGf0DiPf.js","sources":["../../../../apps/ds-playground/src/stories/__tests__/TableRow.test.stories.tsx"],"sourcesContent":["import { dsI18n } from '@skatteetaten/ds-core-utils';\nimport { Table } from '@skatteetaten/ds-table';\nimport { Meta, StoryFn, StoryObj } from '@storybook/react';\nimport { expect, fireEvent, fn, within } from '@storybook/test';\n\nconst meta = {\n  component: Table.Row,\n  title: 'Tester/Table/Row',\n  argTypes: {\n    // Baseprops\n    key: { table: { disable: true } },\n    ref: { table: { disable: true } },\n    className: { table: { disable: true } },\n    id: { table: { disable: true } },\n    lang: { table: { disable: true } },\n    'data-testid': { table: { disable: true } },\n    // Props\n    expandableContent: { table: { disable: true } },\n    expandButtonAriaDescribedby: { table: { disable: true } },\n    expandButtonPosition: { table: { disable: true } },\n    expandButtonTitle: { table: { disable: true } },\n    isExpandable: { table: { disable: true } },\n    isExpanded: { table: { disable: true } },\n    children: { table: { disable: true } },\n    onClose: { table: { disable: true } },\n    onExpand: { table: { disable: true } },\n  },\n} satisfies Meta<typeof Table.Row>;\nexport default meta;\ntype Story = StoryObj<typeof meta>;\n\nconst Template: StoryFn<typeof Table.Row> = (args) => (\n  <Table caption={'testtabell'}>\n    <Table.Body>\n      <Table.Row {...args}>\n        <Table.DataCell id={'Id123'} as={'th'}>\n          {'Cake'}\n        </Table.DataCell>\n        <Table.DataCell>{'3,000'}</Table.DataCell>\n      </Table.Row>\n    </Table.Body>\n  </Table>\n);\n\nexport const WithRef = {\n  render: Template,\n  name: 'With Ref (FA1)',\n  args: {\n    ref: (instance: HTMLTableRowElement | null): void => {\n      if (instance) {\n        instance.id = 'dummyIdForwardedFromRef';\n      }\n    },\n  },\n  argTypes: {\n    ref: { table: { disable: false } },\n  },\n  parameters: {\n    imageSnapshot: { disable: true },\n  },\n  play: async ({ canvasElement }): Promise<void> => {\n    const canvas = within(canvasElement);\n    const table = canvas.getByRole('row');\n    await expect(table).toBeInTheDocument();\n    await expect(table).toHaveAttribute('id', 'dummyIdForwardedFromRef');\n  },\n} satisfies Story;\n\nexport const WithAttributes = {\n  render: Template,\n  name: 'With Attributes (FA2-5)',\n  args: {\n    id: 'htmlId',\n    className: 'dummyClassname',\n    lang: 'nb',\n    'data-testid': '123ID',\n  },\n  argTypes: {\n    id: { table: { disable: false } },\n    className: { table: { disable: false } },\n    lang: { table: { disable: false } },\n    'data-testid': { table: { disable: false } },\n  },\n  parameters: {\n    imageSnapshot: { disable: true },\n  },\n  play: async ({ canvasElement }): Promise<void> => {\n    const canvas = within(canvasElement);\n    const row = canvas.getByRole('row');\n    await expect(row).toHaveClass('dummyClassname');\n    await expect(row).toHaveAttribute('id', 'htmlId');\n    await expect(row).toHaveAttribute('lang', 'nb');\n    await expect(row).toHaveAttribute('data-testid', '123ID');\n  },\n} satisfies Story;\n\nexport const WithExpandable = {\n  render: Template,\n  name: 'With Expandable (TableRow B6)',\n  args: {\n    isExpandable: true,\n    expandButtonAriaDescribedby: 'Id123',\n    onExpand: fn(),\n  },\n  argTypes: {\n    isExpandable: { table: { disable: false } },\n    expandButtonAriaDescribedby: { table: { disable: false } },\n  },\n  parameters: {\n    imageSnapshot: { disable: true },\n    HTMLSnapshot: { disable: true },\n  },\n  play: async ({ canvasElement, args }): Promise<void> => {\n    const canvas = within(canvasElement);\n    const iconButton = canvas.getByRole('button');\n    await expect(iconButton).toHaveAttribute('aria-describedby', 'Id123');\n    await expect(iconButton).toHaveAccessibleName(\n      dsI18n.t('ds_tables:tablerow.Expandable')\n    );\n    await expect(iconButton).toHaveAttribute('aria-expanded', 'false');\n    /* Etter bytte fra @storybook/jest til @storybook/test m√• denne testen bruke\n    fireevent i stedet for UserEvent. Med userEVent gir testen ustabilt resultat.\n    I tillegg ser det ut som visningen i interactions fanen i storybook ikke samsvarer med resultatet til testen.\n     */\n    await fireEvent.click(iconButton);\n    await expect(args.onExpand).toHaveBeenCalled();\n    await expect(iconButton).toHaveAttribute('aria-expanded', 'true');\n  },\n} satisfies Story;\n"],"names":["meta","component","Table","Row","title","argTypes","key","table","disable","ref","className","id","lang","expandableContent","expandButtonAriaDescribedby","expandButtonPosition","expandButtonTitle","isExpandable","isExpanded","children","onClose","onExpand","Template","args","jsx","jsxs","WithRef","render","name","instance","parameters","imageSnapshot","play","canvasElement","within","getByRole","expect","toBeInTheDocument","toHaveAttribute","WithAttributes","row","toHaveClass","WithExpandable","fn","HTMLSnapshot","iconButton","toHaveAccessibleName","dsI18n","t","fireEvent","click","toHaveBeenCalled","docs","source","originalSource"],"mappings":"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"}