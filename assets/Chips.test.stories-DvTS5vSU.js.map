{"version":3,"file":"Chips.test.stories-DvTS5vSU.js","sources":["../../../../apps/ds-playground/src/stories/__tests__/Chips.test.stories.tsx"],"sourcesContent":["import { useState } from 'react';\n\nimport { Chips, ChipsProps } from '@skatteetaten/ds-collections';\nimport { dsI18n } from '@skatteetaten/ds-core-utils';\nimport { Meta, StoryFn, StoryObj } from '@storybook/react';\nimport { expect, userEvent, within } from '@storybook/test';\n\nconst elementId = 'htmlId';\n\nconst meta = {\n  component: Chips,\n  title: 'Tester/Chips/Chips',\n  argTypes: {\n    // Baseprops\n    key: { table: { disable: true } },\n    ref: { table: { disable: true } },\n    className: { table: { disable: true } },\n    id: { table: { disable: true } },\n    lang: { table: { disable: true } },\n    'data-testid': { table: { disable: true } },\n    // Props\n    children: { table: { disable: true } },\n    // Aria\n    ariaLabel: { table: { disable: true } },\n  },\n} satisfies Meta<typeof Chips>;\nexport default meta;\ntype Story = StoryObj<typeof meta>;\n\nconst defaultArgs: ChipsProps = {\n  children: [\n    <Chips.Toggle key={'trd'} showCheckmark={false}>\n      {'Trondheim'}\n    </Chips.Toggle>,\n    <Chips.Toggle key={'bgo'}>{'Bergen'}</Chips.Toggle>,\n    <Chips.Removable key={'osl'}>{'Oslo'}</Chips.Removable>,\n  ],\n};\n\nconst defaultLocations = ['Trondheim', 'Bergen', 'Oslo'];\n\nconst TemplateWithOnClose: StoryFn<typeof Chips> = () => {\n  const [locations, setLocations] = useState<string[]>(defaultLocations);\n\n  const handleLocationRemove = (location: string): void => {\n    setLocations((prevLocations) =>\n      prevLocations.filter((l) => l !== location)\n    );\n  };\n\n  return (\n    <Chips>\n      {locations.map((location: string) => (\n        <Chips.Removable\n          key={location}\n          onClose={() => handleLocationRemove(location)}\n        >\n          {location}\n        </Chips.Removable>\n      ))}\n    </Chips>\n  );\n};\n\nexport const WithRef = {\n  name: 'With Ref (FA1)',\n  args: {\n    ref: (instance: HTMLUListElement | null): void => {\n      if (instance) {\n        instance.id = 'dummyIdForwardedFromRef';\n      }\n    },\n    ...defaultArgs,\n  },\n  argTypes: {\n    ref: { table: { disable: false } },\n  },\n  parameters: {\n    imageSnapshot: { disable: true },\n  },\n  play: async ({ canvasElement }): Promise<void> => {\n    const canvas = within(canvasElement);\n    const container = canvas.getByRole('list');\n    await expect(container).toHaveAttribute('id', 'dummyIdForwardedFromRef');\n  },\n} satisfies Story;\n\nexport const WithAttributes = {\n  name: 'With Attributes(FA2-5)',\n  args: {\n    id: elementId,\n    className: 'dummyClassname',\n    lang: 'nb',\n    'data-testid': '123ID',\n    ...defaultArgs,\n  },\n  argTypes: {\n    id: { table: { disable: false } },\n    className: { table: { disable: false } },\n    lang: { table: { disable: false } },\n    'data-testid': { table: { disable: false } },\n  },\n  play: async ({ canvasElement }): Promise<void> => {\n    const canvas = within(canvasElement);\n    const container = canvas.getByRole('list');\n    await expect(container).toHaveClass('dummyClassname');\n    await expect(container).toHaveAttribute('id', elementId);\n    await expect(container).toHaveAttribute('lang', 'nb');\n    await expect(container).toHaveAttribute('data-testid', '123ID');\n  },\n} satisfies Story;\n\nexport const Defaults = {\n  name: 'Defaults (B2 delvis)',\n  args: defaultArgs,\n} satisfies Story;\n\nconst label = 'Kontorsted';\n\nexport const WithAriaLabel = {\n  name: 'With AriaLabel (B2 delvis)',\n  args: {\n    ariaLabel: label,\n    ...defaultArgs,\n  },\n  argTypes: {\n    ariaLabel: { table: { disable: false } },\n  },\n  parameters: {\n    imageSnapshot: { disable: true },\n  },\n  play: async ({ canvasElement }): Promise<void> => {\n    const canvas = within(canvasElement);\n    const container = canvas.getByRole('list');\n    await expect(container).toHaveAttribute('aria-label', label);\n  },\n} satisfies Story;\n\nexport const WithCloseAndFocusNext = {\n  name: 'With Close and Focus Next (B3)',\n  render: TemplateWithOnClose,\n  play: async ({ canvasElement }): Promise<void> => {\n    const canvas = within(canvasElement);\n    let chips = canvas.getAllByRole('button');\n    await expect(chips.length).toEqual(3);\n\n    await userEvent.click(chips[1]);\n    chips = canvas.getAllByRole('button');\n    await expect(chips.length).toEqual(2);\n    await expect(chips[1]).toHaveFocus();\n  },\n} satisfies Story;\n\nexport const WithCloseLastChip = {\n  name: 'With Close Last Chip (B3)',\n  render: TemplateWithOnClose,\n  play: async ({ canvasElement }): Promise<void> => {\n    const canvas = within(canvasElement);\n    const chips = canvas.getAllByRole('button');\n    await expect(chips.length).toEqual(3);\n    await userEvent.click(chips[2]);\n    await userEvent.click(chips[1]);\n    await userEvent.click(chips[0]);\n    const span = canvas.getByText(dsI18n.t('ds_collections:chips.NoFilters'));\n    await expect(span).toHaveFocus();\n  },\n} satisfies Story;\n"],"names":["elementId","meta","component","Chips","title","argTypes","key","table","disable","ref","className","id","lang","children","ariaLabel","defaultArgs","jsx","defaultLocations","TemplateWithOnClose","locations","setLocations","useState","handleLocationRemove","location","prevLocations","filter","l","map","WithRef","name","args","instance","parameters","imageSnapshot","play","canvasElement","container","within","getByRole","expect","toHaveAttribute","WithAttributes","toHaveClass","Defaults","label","WithAriaLabel","WithCloseAndFocusNext","render","canvas","chips","getAllByRole","length","toEqual","userEvent","click","toHaveFocus","WithCloseLastChip","span","getByText","dsI18n","t","docs","source","originalSource"],"mappings":"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"}