{"version":3,"file":"ComboboxSelectedOptions.test.stories-DS6qnXyB.js","sources":["../../../../apps/ds-playground/src/stories/__tests__/combobox/ComboboxSelectedOptions.test.stories.tsx"],"sourcesContent":["import React, { JSX } from 'react';\n\nimport { Meta, StoryObj } from '@storybook/react-vite';\nimport { expect, fn, userEvent, within } from 'storybook/test';\n\nimport type { ComboboxOption } from '@skatteetaten/ds-forms';\n\n// eslint-disable-next-line @nx/enforce-module-boundaries\nimport { ComboboxSelectedOptions } from '../../../../../../libs/ds-forms/src/Combobox/ComboboxSelectedOptions';\n\ntype ComboboxSelectedOptionsProps = React.ComponentProps<\n  typeof ComboboxSelectedOptions\n>;\n\nconst meta = {\n  component: ComboboxSelectedOptions,\n  title: 'Tester/Combobox/SelectedOptions',\n  decorators: [(Story): JSX.Element => <Story />],\n  argTypes: {\n    multiple: { table: { disable: true } },\n    selectedValues: { table: { disable: true } },\n    onRemoveValue: { table: { disable: true } },\n  },\n  tags: ['test'],\n} satisfies Meta<typeof ComboboxSelectedOptions>;\n\nexport default meta;\ntype Story = StoryObj<typeof meta>;\n\nconst mockOptions: ComboboxOption[] = [\n  { label: 'Norge', value: 'no' },\n  { label: 'Sverige', value: 'se' },\n  { label: 'Danmark', value: 'dk' },\n];\n\nconst defaultProps = {\n  multiple: true,\n  selectedValues: mockOptions,\n  onRemoveValue: fn(),\n};\n\nexport const OnRemoveValueCallback = {\n  name: 'onRemoveValue callback (A11)',\n  args: {\n    ...defaultProps,\n    onRemoveValue: fn(),\n  },\n  play: async ({\n    args,\n    canvasElement,\n  }: {\n    args: ComboboxSelectedOptionsProps;\n    canvasElement: HTMLElement;\n  }): Promise<void> => {\n    const canvas = within(canvasElement);\n\n    // Should call onRemoveValue with correct option when chip button is clicked\n    const norgeChipButton = canvas.getByRole('button', { name: /Norge/i });\n    await userEvent.click(norgeChipButton);\n\n    await expect(args.onRemoveValue).toHaveBeenCalledTimes(1);\n    await expect(args.onRemoveValue).toHaveBeenCalledWith({\n      label: 'Norge',\n      value: 'no',\n    });\n  },\n} satisfies Story;\n\nexport const WithDisabledChips = {\n  name: 'Disabled chips',\n  args: {\n    ...defaultProps,\n    disabled: true,\n  },\n  parameters: {\n    chromatic: { disableSnapshot: false },\n  },\n  play: async ({\n    canvasElement,\n  }: {\n    canvasElement: HTMLElement;\n  }): Promise<void> => {\n    const canvas = within(canvasElement);\n    const chips = canvas.getAllByRole('button');\n    for (const chip of chips) {\n      await expect(chip).toBeDisabled();\n    }\n  },\n} satisfies Story;\n"],"names":["expect","fn","userEvent","within","meta","component","ComboboxSelectedOptions","title","decorators","Story","jsx","argTypes","multiple","table","disable","selectedValues","onRemoveValue","tags","mockOptions","label","value","defaultProps","OnRemoveValueCallback","name","args","play","canvasElement","norgeChipButton","getByRole","click","toHaveBeenCalledTimes","toHaveBeenCalledWith","WithDisabledChips","disabled","parameters","chromatic","disableSnapshot","chips","getAllByRole","chip","toBeDisabled","docs","source","originalSource"],"mappings":"sVAGA,KAAA,CAAA,OAAAA,EAASA,GAAAA,EAAQC,UAAAA,EAAIC,OAAAA,CAAWC,EAAAA,0BAW1BC,EAAO,CACXC,UAAWC,EACXC,MAAO,kCACPC,WAAY,CAAEC,GAAuBC,EAAAA,IAACD,KAAQ,EAC9CE,SAAU,CACRC,SAAU,CAAEC,MAAO,CAAEC,QAAS,EAAA,CAAK,EACnCC,eAAgB,CAAEF,MAAO,CAAEC,QAAS,EAAA,CAAK,EACzCE,cAAe,CAAEH,MAAO,CAAEC,QAAS,EAAA,CAAK,CAAE,EAE5CG,KAAM,CAAC,MAAM,CACf,EAKMC,EAAgC,CACpC,CAAEC,MAAO,QAASC,MAAO,IAAK,EAC9B,CAAED,MAAO,UAAWC,MAAO,IAAK,EAChC,CAAED,MAAO,UAAWC,MAAO,IAAK,CAAC,EAG7BC,EAAe,CACnBT,SAAU,GACVG,eAAgBG,EAChBF,cAAef,EAAAA,CACjB,EAEaqB,EAAwB,CACnCC,KAAM,+BACNC,KAAM,CACJ,GAAGH,EACHL,cAAef,EAAAA,CAAG,EAEpBwB,KAAM,MAAO,CACXD,KAAAA,EACAE,cAAAA,CAAAA,IAImB,CAInB,MAAMC,EAHSxB,EAAOuB,CAAa,EAGJE,UAAU,SAAU,CAAEL,KAAM,QAAA,CAAU,EACrE,MAAMrB,EAAU2B,MAAMF,CAAe,EAErC,MAAM3B,EAAOwB,EAAKR,aAAa,EAAEc,sBAAsB,CAAC,EACxD,MAAM9B,EAAOwB,EAAKR,aAAa,EAAEe,qBAAqB,CACpDZ,MAAO,QACPC,MAAO,IAAA,CACR,CACH,CACF,EAEaY,EAAoB,CAC/BT,KAAM,iBACNC,KAAM,CACJ,GAAGH,EACHY,SAAU,EAAA,EAEZC,WAAY,CACVC,UAAW,CAAEC,gBAAiB,EAAA,CAAM,EAEtCX,KAAM,MAAO,CACXC,cAAAA,CAAAA,IAGmB,CAEnB,MAAMW,EADSlC,EAAOuB,CAAa,EACdY,aAAa,QAAQ,EAC1C,UAAWC,KAAQF,EACjB,MAAMrC,EAAOuC,CAAI,EAAEC,aAAAA,CAEvB,CACF,EAAiBlB,EAAAY,WAAA,CAAA,GAAAZ,EAAAY,WAAAO,KAAA,CAAA,GAAAnB,EAAAY,YAAAO,KAAAC,OAAA,CAAAC,eAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,mBAAA,GAAArB,EAAAY,YAAAO,MAAAC,MAAAA,CAAA,CAAA,EAAAV,EAAAE,WAAA,CAAA,GAAAF,EAAAE,WAAAO,KAAA,CAAA,GAAAT,EAAAE,YAAAO,KAAAC,OAAA,CAAAC,eAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,mBAAA,GAAAX,EAAAE,YAAAO,MAAAC,MAAAA,CAAA,CAAA"}