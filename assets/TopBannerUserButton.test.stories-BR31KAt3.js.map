{"version":3,"file":"TopBannerUserButton.test.stories-BR31KAt3.js","sources":["../../../../libs/ds-layout/src/TopBannerUserButton/TopBannerUserButton.types.ts","../../../../apps/ds-playground/src/stories/__tests__/TopBannerUserButton.test.stories.tsx"],"sourcesContent":["import { MouseEventHandler, Ref } from 'react';\n\nimport { BaseProps } from '@skatteetaten/ds-core-utils';\n\nimport { User } from '../TopBannerExternal/TopBannerExternal.types';\n\nexport const userRoleArr = ['meg', 'andre', 'virksomhet'] as const;\n\nexport interface TopBannerUserButtonProps extends BaseProps {\n  ref?: Ref<HTMLButtonElement>;\n  /** Hvilken rolle innlogget bruker har. Hvis user.role er lik 'meg' settes automatisk teksten 'Meg selv' ellers settes teksten til user.name */\n  user: User;\n  /** Callback når knappen trykkes på. */\n  onClick?: MouseEventHandler<HTMLButtonElement>;\n}\n","import { Meta, StoryFn, StoryObj } from '@storybook/react';\nimport { expect, within } from '@storybook/test';\n\nimport { dsI18n } from '@skatteetaten/ds-core-utils';\n\n// eslint-disable-next-line @nx/enforce-module-boundaries\nimport { TopBannerUserButton } from '../../../../../libs/ds-layout/src/TopBannerUserButton/TopBannerUserButton';\n// eslint-disable-next-line @nx/enforce-module-boundaries\nimport {\n  TopBannerUserButtonProps,\n  userRoleArr,\n} from '../../../../../libs/ds-layout/src/TopBannerUserButton/TopBannerUserButton.types';\n\nconst verifyAttribute =\n  (attribute: string, expectedValue: string) =>\n  async ({ canvasElement }: { canvasElement: HTMLElement }): Promise<void> => {\n    const canvas = within(canvasElement);\n    const button = canvas.getByRole('button');\n    await expect(button).toBeInTheDocument();\n    await expect(button).toHaveAttribute(attribute, expectedValue);\n  };\n\nconst meta = {\n  component: TopBannerUserButton,\n  title: 'Tester/TopBanner/TopBannerUserButton (intern)',\n  argTypes: {\n    // Baseprops\n    ref: { table: { disable: true } },\n    className: { table: { disable: true } },\n    id: { table: { disable: true } },\n    lang: { table: { disable: true } },\n    'data-testid': { table: { disable: true } },\n    // Props\n    user: { table: { disable: true } },\n    // Events\n    onClick: { table: { disable: true } },\n  },\n} as Meta<typeof TopBannerUserButton>;\nexport default meta;\ntype Story = StoryObj<typeof meta>;\n\nconst defaultArgs: TopBannerUserButtonProps = {\n  user: {\n    role: 'meg',\n  },\n};\n\nexport const WithRef = {\n  name: 'With Ref (FA1)',\n  args: {\n    ...defaultArgs,\n    ref: (instance: HTMLButtonElement | null): void => {\n      if (instance) {\n        instance.id = 'dummyIdForwardedFromRef';\n      }\n    },\n  },\n  argTypes: {\n    ref: { table: { disable: false } },\n  },\n  parameters: {\n    imageSnapshot: { disable: true },\n  },\n  play: verifyAttribute('id', 'dummyIdForwardedFromRef'),\n} satisfies Story;\n\nexport const WithAttributes = {\n  name: 'With Attributes (FA2-5)',\n  args: {\n    ...defaultArgs,\n    id: 'htmlid',\n    className: 'dummyClassname',\n    lang: 'nb',\n    'data-testid': '123ID',\n  },\n  argTypes: {\n    id: { table: { disable: false } },\n    className: { table: { disable: false } },\n    lang: { table: { disable: false } },\n    'data-testid': { table: { disable: false } },\n  },\n  play: async ({ canvasElement }): Promise<void> => {\n    const canvas = within(canvasElement);\n    const button = canvas.getByRole('button');\n    await expect(button).toHaveAttribute('id', 'htmlid');\n    await expect(button).toHaveClass('dummyClassname');\n    await expect(button).toHaveAttribute('lang', 'nb');\n    await expect(button).toHaveAttribute('data-testid', '123ID');\n  },\n} satisfies Story;\n\nexport const Defaults = {\n  name: 'Defaults (Username A2)',\n  args: {\n    ...defaultArgs,\n  },\n  argTypes: {\n    user: { table: { disable: false } },\n  },\n  play: async ({ canvasElement }): Promise<void> => {\n    const canvas = within(canvasElement);\n    const usernameButtonText = canvas.getByText(\n      dsI18n.t('ds_layout:topbannerbutton.Myself')\n    );\n    const title = canvas.getByText(\n      dsI18n.t('ds_layout:topbannerbutton.MyselfTitle')\n    );\n    await expect(usernameButtonText).toBeInTheDocument();\n    await expect(title).toBeInTheDocument();\n  },\n} satisfies Story;\n\nconst TemplateWithAllRoles: StoryFn<typeof TopBannerUserButton> = (args) => (\n  <div className={'topbannerButtonContainer'}>\n    {userRoleArr.map((role, index) => {\n      const name =\n        role === 'andre'\n          ? 'SØRUMSAND-SCHOENBERG WILLIAM'\n          : 'Navn på virksomhet';\n      return (\n        <TopBannerUserButton\n          key={`user_${index}`}\n          className={'bottomSpacingXL'}\n          {...args}\n          user={{ role, name }}\n        />\n      );\n    })}\n  </div>\n);\n\nexport const WithAllRoles = {\n  render: TemplateWithAllRoles,\n  name: 'With All Roles (Username A2, A3, A6, A7)',\n  args: {\n    ...defaultArgs,\n  },\n  argTypes: {\n    user: {\n      table: { disable: false },\n      control: { disable: true },\n    },\n  },\n  play: async ({ canvasElement }): Promise<void> => {\n    const canvas = within(canvasElement);\n    const titleSelf = canvas.getByText(\n      dsI18n.t('ds_layout:topbannerbutton.MyselfTitle')\n    );\n    const titleWork = canvas.getByText(\n      dsI18n.t('ds_layout:topbannerbutton.CompanyTitle')\n    );\n    const titleOther = canvas.getByText(\n      dsI18n.t('ds_layout:topbannerbutton.OtherTitle')\n    );\n    await expect(titleSelf).toBeInTheDocument();\n    await expect(titleWork).toBeInTheDocument();\n    await expect(titleOther).toBeInTheDocument();\n\n    await expect(\n      canvas.getByText(dsI18n.t('ds_layout:topbannerbutton.Myself'))\n    ).toBeInTheDocument();\n    await expect(\n      canvas.getByText('SØRUMSAND-SCHOENBERG WILLIAM')\n    ).toBeInTheDocument();\n    await expect(canvas.getByText('Navn på virksomhet')).toBeInTheDocument();\n  },\n} satisfies Story;\n\nexport const WithMobileScreen = {\n  render: TemplateWithAllRoles,\n  name: 'With Small Screen (Username A2, A5)',\n  args: {\n    ...defaultArgs,\n  },\n  parameters: {\n    viewport: {\n      defaultViewport: '--mobile',\n    },\n  },\n} satisfies Story;\n\nexport const WithBreakpointXS = {\n  render: TemplateWithAllRoles,\n  name: 'With Breakpoint-xs (Username A2, A5)',\n  args: {\n    ...defaultArgs,\n  },\n  parameters: {\n    viewport: {\n      defaultViewport: '--breakpoint-xs',\n    },\n  },\n} satisfies Story;\n\nexport const WithBreakpointS = {\n  render: TemplateWithAllRoles,\n  name: 'With Breakpoint-s (Username A2, A5)',\n  args: {\n    ...defaultArgs,\n  },\n  parameters: {\n    viewport: {\n      defaultViewport: '--breakpoint-s',\n    },\n  },\n} satisfies Story;\n\nexport const WithBreakpointM = {\n  render: TemplateWithAllRoles,\n  name: 'With Breakpoint-m (Username A2, A5)',\n  args: {\n    ...defaultArgs,\n  },\n  parameters: {\n    viewport: {\n      defaultViewport: '--breakpoint-m',\n    },\n  },\n} satisfies Story;\n"],"names":["userRoleArr","verifyAttribute","attribute","expectedValue","canvasElement","button","within","getByRole","expect","toBeInTheDocument","toHaveAttribute","meta","component","TopBannerUserButton","title","argTypes","ref","table","disable","className","id","lang","user","onClick","defaultArgs","role","WithRef","name","args","instance","parameters","imageSnapshot","play","WithAttributes","toHaveClass","Defaults","canvas","usernameButtonText","getByText","dsI18n","t","TemplateWithAllRoles","jsx","map","index","WithAllRoles","render","control","titleSelf","titleWork","titleOther","WithMobileScreen","viewport","defaultViewport","WithBreakpointXS","WithBreakpointS","WithBreakpointM","docs","source","originalSource"],"mappings":"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"}