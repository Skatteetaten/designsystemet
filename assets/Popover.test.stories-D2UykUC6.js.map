{"version":3,"file":"Popover.test.stories-D2UykUC6.js","sources":["../../../../apps/ds-playground/src/stories/__tests__/Popover.test.stories.tsx"],"sourcesContent":["import { StoryFn, Meta, StoryObj } from '@storybook/react-vite';\nimport { expect, fireEvent, fn, userEvent, within } from 'storybook/test';\n\nimport { dsI18n } from '@skatteetaten/ds-core-utils';\nimport { Popover } from '@skatteetaten/ds-overlays';\n\nimport { loremIpsum } from './testUtils/storybook.testing.utils';\n\nconst defaultText =\n  'Avvist av kortutsteder. Ta kontakt med kortutsteder for mer informasjon.';\nconst Template: StoryFn<typeof Popover> = (args) => (\n  <Popover {...args}>\n    <Popover.Trigger />\n    <Popover.Content>{defaultText}</Popover.Content>\n  </Popover>\n);\n\nconst meta = {\n  component: Popover,\n  title: 'Tester/Popover',\n  argTypes: {\n    // Baseprops\n    // @ts-expect-error disable baseprops gir error fordi denne komponenten ikke st√∏tter baseprops, men de skal disables alikevel\n    ref: { table: { disable: true } },\n    className: { table: { disable: true } },\n    id: { table: { disable: true } },\n    lang: { table: { disable: true } },\n    'data-testid': { table: { disable: true } },\n    // Props\n    children: {\n      table: { disable: true },\n      control: 'text',\n    },\n    color: { table: { disable: true } },\n    disableAutoDismiss: { table: { disable: true } },\n    disableAutoDismissOnMobile: { table: { disable: true } },\n    isOpen: { table: { disable: true } },\n    position: { table: { disable: true } },\n    shouldRestoreFocus: { table: { disable: true } },\n    // Event\n    onClose: { table: { disable: true } },\n  },\n  render: Template,\n  tags: ['test'],\n  parameters: {\n    imageSnapshot: { disableSnapshot: false },\n  },\n} satisfies Meta<typeof Popover>;\nexport default meta;\ntype Story = StoryObj<typeof meta>;\n\nexport const Defaults = {\n  name: 'Defaults',\n  args: {},\n  argTypes: {\n    children: { table: { disable: false } },\n  },\n  play: async ({ canvasElement }): Promise<void> => {\n    const canvas = within(canvasElement);\n    const triggerButton = canvas.getByRole('button');\n    await expect(triggerButton).toBeInTheDocument();\n  },\n} satisfies Story;\n\nconst TemplateAllColors: StoryFn<typeof Popover> = (args) => (\n  <div className={'flex gapS centerContent'}>\n    <Popover color={'forest'} position={'topEnd'} isOpen {...args}>\n      <Popover.Trigger size={'extraSmall'} />\n      <Popover.Content>{args.children}</Popover.Content>\n    </Popover>\n    <Popover color={'white'} position={'bottomEnd'} isOpen {...args}>\n      <Popover.Trigger size={'small'} />\n      <Popover.Content>{args.children}</Popover.Content>\n    </Popover>\n    <Popover color={'ochre'} position={'topStart'} isOpen {...args}>\n      <Popover.Trigger size={'medium'} />\n      <Popover.Content>{args.children}</Popover.Content>\n    </Popover>\n    <Popover color={'forest'} position={'bottomStart'} isOpen {...args}>\n      <Popover.Trigger size={'large'} />\n      <Popover.Content>{args.children}</Popover.Content>\n    </Popover>\n  </div>\n);\n\nexport const AllColors = {\n  render: TemplateAllColors,\n  name: 'All Colors Floating Position (A1, A2, A3, A4)',\n  argTypes: {\n    position: { table: { disable: false } },\n    color: { table: { disable: false } },\n  },\n  args: {\n    children: loremIpsum,\n  },\n} satisfies Story;\n\nexport const WithOnClickTriggerAndCloseButton = {\n  name: 'With OnClick Trigger Close Button (A9)',\n  args: {\n    onClose: fn(),\n  },\n\n  parameters: {\n    imageSnapshot: { disableSnapshot: true },\n  },\n  play: async ({ canvasElement, args }): Promise<void> => {\n    const canvas = within(canvasElement);\n    const button = canvas.getByRole('button');\n    await expect(button).toBeInTheDocument();\n    await expect(button).toHaveAttribute('aria-expanded', 'false');\n    await expect(canvas.queryByText(defaultText)).not.toBeInTheDocument();\n    await fireEvent.click(button);\n    await expect(button).toHaveAttribute('aria-expanded', 'true');\n    await expect(canvas.getByText(defaultText)).toBeInTheDocument();\n    await fireEvent.click(button);\n    await expect(canvas.queryByText(defaultText)).not.toBeInTheDocument();\n    await fireEvent.click(button);\n    const closeButton = canvas.getByTitle(dsI18n.t('Shared:shared.Close'));\n    await fireEvent.click(closeButton);\n    await expect(canvas.queryByText(defaultText)).not.toBeInTheDocument();\n    await expect(args.onClose).toHaveBeenCalled();\n  },\n} satisfies Story;\n\nexport const WithAutoClose = {\n  name: 'With AutoClose (A8)',\n  args: {},\n  argTypes: {\n    disableAutoDismiss: { table: { disable: false } },\n  },\n  parameters: {\n    imageSnapshot: { disableSnapshot: true },\n  },\n  play: async ({ canvasElement }): Promise<void> => {\n    const canvas = within(canvasElement);\n    const button = canvas.getByRole('button');\n    await expect(button).toBeInTheDocument();\n    await expect(canvas.queryByText(defaultText)).not.toBeInTheDocument();\n    await fireEvent.click(button);\n    await expect(canvas.getByText(defaultText)).toBeInTheDocument();\n    await userEvent.click(document.body);\n    await expect(canvas.queryByText(defaultText)).not.toBeInTheDocument();\n  },\n} satisfies Story;\n\nexport const WithAutoCloseDisabled = {\n  name: 'With AutoClose Disabled (A8)',\n  argTypes: {\n    disableAutoDismiss: { table: { disable: false } },\n  },\n  args: {\n    disableAutoDismiss: true,\n  },\n  parameters: {\n    imageSnapshot: { disableSnapshot: true },\n  },\n  play: async ({ canvasElement }): Promise<void> => {\n    const canvas = within(canvasElement);\n    const button = canvas.getByRole('button');\n    await expect(button).toBeInTheDocument();\n    await expect(canvas.queryByText(defaultText)).not.toBeInTheDocument();\n    await fireEvent.click(button);\n    await expect(canvas.getByText(defaultText)).toBeInTheDocument();\n    await userEvent.click(document.body);\n    await expect(canvas.getByText(defaultText)).toBeInTheDocument();\n  },\n} satisfies Story;\n"],"names":["expect","fireEvent","fn","userEvent","within","defaultText","Template","args","jsxs","Popover","jsx","meta","component","title","argTypes","ref","table","disable","className","id","lang","children","control","color","disableAutoDismiss","disableAutoDismissOnMobile","isOpen","position","shouldRestoreFocus","onClose","render","tags","parameters","imageSnapshot","disableSnapshot","Defaults","name","play","canvasElement","triggerButton","getByRole","toBeInTheDocument","TemplateAllColors","AllColors","loremIpsum","WithOnClickTriggerAndCloseButton","canvas","button","toHaveAttribute","queryByText","not","click","getByText","closeButton","getByTitle","dsI18n","t","toHaveBeenCalled","WithAutoClose","document","body","WithAutoCloseDisabled","docs","source","originalSource"],"mappings":"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"}