{"version":3,"file":"Popover.test.stories-BOS6KHfd.js","sources":["../../../../apps/ds-playground/src/stories/__tests__/Popover.test.stories.tsx"],"sourcesContent":["import { StoryFn, Meta, StoryObj } from '@storybook/react';\nimport { expect, fireEvent, fn, userEvent, within } from '@storybook/test';\n\nimport { dsI18n } from '@skatteetaten/ds-core-utils';\nimport { Popover } from '@skatteetaten/ds-overlays';\n\nimport { loremIpsum } from './testUtils/storybook.testing.utils';\n\nconst defaultText =\n  'Avvist av kortutsteder. Ta kontakt med kortutsteder for mer informasjon.';\nconst Template: StoryFn<typeof Popover> = (args) => (\n  <Popover {...args}>\n    <Popover.Trigger />\n    <Popover.Content>{defaultText}</Popover.Content>\n  </Popover>\n);\n\nconst meta = {\n  component: Popover,\n  title: 'Tester/Popover/Popover',\n  argTypes: {\n    // Baseprops\n    // @ts-expect-error disable baseprops gir error fordi denne komponenten ikke st√∏tter baseprops, men de skal disables alikevel\n    ref: { table: { disable: true } },\n    className: { table: { disable: true } },\n    id: { table: { disable: true } },\n    lang: { table: { disable: true } },\n    'data-testid': { table: { disable: true } },\n    // Props\n    children: {\n      table: { disable: true },\n      control: 'text',\n    },\n    color: { table: { disable: true } },\n    disableAutoDismiss: { table: { disable: true } },\n    disableAutoDismissOnMobile: { table: { disable: true } },\n    isOpen: { table: { disable: true } },\n    position: { table: { disable: true } },\n    shouldRestoreFocus: { table: { disable: true } },\n    // Event\n    onClose: { table: { disable: true } },\n  },\n  render: Template,\n} satisfies Meta<typeof Popover>;\nexport default meta;\ntype Story = StoryObj<typeof meta>;\n\nexport const Defaults = {\n  name: 'Defaults',\n  args: {},\n  argTypes: {\n    children: { table: { disable: false } },\n  },\n  play: async ({ canvasElement }): Promise<void> => {\n    const canvas = within(canvasElement);\n    const triggerButton = canvas.getByRole('button');\n    await expect(triggerButton).toBeInTheDocument();\n  },\n} satisfies Story;\n\nconst TemplateAllColors: StoryFn<typeof Popover> = (args) => (\n  <div className={'flex gapS centerContent'}>\n    <Popover color={'forest'} position={'topEnd'} isOpen {...args}>\n      <Popover.Trigger size={'extraSmall'} />\n      <Popover.Content>{args.children}</Popover.Content>\n    </Popover>\n    <Popover color={'white'} position={'bottomEnd'} isOpen {...args}>\n      <Popover.Trigger size={'small'} />\n      <Popover.Content>{args.children}</Popover.Content>\n    </Popover>\n    <Popover color={'ochre'} position={'topStart'} isOpen {...args}>\n      <Popover.Trigger size={'medium'} />\n      <Popover.Content>{args.children}</Popover.Content>\n    </Popover>\n    <Popover color={'forest'} position={'bottomStart'} isOpen {...args}>\n      <Popover.Trigger size={'large'} />\n      <Popover.Content>{args.children}</Popover.Content>\n    </Popover>\n  </div>\n);\n\nexport const AllColors = {\n  render: TemplateAllColors,\n  name: 'All Colors Floating Position (A1, A2, A3, A4)',\n  argTypes: {\n    position: { table: { disable: false } },\n    color: { table: { disable: false } },\n  },\n  args: {\n    children: loremIpsum,\n  },\n} satisfies Story;\n\nexport const WithOnClickTriggerAndCloseButton = {\n  name: 'With OnClick Trigger Close Button (A9)',\n  args: {\n    onClose: fn(),\n  },\n\n  parameters: {\n    imageSnapshot: { disable: true },\n    HTMLSnapshot: { disable: true },\n  },\n  play: async ({ canvasElement, args }): Promise<void> => {\n    const canvas = within(canvasElement);\n    const button = canvas.getByRole('button');\n    await expect(button).toBeInTheDocument();\n    await expect(button).toHaveAttribute('aria-expanded', 'false');\n    await expect(canvas.queryByText(defaultText)).not.toBeInTheDocument();\n    await fireEvent.click(button);\n    await expect(button).toHaveAttribute('aria-expanded', 'true');\n    await expect(canvas.getByText(defaultText)).toBeInTheDocument();\n    await fireEvent.click(button);\n    await expect(canvas.queryByText(defaultText)).not.toBeInTheDocument();\n    await fireEvent.click(button);\n    const closeButton = canvas.getByTitle(dsI18n.t('Shared:shared.Close'));\n    await fireEvent.click(closeButton);\n    await expect(canvas.queryByText(defaultText)).not.toBeInTheDocument();\n    await expect(args.onClose).toHaveBeenCalled();\n  },\n} satisfies Story;\n\nexport const WithAutoClose = {\n  name: 'With AutoClose (A8)',\n  args: {},\n  argTypes: {\n    disableAutoDismiss: { table: { disable: false } },\n  },\n  parameters: {\n    imageSnapshot: { disable: true },\n    HTMLSnapshot: { disable: true },\n  },\n  play: async ({ canvasElement }): Promise<void> => {\n    const canvas = within(canvasElement);\n    const button = canvas.getByRole('button');\n    await expect(button).toBeInTheDocument();\n    await expect(canvas.queryByText(defaultText)).not.toBeInTheDocument();\n    await fireEvent.click(button);\n    await expect(canvas.getByText(defaultText)).toBeInTheDocument();\n    await userEvent.click(document.body);\n    await expect(canvas.queryByText(defaultText)).not.toBeInTheDocument();\n  },\n} satisfies Story;\n\nexport const WithAutoCloseDisabled = {\n  name: 'With AutoClose Disabled (A8)',\n  argTypes: {\n    disableAutoDismiss: { table: { disable: false } },\n  },\n  args: {\n    disableAutoDismiss: true,\n  },\n  parameters: {\n    imageSnapshot: { disable: true },\n    HTMLSnapshot: { disable: true },\n  },\n  play: async ({ canvasElement }): Promise<void> => {\n    const canvas = within(canvasElement);\n    const button = canvas.getByRole('button');\n    await expect(button).toBeInTheDocument();\n    await expect(canvas.queryByText(defaultText)).not.toBeInTheDocument();\n    await fireEvent.click(button);\n    await expect(canvas.getByText(defaultText)).toBeInTheDocument();\n    await userEvent.click(document.body);\n    await expect(canvas.getByText(defaultText)).toBeInTheDocument();\n  },\n} satisfies Story;\n"],"names":["defaultText","Template","args","jsxs","Popover","jsx","meta","component","title","argTypes","ref","table","disable","className","id","lang","children","control","color","disableAutoDismiss","disableAutoDismissOnMobile","isOpen","position","shouldRestoreFocus","onClose","render","Defaults","name","play","canvasElement","triggerButton","within","getByRole","expect","toBeInTheDocument","TemplateAllColors","AllColors","loremIpsum","WithOnClickTriggerAndCloseButton","fn","parameters","imageSnapshot","HTMLSnapshot","canvas","button","toHaveAttribute","queryByText","not","fireEvent","click","getByText","closeButton","getByTitle","dsI18n","t","toHaveBeenCalled","WithAutoClose","userEvent","document","body","WithAutoCloseDisabled","docs","source","originalSource"],"mappings":"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"}