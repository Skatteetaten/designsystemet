{"version":3,"file":"TopBannerExternal.stories-BAE8Hkz1.js","sources":["../../../../apps/ds-playground/src/stories/components/TopBannerExternal.stories.tsx"],"sourcesContent":["import { useRef, useState, ChangeEvent, MouseEvent, JSX } from 'react';\n\nimport { Button, LinkGroup } from '@skatteetaten/ds-buttons';\nimport { RadioGroup } from '@skatteetaten/ds-forms';\nimport {\n  TopBannerExternal,\n  TopBannerExternalHandle,\n  User,\n} from '@skatteetaten/ds-layout';\nimport { Modal } from '@skatteetaten/ds-overlays';\nimport { Meta, StoryObj } from '@storybook/react';\n\n// eslint-disable-next-line @nx/enforce-module-boundaries\nimport { dsI18n, langToLocale } from '../../../../../libs/ds-core-utils/src';\n// eslint-disable-next-line @nx/enforce-module-boundaries\nimport {\n  getTopBannerLangPickerLocaleDefault,\n  getTopBannerLangPickerShowSamiDefault,\n} from '../../../../../libs/ds-layout/src/TopBannerLangPicker/defaults';\n// eslint-disable-next-line @nx/enforce-module-boundaries\nimport { category, htmlEventDescription } from '../../../.storybook/helpers';\nimport customLogo from '../../assets/custom-logo.svg';\nimport skeLogo from '../../assets/ske-logo.svg';\nimport { exampleParameters } from '../utils/stories.utils';\n\nconst meta = {\n  component: TopBannerExternal,\n  title: 'Komponenter/TopBannerExternal',\n  argTypes: {\n    // Props\n    showSami: {\n      table: {\n        category: category.props,\n        defaultValue: {\n          summary: String(getTopBannerLangPickerShowSamiDefault()),\n        },\n      },\n    },\n    defaultLocale: {\n      table: {\n        category: category.props,\n        defaultValue: { summary: getTopBannerLangPickerLocaleDefault() },\n      },\n    },\n    children: { control: 'text', table: { category: category.props } },\n    skipLink: { table: { category: category.props } },\n    logo: {\n      table: { category: category.props },\n      control: 'select',\n      options: ['', customLogo, skeLogo],\n    },\n    user: { table: { category: category.props } },\n    firstColumn: { control: 'text', table: { category: category.props } },\n    secondColumn: { control: 'text', table: { category: category.props } },\n    thirdColumn: { control: 'text', table: { category: category.props } },\n    additionalLanguages: { table: { category: category.props } },\n    // Events\n    onLogInClick: {\n      ...htmlEventDescription,\n    },\n    onLogOutClick: {\n      ...htmlEventDescription,\n    },\n    onUserClick: {\n      ...htmlEventDescription,\n    },\n    onLanguageClick: {\n      ...htmlEventDescription,\n    },\n  },\n  args: {\n    // uten undefined s√• blir funksjonene initalisert med mockConstructor i Storybook\n    onLogInClick: undefined,\n    onLogOutClick: undefined,\n    onUserClick: undefined,\n  },\n  parameters: {\n    layout: 'fullscreen',\n  },\n} satisfies Meta<typeof TopBannerExternal>;\n\nexport default meta;\ntype Story = StoryObj<typeof meta>;\n\nexport const Preview: Story = {} satisfies Story;\n\nexport const Examples: Story = {\n  render: (_args): JSX.Element => {\n    const modalRef = useRef<HTMLDialogElement>(null);\n    const topBannerRef = useRef<TopBannerExternalHandle>(null);\n    const [user, setUser] = useState<User>();\n    const [isLoggedIn, setIsLoggedIn] = useState<boolean>(false);\n\n    const handleLanguageClick = (e: MouseEvent<HTMLButtonElement>): void => {\n      const lang = e.currentTarget.lang;\n      dsI18n.changeLanguage(langToLocale[lang]);\n    };\n\n    const handleLogOut = (): void => {\n      setUser(undefined);\n      setIsLoggedIn(false);\n    };\n\n    const handleLogIn = (): void => {\n      modalRef.current?.showModal();\n    };\n\n    const handleChangeRole = (e: ChangeEvent<HTMLInputElement>): void => {\n      setIsLoggedIn(true);\n      const role = e.target.value as User['role'];\n      if (role === 'meg') {\n        setUser({ role });\n      } else {\n        setUser({\n          role,\n          name: 'Knotten, Gudleik',\n        });\n      }\n    };\n\n    const links = [\n      { href: '#storybook-root', text: 'Skatt' },\n      { href: '#storybook-root', text: 'Avgift' },\n      { href: '#storybook-root', text: 'Folkeregisteret' },\n    ];\n\n    return (\n      <>\n        <TopBannerExternal\n          ref={topBannerRef}\n          firstColumn={\n            <LinkGroup>\n              {links.map((link, index) => (\n                <LinkGroup.Link\n                  key={index}\n                  href={link.href}\n                  onClick={(e): void => {\n                    e.preventDefault();\n                    topBannerRef.current?.closeMenu?.();\n                  }}\n                >\n                  {link.text}\n                </LinkGroup.Link>\n              ))}\n            </LinkGroup>\n          }\n          secondColumn={isLoggedIn ? 'Second column' : ''}\n          thirdColumn={isLoggedIn ? 'Third column' : ''}\n          user={user}\n          onLanguageClick={handleLanguageClick}\n          onLogInClick={handleLogIn}\n          onLogOutClick={handleLogOut}\n          onUserClick={(): void => modalRef.current?.showModal()}\n        />\n        <Modal ref={modalRef} title={'Dette er dine roller'}>\n          <RadioGroup\n            legend={'Velge en rolle'}\n            selectedValue={user?.role ?? ''}\n            onChange={handleChangeRole}\n          >\n            <RadioGroup.Radio value={'meg'}>\n              {'Innlogget som meg selv'}\n            </RadioGroup.Radio>\n            <RadioGroup.Radio value={'andre'}>\n              {'Innlogget som annen person'}\n            </RadioGroup.Radio>\n            <RadioGroup.Radio value={'virksomhet'}>\n              {'Innlogget som virksomhet'}\n            </RadioGroup.Radio>\n          </RadioGroup>\n          <Button onClick={(): void => modalRef.current?.close()}>\n            {'Ok'}\n          </Button>\n        </Modal>\n      </>\n    );\n  },\n} satisfies Story;\nExamples.parameters = exampleParameters;\n"],"names":["meta","component","TopBannerExternal","title","argTypes","showSami","table","category","props","defaultValue","summary","String","getTopBannerLangPickerShowSamiDefault","defaultLocale","getTopBannerLangPickerLocaleDefault","children","control","skipLink","logo","options","customLogo","skeLogo","user","firstColumn","secondColumn","thirdColumn","additionalLanguages","onLogInClick","htmlEventDescription","onLogOutClick","onUserClick","onLanguageClick","args","undefined","parameters","layout","Preview","Examples","render","_args","modalRef","useRef","topBannerRef","setUser","useState","isLoggedIn","setIsLoggedIn","handleLanguageClick","e","lang","currentTarget","changeLanguage","langToLocale","handleLogOut","handleLogIn","current","showModal","handleChangeRole","role","target","value","name","links","href","text","jsxs","Fragment","jsx","LinkGroup","map","link","index","preventDefault","closeMenu","Modal","RadioGroup","Button","close","exampleParameters","docs","source","originalSource"],"mappings":"miBAyBA,MAAMA,EAAO,CACXC,UAAWC,EACXC,MAAO,gCACPC,SAAU,CAERC,SAAU,CACRC,MAAO,CACLC,SAAUA,EAASC,MACnBC,aAAc,CACZC,QAASC,OAAOC,EAAuC,CAAA,CAAA,CACzD,CAEJ,EACAC,cAAe,CACbP,MAAO,CACLC,SAAUA,EAASC,MACnBC,aAAc,CAAEC,QAASI,EAAoC,CAAA,CAAE,CAEnE,EACAC,SAAU,CAAEC,QAAS,OAAQV,MAAO,CAAEC,SAAUA,EAASC,KAAAA,CAAQ,EACjES,SAAU,CAAEX,MAAO,CAAEC,SAAUA,EAASC,KAAAA,CAAQ,EAChDU,KAAM,CACJZ,MAAO,CAAEC,SAAUA,EAASC,KAAM,EAClCQ,QAAS,SACTG,QAAS,CAAC,GAAIC,EAAYC,CAAO,CACnC,EACAC,KAAM,CAAEhB,MAAO,CAAEC,SAAUA,EAASC,KAAAA,CAAQ,EAC5Ce,YAAa,CAAEP,QAAS,OAAQV,MAAO,CAAEC,SAAUA,EAASC,KAAAA,CAAQ,EACpEgB,aAAc,CAAER,QAAS,OAAQV,MAAO,CAAEC,SAAUA,EAASC,KAAAA,CAAQ,EACrEiB,YAAa,CAAET,QAAS,OAAQV,MAAO,CAAEC,SAAUA,EAASC,KAAAA,CAAQ,EACpEkB,oBAAqB,CAAEpB,MAAO,CAAEC,SAAUA,EAASC,KAAAA,CAAQ,EAE3DmB,aAAc,CACZ,GAAGC,CACL,EACAC,cAAe,CACb,GAAGD,CACL,EACAE,YAAa,CACX,GAAGF,CACL,EACAG,gBAAiB,CACf,GAAGH,CAAAA,CAEP,EACAI,KAAM,CAEJL,aAAcM,OACdJ,cAAeI,OACfH,YAAaG,MACf,EACAC,WAAY,CACVC,OAAQ,YAAA,CAEZ,EAKaC,EAAiB,CAAC,EAElBC,EAAkB,CAC7BC,OAASC,GAAuB,CACxBC,MAAAA,EAAWC,SAA0B,IAAI,EACzCC,EAAeD,SAAgC,IAAI,EACnD,CAACnB,EAAMqB,CAAO,EAAIC,WAAe,EACjC,CAACC,EAAYC,CAAa,EAAIF,EAAAA,SAAkB,EAAK,EAErDG,EAAuBC,GAA2C,CAChEC,MAAAA,EAAOD,EAAEE,cAAcD,KACtBE,EAAAA,eAAeC,EAAaH,CAAI,CAAC,CAC1C,EAEMI,EAAeA,IAAY,CAC/BV,EAAQV,MAAS,EACjBa,EAAc,EAAK,CACrB,EAEMQ,EAAcA,IAAY,QAC9Bd,EAAAA,EAASe,UAATf,MAAAA,EAAkBgB,WACpB,EAEMC,EAAoBT,GAA2C,CACnEF,EAAc,EAAI,EACZY,MAAAA,EAAOV,EAAEW,OAAOC,MAEZjB,EADNe,IAAS,MACH,CAAEA,KAAAA,CAAAA,EAEF,CACNA,KAAAA,EACAG,KAAM,kBAAA,CAJQ,CAOpB,EAEMC,EAAQ,CACZ,CAAEC,KAAM,kBAAmBC,KAAM,OAAA,EACjC,CAAED,KAAM,kBAAmBC,KAAM,QAAA,EACjC,CAAED,KAAM,kBAAmBC,KAAM,iBAAA,CAAmB,EAGtD,OAEIC,EAAA,KAAAC,WAAA,CAAA,SAAA,CAACC,EAAAA,IAAAjE,EAAA,CACC,IAAKwC,EACL,kBACG0B,EACEN,CAAAA,SAAAA,EAAMO,IAAI,CAACC,EAAMC,IACfJ,EAAAA,IAAAC,EAAU,KAAV,CAEC,KAAME,EAAKP,KACX,QAAUf,GAAY,SACpBA,EAAEwB,eAAe,GACjB9B,GAAAA,EAAAA,EAAaa,UAAbb,YAAAA,EAAsB+B,YAAtB/B,MAAAA,EAAAA,KAAAA,EACF,EAEC4B,SAAKN,EAAAA,IAAAA,EAPDO,CAQP,CACD,CACH,CAAA,EAEF,aAAc1B,EAAa,gBAAkB,GAC7C,YAAaA,EAAa,eAAiB,GAC3C,KAAAvB,EACA,gBAAiByB,EACjB,aAAcO,EACd,cAAeD,EACf,YAAa,IAAYb,OAAAA,OAAAA,EAAAA,EAASe,UAATf,YAAAA,EAAkBgB,YAAW,CAAA,EAEvDS,EAAA,KAAAS,EAAA,CAAM,IAAKlC,EAAU,MAAO,uBAC3B,SAAA,CAACyB,EAAAA,KAAAU,EAAA,CACC,OAAQ,iBACR,eAAerD,GAAAA,YAAAA,EAAMoC,OAAQ,GAC7B,SAAUD,EAEV,SAAA,CAAAU,EAAA,IAACQ,EAAW,MAAX,CAAiB,MAAO,MACtB,SACH,yBAAA,QACCA,EAAW,MAAX,CAAiB,MAAO,QACtB,SACH,6BAAA,QACCA,EAAW,MAAX,CAAiB,MAAO,aACtB,SACH,0BAAA,CAAA,CAAA,EACF,EACAR,MAACS,GAAO,QAAS,IAAYpC,OAAAA,OAAAA,EAAAA,EAASe,UAATf,YAAAA,EAAkBqC,SAC5C,SACH,IAAA,CAAA,CAAA,CACF,CAAA,CAAA,EACF,CAAA,CAGN,EACAxC,EAASH,WAAa4C,YAAiB1C,EAAAF,WAAA,CAAA,GAAAE,EAAAF,WAAA6C,KAAA,CAAA,IAAA3C,EAAAA,EAAAF,aAAAE,YAAAA,EAAA2C,KAAAC,OAAA,CAAAC,eAAA,qBAAA,IAAA7C,GAAAA,EAAAA,EAAAF,aAAAE,YAAAA,EAAA2C,OAAA3C,YAAAA,EAAA4C,MAAAA,CAAA,CAAA,YAAA3C,EAAAH,WAAA,CAAA,GAAAG,EAAAH,WAAA6C,KAAA,CAAA,IAAA1C,EAAAA,EAAAH,aAAAG,YAAAA,EAAA0C,KAAAC,OAAA,CAAAC,eAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,mBAAA,IAAA5C,GAAAA,EAAAA,EAAAH,aAAAG,YAAAA,EAAA0C,OAAA1C,YAAAA,EAAA2C,MAAAA,CAAA,CAAA"}