{"version":3,"file":"index-CjBS1QGy.js","sources":["../../../../libs/ds-progress/src/Spinner/defaults.ts","../../../../libs/ds-progress/src/Spinner/Spinner.tsx","../../../../libs/ds-progress/src/index.ts"],"sourcesContent":["//export const getSpinnerColorDefault = () =>\nimport { dsI18n } from '@skatteetaten/ds-core-utils';\n\nimport {\n  SpinnerColor,\n  SpinnerTitlePostion,\n  SpinnerSize,\n} from './Spinner.types';\n\nexport const getSpinnerTitlePositionDefault = (): SpinnerTitlePostion =>\n  'bottom';\nexport const getSpinnerSizeDefault = (): SpinnerSize => 'medium';\nexport const getSpinnerColorDefault = (): SpinnerColor => 'black';\nexport const getSpinnerLabelDefault = (): string =>\n  dsI18n.t('ds_progress:spinner.LoadingLabel');\n","import { JSX, useEffect, useId, useState } from 'react';\n\nimport { getCommonClassNameDefault } from '@skatteetaten/ds-core-utils';\n\nimport {\n  getSpinnerColorDefault,\n  getSpinnerTitlePositionDefault,\n  getSpinnerSizeDefault,\n  getSpinnerLabelDefault,\n} from './defaults';\nimport { SpinnerProps } from './Spinner.types';\n\nimport styles from './Spinner.module.scss';\n\nexport const Spinner = ({\n  ref,\n  id,\n  className = getCommonClassNameDefault(),\n  lang,\n  'data-testid': dataTestId,\n  classNames,\n  color = getSpinnerColorDefault(),\n  titlePosition = getSpinnerTitlePositionDefault(),\n  size = getSpinnerSizeDefault(),\n  hideTitle,\n  percentComplete,\n  children = getSpinnerLabelDefault(),\n}: SpinnerProps): JSX.Element => {\n  const [isRendered, setIsRendered] = useState<boolean>(false);\n  const generatedId = useId();\n  const titleId = `title-${id ?? generatedId}`;\n\n  /**\n   * useEffect sørger for at div med role=status blir rendret før children.\n   * Dette gjør at skjermleser vet at den skal lytte etter tekster som må leses opp.\n   */\n  useEffect(() => {\n    setTimeout(() => {\n      setIsRendered(true);\n    }, 0);\n  }, []);\n\n  const positionClassname =\n    titlePosition === 'right'\n      ? styles.spinner_flexRow\n      : styles.spinner_flexColumn;\n\n  const concatenatedClassnames = `${\n    styles.spinner\n  } ${positionClassname} ${className} ${classNames?.container ?? ''}`.trim();\n  const isInPercentageMode = percentComplete !== undefined;\n\n  const getAriaBusyStatus = (): 'true' | 'false' | undefined => {\n    if (!isInPercentageMode) return undefined;\n\n    if (percentComplete < 100) {\n      return 'true';\n    } else {\n      return 'false';\n    }\n  };\n  return (\n    <>\n      <div\n        ref={ref}\n        aria-labelledby={isInPercentageMode ? titleId : undefined}\n        aria-live={!isInPercentageMode ? 'polite' : undefined}\n        aria-atomic={!isInPercentageMode ? 'true' : undefined}\n        role={isInPercentageMode ? 'progressbar' : undefined}\n        aria-valuemin={isInPercentageMode ? 0 : undefined}\n        aria-valuemax={isInPercentageMode ? 100 : undefined}\n        aria-busy={getAriaBusyStatus()}\n        aria-valuenow={percentComplete}\n        id={id}\n        className={concatenatedClassnames}\n        lang={lang}\n        data-testid={dataTestId}\n        data-size={size}\n        data-color={color}\n      >\n        <div\n          className={`${styles.spinnerAnimation} ${\n            classNames?.animation ?? ''\n          }`.trim()}\n        />\n        <span\n          id={titleId}\n          className={`${styles.spinnerTitle} ${\n            hideTitle ? styles.srOnly : ''\n          } ${\n            titlePosition === 'bottom' ? styles.spinnerTitle_centerText : ''\n          } ${classNames?.title ?? ''}`.trim()}\n        >\n          {isInPercentageMode &&\n            `${getSpinnerLabelDefault()} (${percentComplete} %)`}\n          {!isInPercentageMode && isRendered && children}\n        </span>\n      </div>\n      {isInPercentageMode && (\n        <div\n          className={styles.srOnly}\n          aria-atomic={'true'}\n          aria-live={'polite'}\n        >\n          {`${percentComplete} %`}\n        </div>\n      )}\n    </>\n  );\n};\n\nSpinner.displayName = 'Spinner';\n\nexport {\n  getSpinnerColorDefault,\n  getSpinnerSizeDefault,\n  getSpinnerTitlePositionDefault,\n  getSpinnerLabelDefault,\n};\n","export * from './Spinner/Spinner';\nexport * from './Spinner/Spinner.types';\n"],"names":["cov_1kq6ep7op2","dsI18n","getSpinnerTitlePositionDefault","s","getSpinnerSizeDefault","getSpinnerColorDefault","getSpinnerLabelDefault","t","cov_24ed8edmps","actualCoverage","Spinner","id","className","lang","getCommonClassNameDefault","classNames","dataTestId","color","titlePosition","size","hideTitle","percentComplete","children","isRendered","setIsRendered","generatedId","useState","titleId","useEffect","setTimeout","concatenatedClassnames","spinner","positionClassname","styles","container","isInPercentageMode","getAriaBusyStatus","jsxs","ref","b","role","srOnly","jsx","displayName","cov_11p84ama68"],"mappings":"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"}