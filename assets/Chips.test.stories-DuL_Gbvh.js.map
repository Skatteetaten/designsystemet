{"version":3,"file":"Chips.test.stories-DuL_Gbvh.js","sources":["../../../../apps/ds-playground/src/stories/__tests__/Chips.test.stories.tsx"],"sourcesContent":["import { useState } from 'react';\n\nimport { Meta, StoryFn, StoryObj } from '@storybook/react-vite';\nimport { expect, userEvent, within } from 'storybook/test';\n\nimport { Chips, ChipsProps } from '@skatteetaten/ds-collections';\nimport { dsI18n } from '@skatteetaten/ds-core-utils';\n\nconst elementId = 'htmlId';\n\nconst meta = {\n  component: Chips,\n  title: 'Tester/Chips',\n  argTypes: {\n    // Baseprops\n    ref: { table: { disable: true } },\n    className: { table: { disable: true } },\n    id: { table: { disable: true } },\n    lang: { table: { disable: true } },\n    'data-testid': { table: { disable: true } },\n    // Props\n    children: { table: { disable: true } },\n    // Aria\n    ariaLabel: { table: { disable: true } },\n    ariaLabelledBy: { table: { disable: true } },\n  },\n  tags: ['test'],\n  parameters: {\n    imageSnapshot: { disableSnapshot: false },\n  },\n} satisfies Meta<typeof Chips>;\nexport default meta;\ntype Story = StoryObj<typeof meta>;\n\nconst defaultArgs: ChipsProps = {\n  children: [\n    <Chips.Toggle key={'trd'} showCheckmark={false}>\n      {'Trondheim'}\n    </Chips.Toggle>,\n    <Chips.Toggle key={'bgo'}>{'Bergen'}</Chips.Toggle>,\n    <Chips.Removable key={'osl'}>{'Oslo'}</Chips.Removable>,\n  ],\n};\n\nconst defaultLocations = ['Trondheim', 'Bergen', 'Oslo'];\n\nconst TemplateWithOnClose: StoryFn<typeof Chips> = () => {\n  const [locations, setLocations] = useState<string[]>(defaultLocations);\n\n  const handleLocationRemove = (location: string): void => {\n    setLocations((prevLocations) =>\n      prevLocations.filter((l) => l !== location)\n    );\n  };\n\n  return (\n    <Chips>\n      {locations.map((location: string) => (\n        <Chips.Removable\n          key={location}\n          onClose={() => handleLocationRemove(location)}\n        >\n          {location}\n        </Chips.Removable>\n      ))}\n    </Chips>\n  );\n};\n\nexport const WithRef = {\n  name: 'With Ref (FA1)',\n  args: {\n    ref: (instance: HTMLUListElement | null): void => {\n      if (instance) {\n        instance.id = 'dummyIdForwardedFromRef';\n      }\n    },\n    ...defaultArgs,\n  },\n  argTypes: {\n    ref: { table: { disable: false } },\n  },\n  parameters: {\n    imageSnapshot: { disableSnapshot: true },\n  },\n  play: async ({ canvasElement }): Promise<void> => {\n    const canvas = within(canvasElement);\n    const container = canvas.getByRole('list');\n    await expect(container).toHaveAttribute('id', 'dummyIdForwardedFromRef');\n  },\n} satisfies Story;\n\nexport const WithAttributes = {\n  name: 'With Attributes(FA2-5)',\n  args: {\n    id: elementId,\n    className: 'dummyClassname',\n    lang: 'nb',\n    'data-testid': '123ID',\n    ...defaultArgs,\n  },\n  argTypes: {\n    id: { table: { disable: false } },\n    className: { table: { disable: false } },\n    lang: { table: { disable: false } },\n    'data-testid': { table: { disable: false } },\n  },\n  parameters: {\n    a11y: {\n      test: 'off',\n    },\n  },\n  play: async ({ canvasElement }): Promise<void> => {\n    const canvas = within(canvasElement);\n    const container = canvas.getByRole('list');\n    await expect(container).toHaveClass('dummyClassname');\n    await expect(container).toHaveAttribute('id', elementId);\n    await expect(container).toHaveAttribute('lang', 'nb');\n    await expect(container).toHaveAttribute('data-testid', '123ID');\n  },\n} satisfies Story;\n\nexport const Defaults = {\n  name: 'Defaults (B2 delvis)',\n  args: defaultArgs,\n} satisfies Story;\n\nconst label = 'Kontorsted';\n\nexport const WithAriaLabel = {\n  name: 'With AriaLabel (B2 delvis)',\n  args: {\n    ariaLabel: label,\n    ...defaultArgs,\n  },\n  argTypes: {\n    ariaLabel: { table: { disable: false } },\n  },\n  parameters: {\n    imageSnapshot: { disableSnapshot: true },\n  },\n  play: async ({ canvasElement }): Promise<void> => {\n    const canvas = within(canvasElement);\n    const container = canvas.getByRole('list');\n    await expect(container).toHaveAttribute('aria-label', label);\n  },\n} satisfies Story;\n\nconst labelId = 'chipsLabelId';\n\nexport const WithAriaLabelledBy = {\n  name: 'With AriaLabelledBy',\n  args: {\n    ariaLabelledBy: labelId,\n    ...defaultArgs,\n  },\n  argTypes: {\n    ariaLabelledBy: { table: { disable: false } },\n  },\n  parameters: {\n    imageSnapshot: { disableSnapshot: true },\n  },\n  play: async ({ canvasElement }): Promise<void> => {\n    const canvas = within(canvasElement);\n    const container = canvas.getByRole('list');\n    await expect(container).toHaveAttribute('aria-labelledby', labelId);\n  },\n} satisfies Story;\n\nexport const WithCloseAndFocusNext = {\n  name: 'With Close and Focus Next (B3)',\n  render: TemplateWithOnClose,\n  play: async ({ canvasElement }): Promise<void> => {\n    const canvas = within(canvasElement);\n    let chips = canvas.getAllByRole('button');\n    await expect(chips.length).toEqual(3);\n\n    await userEvent.click(chips[1]);\n    chips = canvas.getAllByRole('button');\n    await expect(chips.length).toEqual(2);\n    await expect(chips[1]).toHaveFocus();\n  },\n} satisfies Story;\n\nexport const WithCloseLastChip = {\n  name: 'With Close Last Chip (B3)',\n  render: TemplateWithOnClose,\n  play: async ({ canvasElement }): Promise<void> => {\n    const canvas = within(canvasElement);\n    const chips = canvas.getAllByRole('button');\n    await expect(chips.length).toEqual(3);\n    await userEvent.click(chips[2]);\n    await userEvent.click(chips[1]);\n    await userEvent.click(chips[0]);\n    const span = canvas.getByText(dsI18n.t('ds_collections:chips.NoFilters'));\n    await expect(span).toHaveFocus();\n  },\n} satisfies Story;\n"],"names":["expect","within","elementId","meta","component","Chips","title","argTypes","ref","table","disable","className","id","lang","children","ariaLabel","ariaLabelledBy","tags","parameters","imageSnapshot","disableSnapshot","defaultArgs","jsx","defaultLocations","TemplateWithOnClose","locations","setLocations","useState","handleLocationRemove","location","prevLocations","filter","l","map","WithRef","name","args","instance","play","canvasElement","container","getByRole","toHaveAttribute","WithAttributes","a11y","test","toHaveClass","Defaults","label","WithAriaLabel","labelId","WithAriaLabelledBy","WithCloseAndFocusNext","render","canvas","chips","getAllByRole","length","toEqual","userEvent","click","toHaveFocus","WithCloseLastChip","span","getByText","dsI18n","t","docs","source","originalSource"],"mappings":"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"}