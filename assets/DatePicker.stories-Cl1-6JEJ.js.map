{"version":3,"file":"DatePicker.stories-Cl1-6JEJ.js","sources":["../../../../apps/ds-playground/src/stories/components/DatePicker.stories.tsx"],"sourcesContent":["import { useState, JSX } from 'react';\n\nimport { Meta, StoryObj } from '@storybook/react-vite';\nimport { isWithinInterval, format } from 'date-fns';\nimport { useArgs } from 'storybook/preview-api';\n\nimport {\n  getAutoCompletePropDescription,\n  getCommonAutoCompleteDefault,\n  getCommonFormVariantDefault,\n  getHelpTitleHelpSvgDefault,\n} from '@skatteetaten/ds-core-utils';\nimport {\n  DatePicker,\n  getDatePickerDateFormat,\n  getDatePickerPlaceholderDefault,\n  TextArea,\n} from '@skatteetaten/ds-forms';\n\nimport { category, htmlEventDescription } from '../../../.storybook/helpers';\nimport { SystemSVGPaths } from '../utils/icon.systems';\nimport { exampleParameters } from '../utils/stories.utils';\n\nconst meta = {\n  component: DatePicker,\n  title: 'Komponenter/DatePicker',\n  argTypes: {\n    // Props\n    classNames: { control: false, table: { category: category.props } },\n    value: { table: { category: category.props }, control: 'date' },\n    description: { table: { category: category.props } },\n    dateFormat: {\n      table: {\n        category: category.props,\n        defaultValue: { summary: getDatePickerDateFormat() },\n      },\n    },\n    label: { table: { category: category.props } },\n    disabledDates: { table: { category: category.props } },\n    errorMessage: { table: { category: category.props } },\n    hasSpacing: { table: { category: category.props } },\n    helpSvgPath: {\n      options: Object.keys(SystemSVGPaths),\n      mapping: SystemSVGPaths,\n      table: {\n        category: category.props,\n        defaultValue: { summary: 'HelpSimpleSVGpath' },\n      },\n    },\n    helpText: { control: 'text', table: { category: category.props } },\n    hideLabel: { table: { category: category.props } },\n    initialPickerDate: { table: { category: category.props }, control: 'date' },\n    minDate: { table: { category: category.props }, control: 'date' },\n    maxDate: { table: { category: category.props }, control: 'date' },\n    showRequiredMark: {\n      table: { category: category.props },\n      description:\n        'Om obligatorisk skjemafelt skal markeres med stjerne. Forutsetter at required er tatt i bruk. <strong>Deprecated:</strong> Prop skal fjernes ved lansering av neste major versjon. Les mer om mønstre for obligatoriske felt på <a href=\"https://www.skatteetaten.no/stilogtone/monster/interaksjon/obligatoriske-felt/\">stil og tone</a>.',\n    },\n    titleHelpSvg: {\n      table: {\n        category: category.props,\n        defaultValue: { summary: getHelpTitleHelpSvgDefault() },\n      },\n    },\n    variant: {\n      control: 'inline-radio',\n      table: {\n        category: category.props,\n        defaultValue: { summary: getCommonFormVariantDefault() },\n      },\n    },\n    // HTML\n    autoComplete: {\n      table: {\n        category: category.htmlAttribute,\n        defaultValue: { summary: getCommonAutoCompleteDefault() },\n        type: { summary: 'string' },\n      },\n      type: 'string',\n      description: getAutoCompletePropDescription(),\n    },\n    disabled: { table: { category: category.htmlAttribute } },\n    name: { table: { category: category.htmlAttribute } },\n    placeholder: {\n      table: {\n        category: category.htmlAttribute,\n        defaultValue: { summary: getDatePickerPlaceholderDefault() },\n      },\n    },\n    readOnly: { table: { category: category.htmlAttribute } },\n    required: {\n      control: 'boolean',\n      table: { category: category.htmlAttribute },\n    },\n    // Events\n    onBlur: { ...htmlEventDescription },\n    onChange: { ...htmlEventDescription },\n    onFocus: { ...htmlEventDescription },\n    onHelpToggle: { table: { category: category.event } },\n    onSelectDate: { table: { category: category.event } },\n  },\n  args: {\n    label: 'Fødselsdato',\n  },\n} satisfies Meta<typeof DatePicker>;\n\nexport default meta;\ntype Story = StoryObj<typeof meta>;\n\nexport const Preview: Story = {\n  render: (args): JSX.Element => {\n    const [, setArgs] = useArgs();\n    /* Fordi date control konverterer datoen til et UNIX-tidsstempel når verdien endres,\n     må den konverteres til et date objekt. Dette er en kjent begrensing som vil bli fikset\n    en gang i fremtiden står det i Storybook sin dokumentasjon over Controls. */\n\n    // value settes til null dersom undefined for å unngå advarsel om controlled/uncontrolled.\n    args.value = !args.value ? null : new Date(args.value);\n    args.minDate =\n      args.minDate === undefined ? undefined : new Date(args.minDate);\n    args.maxDate =\n      args.maxDate === undefined ? undefined : new Date(args.maxDate);\n    args.initialPickerDate =\n      args.initialPickerDate === undefined\n        ? undefined\n        : new Date(args.initialPickerDate);\n\n    const handleSelectDate = (date: Date | null): void => {\n      args.onSelectDate?.(date);\n      setArgs({ value: date });\n    };\n\n    return <DatePicker {...args} onSelectDate={handleSelectDate} />;\n  },\n} satisfies Story;\n\nexport const Examples: Story = {\n  render: (_args): JSX.Element => {\n    const [value, setValue] = useState<Date | null>(null);\n    const [inputValue, setInputValue] = useState('');\n    const [errorMessage, setErrorMessage] = useState('');\n\n    const minDate = new Date(2024, 6, 1);\n    const maxDate = new Date(2024, 12, 1);\n\n    // Ved å lytte på onSelectDate får man tilgang til dato (eller null dersom datoen i feltet ikke er gyldig).\n    const handleSelect = (date: Date | null): void => {\n      if (date === null) {\n        const errorMessage =\n          inputValue !== ''\n            ? 'Datoen har ikke rett format. Skriv slik: 17.05.2024.'\n            : 'Dato må fylles ut eller velges.';\n        setErrorMessage(errorMessage);\n      } else if (!isWithinInterval(date, { start: minDate, end: maxDate })) {\n        // isWithinInterval og format kommer fra date-fns\n        setErrorMessage(\n          `Dato må være mellom ${format(minDate, 'dd.MM.yyyy')} og ${format(\n            maxDate,\n            'dd.MM.yyyy.'\n          )}.`\n        );\n      } else {\n        setErrorMessage('');\n      }\n\n      setValue(date);\n    };\n    return (\n      <>\n        <DatePicker\n          label={'Fødselsdato'}\n          value={value}\n          errorMessage={errorMessage}\n          maxDate={maxDate}\n          minDate={minDate}\n          hasSpacing\n          required\n          onSelectDate={handleSelect}\n          onChange={(e) => setInputValue(e.target.value)}\n        />\n        <TextArea className={'textField300'} label={'Andre opplysninger'} />\n      </>\n    );\n  },\n} satisfies Story;\nExamples.parameters = exampleParameters;\n"],"names":["useArgs","meta","component","DatePicker","title","argTypes","classNames","control","table","category","props","value","description","dateFormat","defaultValue","summary","getDatePickerDateFormat","label","disabledDates","errorMessage","hasSpacing","helpSvgPath","options","Object","keys","SystemSVGPaths","mapping","helpText","hideLabel","initialPickerDate","minDate","maxDate","showRequiredMark","titleHelpSvg","getHelpTitleHelpSvgDefault","variant","getCommonFormVariantDefault","autoComplete","htmlAttribute","getCommonAutoCompleteDefault","type","getAutoCompletePropDescription","disabled","name","placeholder","getDatePickerPlaceholderDefault","readOnly","required","onBlur","htmlEventDescription","onChange","onFocus","onHelpToggle","event","onSelectDate","args","Preview","render","setArgs","Date","undefined","handleSelectDate","date","jsx","Examples","_args","setValue","useState","inputValue","setInputValue","setErrorMessage","handleSelect","isWithinInterval","start","end","format","jsxs","Fragment","e","target","TextArea","parameters","exampleParameters","docs","source","originalSource"],"mappings":"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"}