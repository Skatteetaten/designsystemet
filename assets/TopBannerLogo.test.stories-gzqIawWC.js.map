{"version":3,"file":"TopBannerLogo.test.stories-gzqIawWC.js","sources":["../../../../libs/ds-layout/src/TopBannerLogo/TopBannerLogo.types.ts","../../../../apps/ds-playground/src/stories/__tests__/TopBannerLogo.test.stories.tsx"],"sourcesContent":["import { RefObject } from 'react';\n\nimport { BaseProps } from '@skatteetaten/ds-core-utils';\n\nexport const logoAsArr = ['a', 'div'] as const;\nexport type LogoAs = (typeof logoAsArr)[number];\n\nexport type LogoRefHandle = {\n  logoRef: RefObject<HTMLAnchorElement | HTMLDivElement>;\n};\n\ntype TopBannerLogoDiscrimatedProps =\n  | {\n      /** Overskriver default logo. Må også angi logo for mobilvisning, alt-tekst og url. */\n      logo?: never;\n      /** Overskriver default logo for mobilvisning. */\n      mobileLogo?: never;\n      /** Overskriver default alt-tekst for logo kun dersom logo og mobileLogo også endres. NB! Alt-tekst må være tilpasset om logo er en lenke eller ikke.*/\n      alt?: never;\n      /** Overskriver default URL. */\n      href?: never;\n      /** HTML-tag for Logo. Styrer om logo skal kodes som en lenke eller ikke. Hvis default logo endres til å ikke være en lenke, så blir logoAltText automatisk tilpasset. */\n      as?: LogoAs;\n    }\n  | {\n      /** Overskriver default logo. Må også angi logo for mobilvisning, alt-tekst og url. */\n      logo: string;\n      /** Overskriver default logo for mobilvisning. */\n      mobileLogo: string;\n      /** Overskriver default alt-tekst for logo kun dersom logo og mobileLogo også endres. NB! Alt-tekst må være tilpasset om logo er en lenke eller ikke.*/\n      alt: string;\n      /** Overskriver default URL. */\n      href: string;\n      /** HTML-tag for Logo. Styrer om logo skal kodes som en lenke eller ikke. Hvis default logo endres til å ikke være en lenke, så blir logoAltText automatisk tilpasset. */\n      as?: Extract<LogoAs, 'a'>;\n    }\n  | {\n      /** Overskriver default logo. Må også angi logo for mobilvisning, alt-tekst og url. */\n      logo: string;\n      /** Overskriver default logo for mobilvisning. */\n      mobileLogo: string;\n      /** Overskriver default alt-tekst for logo kun dersom logo og mobileLogo også endres. NB! Alt-tekst må være tilpasset om logo er en lenke eller ikke.*/\n      alt: string;\n      /** Overskriver default URL. */\n      href?: never;\n      /** HTML-tag for Logo. Styrer om logo skal kodes som en lenke eller ikke. Hvis default logo endres til å ikke være en lenke, så blir logoAltText automatisk tilpasset. */\n      as?: Extract<LogoAs, 'div'>;\n    };\n\nexport type TopBannerLogoProps = TopBannerLogoDiscrimatedProps & BaseProps;\n","import { dsI18n } from '@skatteetaten/ds-core-utils';\nimport { Meta, StoryObj } from '@storybook/react';\nimport { expect, within } from '@storybook/test';\n\n// eslint-disable-next-line @nx/enforce-module-boundaries\nimport { wrapper } from './testUtils/storybook.testing.utils';\n// eslint-disable-next-line @nx/enforce-module-boundaries\nimport { TopBannerLogo } from '../../../../../libs/ds-layout/src/TopBannerLogo/TopBannerLogo';\n// eslint-disable-next-line @nx/enforce-module-boundaries\nimport {\n  logoAsArr,\n  LogoRefHandle,\n  TopBannerLogoProps,\n} from '../../../../../libs/ds-layout/src/TopBannerLogo/TopBannerLogo.types';\nimport customLogo from '../../assets/custom-logo.svg';\nimport customMobileLogo from '../../assets/custom-mobile-logo.svg';\n\nconst meta = {\n  component: TopBannerLogo,\n  title: 'Tester/TopBanner/TopBannerLogo (intern)',\n  argTypes: {\n    // Baseprops\n    key: { table: { disable: true } },\n    ref: { table: { disable: true } },\n    className: { table: { disable: true } },\n    id: { table: { disable: true } },\n    lang: { table: { disable: true } },\n    'data-testid': { table: { disable: true } },\n    // Props\n    as: {\n      table: { disable: true },\n      options: [...logoAsArr],\n      control: 'inline-radio',\n    },\n    logo: {\n      table: { disable: true },\n      control: 'select',\n      options: ['', customLogo],\n    },\n    mobileLogo: {\n      table: { disable: true },\n      control: 'select',\n      options: ['', customMobileLogo],\n    },\n    // HTML\n    alt: { table: { disable: true } },\n    href: { table: { disable: true } },\n  },\n} satisfies Meta<typeof TopBannerLogo>;\nexport default meta;\ntype Story = StoryObj<typeof meta>;\n\nconst logoLinkText = dsI18n.t('ds_layout:topbanner.SkeLogoLinkText');\nconst logoText = dsI18n.t('ds_layout:topbanner.SkeLogoImageText');\nconst defaultArgs: TopBannerLogoProps = {};\n\nexport const WithRef = {\n  name: 'With Ref (FA1)',\n  args: {\n    ...defaultArgs,\n    ref: (instance: LogoRefHandle | null): void => {\n      if (instance && instance.logoRef && instance.logoRef.current) {\n        instance.logoRef.current.id = 'dummyIdForwardedFromRef';\n      }\n    },\n  },\n  argTypes: {\n    ref: { table: { disable: false } },\n  },\n  parameters: {\n    imageSnapshot: { disable: true },\n  },\n  play: async ({ canvasElement }): Promise<void> => {\n    const canvas = within(canvasElement);\n    const link = canvas.getByRole('link');\n    await expect(link).toHaveAttribute('id', 'dummyIdForwardedFromRef');\n  },\n} satisfies Story;\n\nexport const WithAttributes = {\n  name: 'With Attributes (FA2-5)',\n  args: {\n    ...defaultArgs,\n    id: 'htmlId',\n    className: 'dummyClassname',\n    lang: 'en',\n    'data-testid': '123ID',\n  },\n  argTypes: {\n    id: { table: { disable: false } },\n    className: { table: { disable: false } },\n    lang: { table: { disable: false } },\n    'data-testid': { table: { disable: false } },\n  },\n  play: async ({ canvasElement }): Promise<void> => {\n    const canvas = within(canvasElement);\n    const link = canvas.getByRole('link');\n    await expect(link).toHaveAttribute('id', 'htmlId');\n    await expect(link).toHaveClass('dummyClassname');\n    await expect(link).toHaveAttribute('lang', 'en');\n    await expect(link).toHaveAttribute('data-testid', '123ID');\n  },\n} satisfies Story;\n\nexport const Defaults = {\n  name: 'Defaults (A8, A9)',\n  args: {\n    ...defaultArgs,\n  },\n  argTypes: {},\n  parameters: {\n    imageSnapshot: {\n      focus: `${wrapper} a`,\n    },\n  },\n  play: async ({ canvasElement }): Promise<void> => {\n    const canvas = within(canvasElement);\n    const link = canvas.getByRole('link');\n    await expect(link).toBeInTheDocument();\n    await expect(link).toHaveAttribute('href', 'https://www.skatteetaten.no/');\n    const logo = canvas.getByRole('img', {\n      name: logoLinkText,\n    });\n    await expect(logo).toBeInTheDocument();\n  },\n} satisfies Story;\n\nexport const WithAs = {\n  name: 'With As (A8)',\n  args: {\n    ...defaultArgs,\n    as: 'div',\n  },\n  argTypes: {\n    as: { table: { disable: false } },\n  },\n  parameters: {\n    imageSnapshot: { disable: true },\n  },\n  play: async ({ canvasElement }): Promise<void> => {\n    const canvas = within(canvasElement);\n    // eslint-disable-next-line testing-library/no-node-access\n    await expect(canvasElement.querySelector('a')).not.toBeInTheDocument();\n    const logo = canvas.getByRole('img', {\n      name: logoText,\n    });\n    await expect(logo).toBeInTheDocument();\n  },\n} satisfies Story;\n\nexport const WithLogoMobileLogoAltAndHref = {\n  name: 'With Logo, MobileLogo, Alt, And Href (A8, A10)',\n  args: {\n    ...defaultArgs,\n    as: 'a',\n    logo: customLogo,\n    mobileLogo: customMobileLogo,\n    alt: 'custom alt text',\n    href: '#',\n  },\n  argTypes: {\n    logo: { table: { disable: false } },\n    mobileLogo: { table: { disable: false } },\n    alt: { table: { disable: false } },\n    href: { table: { disable: false } },\n  },\n  play: async ({ canvasElement }): Promise<void> => {\n    const canvas = within(canvasElement);\n    const link = canvas.getByRole('link', {\n      name: 'custom alt text',\n    });\n    await expect(link).toBeInTheDocument();\n    await expect(link).toHaveAttribute('href', '#');\n  },\n} satisfies Story;\n\nexport const WithMobileScreen = {\n  name: 'With Small Screen',\n  args: {\n    ...defaultArgs,\n  },\n  parameters: {\n    viewport: {\n      defaultViewport: '--mobile',\n    },\n  },\n} satisfies Story;\n\nexport const WithBreakpointM = {\n  name: 'With Breakpoint-m',\n  args: {\n    ...defaultArgs,\n  },\n  parameters: {\n    viewport: {\n      defaultViewport: '--breakpoint-m',\n    },\n  },\n} satisfies Story;\n"],"names":["logoAsArr","meta","component","TopBannerLogo","title","argTypes","key","table","disable","ref","className","id","lang","as","options","control","logo","customLogo","mobileLogo","customMobileLogo","alt","href","logoLinkText","dsI18n","t","logoText","defaultArgs","WithRef","name","args","instance","logoRef","current","parameters","imageSnapshot","play","canvasElement","link","within","getByRole","expect","toHaveAttribute","WithAttributes","toHaveClass","Defaults","focus","wrapper","canvas","toBeInTheDocument","WithAs","querySelector","not","WithLogoMobileLogoAltAndHref","WithMobileScreen","viewport","defaultViewport","WithBreakpointM","docs","source","originalSource"],"mappings":"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"}