{"version":3,"file":"Card.test.stories-QVwSkVwZ.js","sources":["../../../../libs/ds-content/src/Card/Card.types.ts","../../../../apps/ds-playground/src/stories/__tests__/Card.test.stories.tsx"],"sourcesContent":["import { ComponentPropsWithoutRef, ReactNode, Ref } from 'react';\n\nimport { BaseProps, Color, Spacing } from '@skatteetaten/ds-core-utils';\n\nimport { CardActions } from './CardActions/CardActions';\nimport { CardAlert } from './CardAlert/CardAlert';\nimport { CardContent } from './CardContent/CardContent';\nimport { CardHeader } from './CardHeader/CardHeader';\n\nexport type CardSpacing =\n  | Extract<Spacing, 'xxs' | 'xs' | 's' | 'm' | 'l' | 'xl' | 'xxl' | 'mega'>\n  | 'responsive';\n\nexport const cardColorArr = [\n  'white',\n  'ochre',\n  'forest',\n  'burgundy',\n  'denim',\n  'graphite',\n] as const satisfies readonly Color[];\nexport type CardColor = (typeof cardColorArr)[number];\n\nexport interface CardComponentCommonProps extends BaseProps {\n  ref?: Ref<HTMLDivElement>;\n  /** Innholdet i komponenten. */\n  children: ReactNode;\n  /** Farge på border og bakgrunn. */\n  color?: CardColor;\n  ariaLabelledBy?: ComponentPropsWithoutRef<'section'>['aria-labelledby'];\n  /**\n   * Luft til innholdet i Card. For at den skal ta effekt må man bruke minst én\n   * av underkomponentene: Card.Header, Card.Content, Card.Actions.\n   */\n  spacing?: CardSpacing;\n}\n\nexport type CardProps = CardComponentCommonProps;\n\nexport interface CardComponent extends React.FC<CardProps> {\n  Alert: typeof CardAlert;\n  Actions: typeof CardActions;\n  Content: typeof CardContent;\n  Header: typeof CardHeader;\n}\n\nexport type CardContextProps = {\n  alertHeadingId?: string;\n};\n","import { StoryFn, Meta, StoryObj } from '@storybook/react-vite';\nimport { expect, within } from 'storybook/test';\n\nimport { Card, cardColorArr } from '@skatteetaten/ds-content';\nimport { Heading } from '@skatteetaten/ds-typography';\n\nconst meta = {\n  component: Card,\n  title: 'Tester/Card',\n  argTypes: {\n    // Baseprops\n    ref: { table: { disable: true } },\n    className: { table: { disable: true } },\n    id: { table: { disable: true } },\n    lang: { table: { disable: true } },\n    'data-testid': { table: { disable: true } },\n    // Props\n    children: {\n      table: { disable: true },\n      control: 'text',\n    },\n    color: { table: { disable: true } },\n    spacing: { table: { disable: true } },\n    // Aria\n    ariaLabelledBy: { table: { disable: true } },\n  },\n  tags: ['test'],\n  parameters: {\n    imageSnapshot: { disableSnapshot: false },\n  },\n} satisfies Meta<typeof Card>;\nexport default meta;\ntype Story = StoryObj<typeof meta>;\n\nconst defaultText =\n  'Gruppering av opplysninger i skjema, for eksempel inntekter, personer eller oppsummeringer.';\n\nconst defaultArgs = {\n  children: defaultText,\n};\n\nexport const WithRef = {\n  name: 'With Ref (FA1)',\n  args: {\n    ...defaultArgs,\n    ref: (instance: HTMLDivElement | null): void => {\n      if (instance) {\n        instance.id = 'dummyIdForwardedFromRef';\n      }\n    },\n  },\n  argTypes: {\n    ref: { table: { disable: false } },\n  },\n  parameters: {\n    imageSnapshot: { disableSnapshot: true },\n  },\n  play: async ({ canvasElement }): Promise<void> => {\n    const canvas = within(canvasElement);\n    const container = canvas.getAllByRole('generic')[1];\n    await expect(container).toHaveAttribute('id', 'dummyIdForwardedFromRef');\n  },\n} satisfies Story;\n\nexport const WithAttributes = {\n  name: 'With Attributes (FA2-5)',\n  args: {\n    ...defaultArgs,\n    id: 'htmlId',\n    className: 'dummyClassname',\n    lang: 'en',\n    'data-testid': '123ID',\n  },\n  argTypes: {\n    id: { table: { disable: false } },\n    className: { table: { disable: false } },\n    lang: { table: { disable: false } },\n    'data-testid': { table: { disable: false } },\n  },\n  parameters: {\n    a11y: {\n      test: 'off',\n    },\n  },\n  play: async ({ canvasElement }): Promise<void> => {\n    const canvas = within(canvasElement);\n    const card = canvas.getAllByRole('generic')[1];\n    await expect(card).toHaveClass('dummyClassname');\n    await expect(card).toHaveAttribute('id', 'htmlId');\n    await expect(card).toHaveAttribute('lang', 'en');\n    await expect(card).toHaveAttribute('data-testid', '123ID');\n  },\n} satisfies Story;\n\nexport const Defaults = {\n  name: 'Defaults (B1, B2)',\n  args: {\n    ...defaultArgs,\n  },\n  argTypes: {\n    children: { table: { disable: false } },\n  },\n  play: async ({ canvasElement }): Promise<void> => {\n    const canvas = within(canvasElement);\n    const container = canvas.getAllByRole('generic')[1];\n\n    const section = canvas.queryByRole('region');\n    await expect(section).not.toBeInTheDocument();\n    await expect(container).toBeInTheDocument();\n  },\n} satisfies Story;\n\nconst TemplateAllColors: StoryFn<typeof Card> = (args) => (\n  <>\n    {cardColorArr.map((color, index) => {\n      return (\n        <Card\n          {...args}\n          key={`card_${index}`}\n          className={'bottomSpacingXL'}\n          color={color}\n        >\n          <Card.Content>{args.children}</Card.Content>\n        </Card>\n      );\n    })}\n  </>\n);\n\nexport const AllColors = {\n  render: TemplateAllColors,\n  name: 'All Colors (A1, A2)',\n  args: {\n    ...defaultArgs,\n  },\n} satisfies Story;\n\nexport const WithAriaLabelledBy = {\n  name: 'With aria-labelledby (B1)',\n  argTypes: {\n    ariaLabelledBy: { table: { disable: false } },\n  },\n  args: {\n    ...defaultArgs,\n    ariaLabelledBy: 'dummyId',\n  },\n  parameters: {\n    imageSnapshot: { disableSnapshot: true },\n  },\n  play: async ({ canvasElement }): Promise<void> => {\n    const canvas = within(canvasElement);\n    const cardNote = canvas.getByRole('region');\n    await expect(cardNote).toHaveAttribute('aria-labelledby', 'dummyId');\n  },\n} satisfies Story;\n\nconst TemplateWithAlert: StoryFn<typeof Card> = (args) => (\n  <Card {...args}>\n    <Card.Alert title={'Informasjon'}>{'Alert message content'}</Card.Alert>\n    <Card.Header>\n      <Heading id={args.ariaLabelledBy} as={'h3'} level={3}>\n        {'Card Heading'}\n      </Heading>\n    </Card.Header>\n    <Card.Content>{args.children}</Card.Content>\n  </Card>\n);\n\nexport const WithAriaLabelledByAndCardAlert = {\n  render: TemplateWithAlert,\n  name: 'With ariaLabelledBy and Card.Alert',\n  args: {\n    ...defaultArgs,\n    ariaLabelledBy: 'dummyId',\n  },\n  play: async ({ canvasElement }): Promise<void> => {\n    const canvas = within(canvasElement);\n    const cardSection = canvas.getByRole('region');\n    const alertHeading = within(cardSection).getByRole('heading', {\n      name: 'Informasjon',\n    });\n\n    await expect(alertHeading).toBeInTheDocument();\n    await expect(cardSection).toHaveAttribute(\n      'aria-labelledby',\n      `${alertHeading.id} dummyId`\n    );\n  },\n} satisfies Story;\n"],"names":["cardColorArr","expect","within","meta","component","Card","title","argTypes","ref","table","disable","className","id","lang","children","control","color","spacing","ariaLabelledBy","tags","parameters","imageSnapshot","disableSnapshot","defaultText","defaultArgs","WithRef","name","args","instance","play","canvasElement","container","getAllByRole","toHaveAttribute","WithAttributes","a11y","test","card","toHaveClass","Defaults","canvas","section","queryByRole","not","toBeInTheDocument","TemplateAllColors","jsx","Fragment","map","index","AllColors","render","WithAriaLabelledBy","cardNote","getByRole","TemplateWithAlert","jsxs","Heading","WithAriaLabelledByAndCardAlert","cardSection","alertHeading","docs","source","originalSource"],"mappings":"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"}