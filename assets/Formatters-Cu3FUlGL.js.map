{"version":3,"file":"Formatters-Cu3FUlGL.js","sources":["../../../../apps/ds-playground/src/stories/formatters/Formatters.mdx"],"sourcesContent":["import { Canvas, Meta } from '@storybook/addon-docs/blocks';\nimport * as Formatters from './Formatters.stories';\n\n{/* <Meta title=\"Utilities/FormattersDoc\" /> */}\n\n<Meta of={Formatters} />\n\n# Hvordan bruke hjelpefunksjonen _formatter_\n\nDesignsystemet tilbyr en funksjon formatter som grupperer en rekke typer tall. I tillegg tilbys også en rekke wrapper-funksjoner som benytter formateringsfunksjonen og som gjør det enklere å håndtere de ulike talltypene. For å formatere inputfelter har designsystemet også en hook useFormattedInput.\n\n### Organisasjonsnummer\n\n```tsx\nimport { formatter } from '@skatteetaten/ds-core-utils';\n\nconst organisationNumber = formatter({\n  value: '123456789',\n  type: 'organisationNumber',\n});\nconsole.log(organisationNumber.value);\n// 123 456 789\n```\n\n### Fødselsnummer / d-nummer\n\n```tsx\nimport { formatter } from '@skatteetaten/ds-core-utils';\nconst nationalIdentityNumber = formatter({\n  value: '12029412345',\n  type: 'nationalIdentityNumber',\n});\nconsole.log(nationalIdentityNumber.value);\n// 120294 12345\n```\n\n### Bankkontonummer\n\n```tsx\nimport { formatter } from '@skatteetaten/ds-core-utils';\nconst bankAccountNumber = formatter({\n  value: '86011117947',\n  type: 'bankAccountNumber',\n});\n\nconsole.log(bankAccountNumber.value);\n// 8601 11 17947\n```\n\n### Telefonnummer\n\n```tsx\nimport { formatter } from '@skatteetaten/ds-core-utils';\nconst phoneNumber = formatter({\n  value: '11223344',\n  type: 'phoneNumber',\n});\nconsole.log(phoneNumber.value);\n// 11 22 33 44\n```\n\n### Beløp (Beta)\n\nFormatering av beløp er basert på [Intl.NumberFormat](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Intl/NumberFormat). Formateringsfunksjonen vil som standard følge [Skatteetatens skriveregler](https://www.skatteetaten.no/stilogtone/skrive/skriveregler/tall/), men det er også mulig å sende inn et options object som overstyrer instillingene til Intl.NumberFormat.\n\nInput kan være enten number eller string. Hvis input er string vil formatteren forsøke å tolke den som et tall i henhold til valgt locale. Hvis input ikke inneholder et gyldig tall så returneres input igjen som string uten noen endringer.\n\n```tsx\nimport { formatter, formatNumber } from '@skatteetaten/ds-core-utils';\nconst amount = formatter({\n  value: '1234567',\n  type: 'number',\n});\n// 1 234 567\n\nformatNumber('1234567');\n// 1 234 567\n\n//engelsk format med komma som tusenskille og punktum som desimalskille\nformatNumber(1234567, { locale: 'en-GB' });\n// 1,234,567\n\n// valuta blir NOK som default, men det er mulig med vilkårlige kombinasjoner av locale og currency\nconst result = formatNumber('12345.6', {\n  locale: 'en-GB',\n  style: 'currency',\n  currency: 'GBP',\n});\n// £12,345.60\n\nconst result = formatNumber('12345.6789', {\n  style: 'currency',\n});\n// 12 345,68 kr\n```\n\n## Grupperingshjelper for org.- fødsels-, konto- og telefonnummer\n\nFødselsnummer, organisasjonsnummer, kontonummer og telefonnummer viser grupperte siffer som skilles med mellomrom. Nevnte grupperingen er lik for alle språk. F.eks så grupperes organisasjonsnummer med tre og tre siffer. 123 456 789 Den generiske funksjonen tar imot alle typer tegn, fjerner alle tegn som ikke er gyldig med valgt type og retunerer siffer som er gruppert.\n\nF.eks \"234,456-890\" => \"123 456 789\"\n\nFordi formateringsfunksjonen ikke er en controlled component så må vi regne med at input til funksjonen alltid kan inneholde alle typer tegn. Det vil si at returnert verdi fra formateringsfunksjonen alltid må kunne tolkes korrekt hvis brukt som value prop til formatter-funksjonen en gang til.\n\n# Bruk\n\n## Definisjoner\n\n```tsx\ntype FormatTypes =\n  | 'number'\n  | 'nationalIdentityNumber'\n  | 'organisationNumber'\n  | 'bankAccountNumber'\n  | 'phoneNumber';\n\nconst maxLengths = {\n  nationalIdentityNumber: 11,\n  organisationNumber: 9,\n  bankAccountNumber: 11,\n  phoneNumber: 10,\n};\n\ntype FormatOptions = {\n  /* Nummerlignende streng som parses av formateringsrutinen etter bestemte regler.\n  Regler for parsingen er avhengig av valgt type. For andre typer enn number fjerner den ikke-numeriske tegn og\n  verifiserer at antall numeriske tegn er riktig i forhold til formatet. Hvis det er for mange tegn fjernes de\n  som er overflødig. For type=number henter vi ut desimaltegn og tusenseparator basert på locale, og benytter\n  disse for å tolke tall-verdien i strengen.\n  */\n  value: string;\n  /* bestemmer formatet og noen ganger maksimium-lengden på verdien som returneres */\n  type: FormatTypes;\n};\n\ntype FormattingResponse = {\n  /* Formatert tall som brukes for visning.\n  NB. value returnerer bindestrek som minustegn. Ikke unikode \\u2212 som\n  Intl.NumberFormat returnerer */\n  value: string;\n  /* Denne er med i returverdien hvis type er satt til \"number\".\n  Formatert tall med optional desimaltegn hvis tall er delvis skrevet. f.eks '2500,'\n  Tillater at et returnert tall skal inneholde desimalskilletegn. Skjer\n  i de tilfeller hvor formatering har skjedd før bruker er ferdig med å skrive tallet\n  F.eks når bruker vil skrive tallet \"300,5\" og bare har skrevet \"300,\"\n  */\n  valueWithDecimalTail?: string;\n};\n\nexport const formatter = ({ value, type, locale, options }: FormatOptions): FormattingResponse => {\n    ...\n}\n```\n\n# useFormattedInput Hook (Beta)\n\nHook for håndtering av formaterte input-felt med automatisk formatering og markørposisjonering. Støtter norske telefonnummer, organisasjonsnummer, fødselsnummer og kontonummer.\n\n## Funksjonalitet\n\n- **Automatisk formatering** under skriving\n- **Smart markørposisjonering** etter formatendringer\n- **Backspace/delete-håndtering** ved separatorgrenser\n- **Råverdi-utvinning** (bare siffer)\n- **Lengdevalidering** for spesifikke formater\n\n## Bruk\n\n```tsx\nimport { useFormattedInput } from '@skatteetaten/ds-core-utils';\n\nconst formatter = useFormattedInput({\n  type: 'phoneNumber',\n  initialValue: '12345678',\n});\n\n<TextField\n  value={formatter.value}\n  onChange={formatter.onChange}\n  onKeyDown={formatter.onKeyDown}\n/>;\n```\n\n## Støttede typer\n\n- `phoneNumber` - Norske telefonnummer (8 siffer)\n- `organisationNumber` - Organisasjonsnummer (9 siffer)\n- `nationalIdentityNumber` - Fødselsnummer (11 siffer)\n- `bankAccountNumber` - Kontonummer (11 siffer)\n\n## Returnerer\n\n- `value` - Formatert visningsverdi\n- `onChange` - Endringshåndterer\n- `onKeyDown` - Tastaturhåndterer\n- `rawValue` - Uformatert verdi (bare siffer)\n\n## Examples\n\n<Canvas of={Formatters.Formatters} />\n"],"names":["_createMdxContent","props","_components","_provideComponents","_jsxs","_Fragment","_jsx","Meta","Formatters","Canvas","Formatters.Formatters","MDXContent","MDXLayout"],"mappings":"2iBAKA,SAASA,EAAkBC,EAAO,CAChC,MAAMC,EAAc,CAClB,EAAG,IACH,KAAM,OACN,GAAI,KACJ,GAAI,KACJ,GAAI,KACJ,GAAI,KACJ,GAAI,KACJ,EAAG,IACH,IAAK,MACL,OAAQ,SACR,GAAI,KACJ,GAAGC,EAAkB,EACrB,GAAGF,EAAM,UACb,EACE,OAAOG,EAAAA,KAAMC,EAAAA,SAAW,CACtB,SAAU,CAAC;AAAA,EAAMC,EAAAA,IAAKC,EAAM,CAC1B,GAAIC,CACV,CAAK,EAAG;AAAA,EAAMJ,OAAMF,EAAY,GAAI,CAC9B,GAAI,2CACJ,SAAU,CAAC,kCAAmCI,MAAKJ,EAAY,GAAI,CACjE,SAAU,WAClB,CAAO,CAAC,CACR,CAAK,EAAG;AAAA,EAAMI,MAAKJ,EAAY,EAAG,CAC5B,SAAU,6SAChB,CAAK,EAAG;AAAA,EAAMI,MAAKJ,EAAY,GAAI,CAC7B,GAAI,sBACJ,SAAU,qBAChB,CAAK,EAAG;AAAA,EAAMI,MAAKJ,EAAY,IAAK,CAC9B,SAAUI,EAAAA,IAAKJ,EAAY,KAAM,CAC/B,UAAW,eACX,SAAU;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,CAClB,CAAO,CACP,CAAK,EAAG;AAAA,EAAMI,MAAKJ,EAAY,GAAI,CAC7B,GAAI,0BACJ,SAAU,0BAChB,CAAK,EAAG;AAAA,EAAMI,MAAKJ,EAAY,IAAK,CAC9B,SAAUI,EAAAA,IAAKJ,EAAY,KAAM,CAC/B,UAAW,eACX,SAAU;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,CAClB,CAAO,CACP,CAAK,EAAG;AAAA,EAAMI,MAAKJ,EAAY,GAAI,CAC7B,GAAI,kBACJ,SAAU,iBAChB,CAAK,EAAG;AAAA,EAAMI,MAAKJ,EAAY,IAAK,CAC9B,SAAUI,EAAAA,IAAKJ,EAAY,KAAM,CAC/B,UAAW,eACX,SAAU;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,CAClB,CAAO,CACP,CAAK,EAAG;AAAA,EAAMI,MAAKJ,EAAY,GAAI,CAC7B,GAAI,gBACJ,SAAU,eAChB,CAAK,EAAG;AAAA,EAAMI,MAAKJ,EAAY,IAAK,CAC9B,SAAUI,EAAAA,IAAKJ,EAAY,KAAM,CAC/B,UAAW,eACX,SAAU;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,CAClB,CAAO,CACP,CAAK,EAAG;AAAA,EAAMI,MAAKJ,EAAY,GAAI,CAC7B,GAAI,aACJ,SAAU,cAChB,CAAK,EAAG;AAAA,EAAME,OAAMF,EAAY,EAAG,CAC7B,SAAU,CAAC,qCAAsCI,MAAKJ,EAAY,EAAG,CACnE,KAAM,qGACN,IAAK,WACL,SAAU,mBAClB,CAAO,EAAG,mDAAoDI,MAAKJ,EAAY,EAAG,CAC1E,KAAM,mEACN,IAAK,WACL,SAAU,4BAClB,CAAO,EAAG,2GAA2G,CACrH,CAAK,EAAG;AAAA,EAAMI,MAAKJ,EAAY,EAAG,CAC5B,SAAU,gPAChB,CAAK,EAAG;AAAA,EAAMI,MAAKJ,EAAY,IAAK,CAC9B,SAAUI,EAAAA,IAAKJ,EAAY,KAAM,CAC/B,UAAW,eACX,SAAU;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,CAClB,CAAO,CACP,CAAK,EAAG;AAAA,EAAMI,MAAKJ,EAAY,GAAI,CAC7B,GAAI,+DACJ,SAAU,gEAChB,CAAK,EAAG;AAAA,EAAMI,MAAKJ,EAAY,EAAG,CAC5B,SAAU,qXAChB,CAAK,EAAG;AAAA,EAAMI,MAAKJ,EAAY,EAAG,CAC5B,SAAU,sCAChB,CAAK,EAAG;AAAA,EAAMI,MAAKJ,EAAY,EAAG,CAC5B,SAAU,uSAChB,CAAK,EAAG;AAAA,EAAMI,MAAKJ,EAAY,GAAI,CAC7B,GAAI,OACJ,SAAU,MAChB,CAAK,EAAG;AAAA,EAAMI,MAAKJ,EAAY,GAAI,CAC7B,GAAI,eACJ,SAAU,cAChB,CAAK,EAAG;AAAA,EAAMI,MAAKJ,EAAY,IAAK,CAC9B,SAAUI,EAAAA,IAAKJ,EAAY,KAAM,CAC/B,UAAW,eACX,SAAU;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,CAClB,CAAO,CACP,CAAK,EAAG;AAAA,EAAMI,MAAKJ,EAAY,GAAI,CAC7B,GAAI,8BACJ,SAAU,+BAChB,CAAK,EAAG;AAAA,EAAMI,MAAKJ,EAAY,EAAG,CAC5B,SAAU,kLAChB,CAAK,EAAG;AAAA,EAAMI,MAAKJ,EAAY,GAAI,CAC7B,GAAI,iBACJ,SAAU,gBAChB,CAAK,EAAG;AAAA,EAAME,OAAMF,EAAY,GAAI,CAC9B,SAAU,CAAC;AAAA,EAAME,OAAMF,EAAY,GAAI,CACrC,SAAU,CAACI,EAAAA,IAAKJ,EAAY,OAAQ,CAClC,SAAU,wBACpB,CAAS,EAAG,iBAAiB,CAC7B,CAAO,EAAG;AAAA,EAAME,OAAMF,EAAY,GAAI,CAC9B,SAAU,CAACI,EAAAA,IAAKJ,EAAY,OAAQ,CAClC,SAAU,2BACpB,CAAS,EAAG,wBAAwB,CACpC,CAAO,EAAG;AAAA,EAAME,OAAMF,EAAY,GAAI,CAC9B,SAAU,CAACI,EAAAA,IAAKJ,EAAY,OAAQ,CAClC,SAAU,6BACpB,CAAS,EAAG,uBAAuB,CACnC,CAAO,EAAG;AAAA,EAAME,OAAMF,EAAY,GAAI,CAC9B,SAAU,CAACI,EAAAA,IAAKJ,EAAY,OAAQ,CAClC,SAAU,mBACpB,CAAS,EAAG,gBAAgB,CAC5B,CAAO,EAAG;AAAA,EAAME,OAAMF,EAAY,GAAI,CAC9B,SAAU,CAACI,EAAAA,IAAKJ,EAAY,OAAQ,CAClC,SAAU,kBACpB,CAAS,EAAG,0BAA0B,CACtC,CAAO,EAAG;AAAA,CAAI,CACd,CAAK,EAAG;AAAA,EAAMI,MAAKJ,EAAY,GAAI,CAC7B,GAAI,SACJ,SAAU,MAChB,CAAK,EAAG;AAAA,EAAMI,MAAKJ,EAAY,IAAK,CAC9B,SAAUI,EAAAA,IAAKJ,EAAY,KAAM,CAC/B,UAAW,eACX,SAAU;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,CAClB,CAAO,CACP,CAAK,EAAG;AAAA,EAAMI,MAAKJ,EAAY,GAAI,CAC7B,GAAI,iBACJ,SAAU,gBAChB,CAAK,EAAG;AAAA,EAAME,OAAMF,EAAY,GAAI,CAC9B,SAAU,CAAC;AAAA,EAAME,OAAMF,EAAY,GAAI,CACrC,SAAU,CAACI,EAAAA,IAAKJ,EAAY,KAAM,CAChC,SAAU,aACpB,CAAS,EAAG,oCAAoC,CAChD,CAAO,EAAG;AAAA,EAAME,OAAMF,EAAY,GAAI,CAC9B,SAAU,CAACI,EAAAA,IAAKJ,EAAY,KAAM,CAChC,SAAU,oBACpB,CAAS,EAAG,mCAAmC,CAC/C,CAAO,EAAG;AAAA,EAAME,OAAMF,EAAY,GAAI,CAC9B,SAAU,CAACI,EAAAA,IAAKJ,EAAY,KAAM,CAChC,SAAU,wBACpB,CAAS,EAAG,8BAA8B,CAC1C,CAAO,EAAG;AAAA,EAAME,OAAMF,EAAY,GAAI,CAC9B,SAAU,CAACI,EAAAA,IAAKJ,EAAY,KAAM,CAChC,SAAU,mBACpB,CAAS,EAAG,4BAA4B,CACxC,CAAO,EAAG;AAAA,CAAI,CACd,CAAK,EAAG;AAAA,EAAMI,MAAKJ,EAAY,GAAI,CAC7B,GAAI,aACJ,SAAU,YAChB,CAAK,EAAG;AAAA,EAAME,OAAMF,EAAY,GAAI,CAC9B,SAAU,CAAC;AAAA,EAAME,OAAMF,EAAY,GAAI,CACrC,SAAU,CAACI,EAAAA,IAAKJ,EAAY,KAAM,CAChC,SAAU,OACpB,CAAS,EAAG,4BAA4B,CACxC,CAAO,EAAG;AAAA,EAAME,OAAMF,EAAY,GAAI,CAC9B,SAAU,CAACI,EAAAA,IAAKJ,EAAY,KAAM,CAChC,SAAU,UACpB,CAAS,EAAG,sBAAsB,CAClC,CAAO,EAAG;AAAA,EAAME,OAAMF,EAAY,GAAI,CAC9B,SAAU,CAACI,EAAAA,IAAKJ,EAAY,KAAM,CAChC,SAAU,WACpB,CAAS,EAAG,sBAAsB,CAClC,CAAO,EAAG;AAAA,EAAME,OAAMF,EAAY,GAAI,CAC9B,SAAU,CAACI,EAAAA,IAAKJ,EAAY,KAAM,CAChC,SAAU,UACpB,CAAS,EAAG,mCAAmC,CAC/C,CAAO,EAAG;AAAA,CAAI,CACd,CAAK,EAAG;AAAA,EAAMI,MAAKJ,EAAY,GAAI,CAC7B,GAAI,WACJ,SAAU,UAChB,CAAK,EAAG;AAAA,EAAMI,EAAAA,IAAKG,EAAQ,CACrB,GAAIC,CACV,CAAK,CAAC,CACN,CAAG,CACH,CACe,SAASC,EAAWV,EAAQ,GAAI,CAC7C,KAAM,CAAC,QAASW,CAAS,EAAI,CAC3B,GAAGT,EAAkB,EACrB,GAAGF,EAAM,UACb,EACE,OAAOW,EAAYN,EAAAA,IAAKM,EAAW,CACjC,GAAGX,EACH,SAAUK,EAAAA,IAAKN,EAAmB,CAChC,GAAGC,CACT,CAAK,CACL,CAAG,EAAID,EAAkBC,CAAK,CAC9B"}