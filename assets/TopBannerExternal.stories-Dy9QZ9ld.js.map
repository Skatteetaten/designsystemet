{"version":3,"file":"TopBannerExternal.stories-Dy9QZ9ld.js","sources":["../../../../apps/ds-playground/src/stories/components/TopBannerExternal.stories.tsx"],"sourcesContent":["import { useRef, useState, MouseEvent, JSX } from 'react';\n\nimport { Meta, StoryObj } from '@storybook/react';\n\nimport { LinkGroup } from '@skatteetaten/ds-buttons';\nimport {\n  TopBannerExternal,\n  TopBannerExternalHandle,\n  User,\n} from '@skatteetaten/ds-layout';\nimport {\n  Business,\n  Paginated,\n  Person,\n  RolePicker,\n} from '@skatteetaten/ds-overlays';\n\n// eslint-disable-next-line @nx/enforce-module-boundaries\nimport { dsI18n, langToLocale } from '../../../../../libs/ds-core-utils/src';\n// eslint-disable-next-line @nx/enforce-module-boundaries\nimport {\n  getTopBannerLangPickerLocaleDefault,\n  getTopBannerLangPickerShowSamiDefault,\n} from '../../../../../libs/ds-layout/src/TopBannerLangPicker/defaults';\nimport { category, htmlEventDescription } from '../../../.storybook/helpers';\nimport customLogo from '../../assets/custom-logo.svg';\nimport skeLogo from '../../assets/ske-logo.svg';\nimport { exampleParameters } from '../utils/stories.utils';\n\nconst me: Person = {\n  name: 'Ola Nordmann',\n  personId: '101010 12345',\n  type: 'Person',\n};\n\nconst businesses: Paginated<Business> = {\n  total: 12,\n  list: [\n    {\n      name: 'Costco',\n      organizationNumber: '123456777',\n      isDeleted: false,\n      unitType: 'AS',\n      type: 'Organization',\n      subunits: [\n        {\n          name: 'Google',\n          organizationNumber: '123456789',\n          isDeleted: false,\n          type: 'Organization',\n          unitType: 'AS',\n        },\n        {\n          name: 'Facebook',\n          organizationNumber: '123456790',\n          isDeleted: true,\n          type: 'Organization',\n          unitType: 'AS',\n        },\n      ],\n    },\n    {\n      name: 'Instagram',\n      organizationNumber: '312843211',\n      isDeleted: true,\n      unitType: 'AS',\n      type: 'Organization',\n      subunits: [\n        {\n          name: 'Snapchat',\n          organizationNumber: '123456623',\n          isDeleted: true,\n          type: 'Organization',\n          unitType: 'AS',\n        },\n        {\n          name: 'Statoil',\n          organizationNumber: '312849218',\n          isDeleted: false,\n          type: 'Organization',\n          unitType: 'AS',\n        },\n      ],\n    },\n    {\n      name: 'Samsung',\n      organizationNumber: '312943218',\n      isDeleted: false,\n      type: 'Organization',\n      unitType: 'AS',\n    },\n\n    {\n      name: 'Toshiba',\n      organizationNumber: '312643218',\n      isDeleted: false,\n      type: 'Organization',\n      unitType: 'AS',\n    },\n\n    {\n      name: 'Hitachi',\n      organizationNumber: '312743218',\n      isDeleted: false,\n      type: 'Organization',\n      unitType: 'AS',\n    },\n\n    {\n      name: 'Vanguard',\n      organizationNumber: '332843218',\n      isDeleted: false,\n      type: 'Organization',\n      unitType: 'AS',\n    },\n\n    {\n      name: 'Amazon',\n      organizationNumber: '112843218',\n      isDeleted: false,\n      type: 'Organization',\n      unitType: 'AS',\n    },\n    {\n      name: 'Meta',\n      organizationNumber: '212843218',\n      isDeleted: false,\n      type: 'Organization',\n      unitType: 'AS',\n    },\n  ],\n};\n\nconst people: Paginated<Person> = {\n  total: 4,\n  list: [\n    {\n      name: 'Antikvitet presis',\n      personId: '138899 99726',\n      type: 'Person',\n      isDeleted: false,\n    },\n    {\n      name: 'Bønne elegant',\n      personId: '188495 74503',\n      type: 'Person',\n      isDeleted: false,\n    },\n    {\n      name: 'Lomme filosofisk',\n      personId: '088896 74513',\n      type: 'Person',\n      isDeleted: false,\n    },\n    {\n      name: 'Adelsmann varm',\n      personId: '148924 49911',\n      type: 'Person',\n      isDeleted: false,\n    },\n  ],\n};\n\nconst meta = {\n  component: TopBannerExternal,\n  title: 'Komponenter/TopBannerExternal',\n  argTypes: {\n    // Props\n    showSami: {\n      table: {\n        category: category.props,\n        defaultValue: {\n          summary: String(getTopBannerLangPickerShowSamiDefault()),\n        },\n      },\n    },\n    defaultLocale: {\n      table: {\n        control: 'text',\n        category: category.props,\n        defaultValue: { summary: getTopBannerLangPickerLocaleDefault() },\n      },\n    },\n    children: { control: 'text', table: { category: category.props } },\n    skipLink: { table: { category: category.props } },\n    logo: {\n      table: { category: category.props },\n      control: 'select',\n      options: ['', customLogo, skeLogo],\n    },\n    user: { table: { category: category.props } },\n    firstColumn: { control: 'text', table: { category: category.props } },\n    secondColumn: { control: 'text', table: { category: category.props } },\n    thirdColumn: { control: 'text', table: { category: category.props } },\n    additionalLanguages: { table: { category: category.props } },\n    // Events\n    onLogInClick: {\n      ...htmlEventDescription,\n    },\n    onLogOutClick: {\n      ...htmlEventDescription,\n    },\n    onUserClick: {\n      ...htmlEventDescription,\n    },\n    onLanguageClick: {\n      ...htmlEventDescription,\n    },\n  },\n  args: {\n    // uten undefined så blir funksjonene initalisert med mockConstructor i Storybook\n    onLogInClick: undefined,\n    onLogOutClick: undefined,\n    onUserClick: undefined,\n  },\n  parameters: {\n    layout: 'fullscreen',\n  },\n} satisfies Meta<typeof TopBannerExternal>;\n\nexport default meta;\ntype Story = StoryObj<typeof meta>;\n\nexport const Preview: Story = {} satisfies Story;\n\nexport const Examples: Story = {\n  render: (_args): JSX.Element => {\n    const modalRef = useRef<HTMLDialogElement>(null);\n    const topBannerRef = useRef<TopBannerExternalHandle>(null);\n    const [user, setUser] = useState<User>();\n    const [isLoggedIn, setIsLoggedIn] = useState<boolean>(false);\n\n    const handleLanguageClick = (e: MouseEvent<HTMLButtonElement>): void => {\n      const lang = e.currentTarget.lang;\n      dsI18n.changeLanguage(langToLocale[lang]);\n    };\n\n    const handleLogOut = (): void => {\n      setUser(undefined);\n      setIsLoggedIn(false);\n    };\n\n    const handleLogIn = (): void => {\n      modalRef.current?.showModal();\n    };\n\n    const links = [\n      { href: '#storybook-root', text: 'Skatt' },\n      { href: '#storybook-root', text: 'Avgift' },\n      { href: '#storybook-root', text: 'Folkeregisteret' },\n    ];\n\n    return (\n      <>\n        <TopBannerExternal\n          ref={topBannerRef}\n          firstColumn={\n            <LinkGroup>\n              {links.map((link, index) => (\n                <LinkGroup.Link\n                  key={index}\n                  href={link.href}\n                  onClick={(e): void => {\n                    e.preventDefault();\n                    topBannerRef.current?.closeMenu?.();\n                  }}\n                >\n                  {link.text}\n                </LinkGroup.Link>\n              ))}\n            </LinkGroup>\n          }\n          secondColumn={isLoggedIn ? 'Second column' : ''}\n          thirdColumn={isLoggedIn ? 'Third column' : ''}\n          user={user}\n          onLanguageClick={handleLanguageClick}\n          onLogInClick={handleLogIn}\n          onLogOutClick={handleLogOut}\n          onUserClick={(): void => modalRef.current?.showModal()}\n        />\n        <RolePicker\n          ref={modalRef}\n          me={me}\n          businesses={businesses}\n          people={people}\n          onEntitySelect={async (entity) => {\n            let role: User['role'];\n            if (entity.name === me.name) {\n              role = 'meg';\n            } else if (entity.type === 'Organization') {\n              role = 'virksomhet';\n            } else {\n              role = 'andre';\n            }\n\n            setUser({\n              role: role,\n              name: entity.name,\n            });\n            modalRef.current?.close();\n          }}\n        />\n      </>\n    );\n  },\n} satisfies Story;\nExamples.parameters = exampleParameters;\n"],"names":["me","name","personId","type","businesses","total","list","organizationNumber","isDeleted","unitType","subunits","people","meta","component","TopBannerExternal","title","argTypes","showSami","table","category","props","defaultValue","summary","String","getTopBannerLangPickerShowSamiDefault","defaultLocale","control","getTopBannerLangPickerLocaleDefault","children","skipLink","logo","options","customLogo","skeLogo","user","firstColumn","secondColumn","thirdColumn","additionalLanguages","onLogInClick","htmlEventDescription","onLogOutClick","onUserClick","onLanguageClick","args","undefined","parameters","layout","Preview","Examples","render","_args","modalRef","useRef","topBannerRef","setUser","useState","isLoggedIn","setIsLoggedIn","handleLanguageClick","e","lang","currentTarget","changeLanguage","langToLocale","handleLogOut","handleLogIn","current","showModal","links","href","text","jsxs","Fragment","jsx","LinkGroup","map","link","index","preventDefault","closeMenu","RolePicker","entity","role","close","exampleParameters","docs","source","originalSource"],"mappings":"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"}