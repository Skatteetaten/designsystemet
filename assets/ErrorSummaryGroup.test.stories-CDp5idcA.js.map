{"version":3,"file":"ErrorSummaryGroup.test.stories-CDp5idcA.js","sources":["../../../../apps/ds-playground/src/stories/__tests__/ErrorSummaryGroup.test.stories.tsx"],"sourcesContent":["import { JSX } from 'react';\n\nimport { Meta, StoryObj } from '@storybook/react-vite';\nimport { expect, within } from 'storybook/test';\n\nimport { ErrorSummary } from '@skatteetaten/ds-forms';\n\nconst meta = {\n  component: ErrorSummary.Group,\n  title: 'Tester/ErrorSummary/ErrorSummaryGroup',\n  argTypes: {\n    // Baseprops\n    ref: { table: { disable: true } },\n    className: { table: { disable: true } },\n    id: { table: { disable: true } },\n    lang: { table: { disable: true } },\n    'data-testid': { table: { disable: true } },\n    // Props\n    children: {\n      table: { disable: true },\n      control: { disable: true },\n    },\n    title: { table: { disable: true } },\n    titleAs: {\n      control: 'inline-radio',\n      table: { disable: true },\n    },\n  },\n  tags: ['test'],\n} satisfies Meta<typeof ErrorSummary.Group>;\nexport default meta;\ntype Story = StoryObj<typeof meta>;\n\nconst defaultChildren = [\n  <ErrorSummary.Error key={'errorSummaryError_1'} referenceId={'id_1'}>\n    {'Fornavn må fylles ut'}\n  </ErrorSummary.Error>,\n  <ErrorSummary.Error key={'errorSummaryError_2'} referenceId={'id_2'}>\n    {'Etternavn må fylles ut'}\n  </ErrorSummary.Error>,\n];\n\nexport const WithRef = {\n  name: 'With Ref (FA1)',\n  args: {\n    title: 'Personopplysninger',\n    children: defaultChildren,\n    ref: (instance: HTMLDivElement | null): void => {\n      if (instance) {\n        instance.id = 'dummyIdForwardedFromRef';\n      }\n    },\n  },\n  argTypes: {\n    ref: { table: { disable: false } },\n  },\n  parameters: {\n    imageSnapshot: { disableSnapshot: true },\n  },\n  play: async ({ canvasElement }): Promise<void> => {\n    const canvas = within(canvasElement);\n    const group = canvas.getAllByRole('generic')[1];\n    await expect(group).toHaveAttribute('id', 'dummyIdForwardedFromRef');\n  },\n} satisfies Story;\n\nexport const WithAttributes = {\n  name: 'With Attributes (FA2-5)',\n  args: {\n    id: 'htmlId',\n    className: 'dummyClassname',\n    lang: 'nb',\n    'data-testid': '123ID',\n    title: 'Personopplysninger',\n    children: defaultChildren,\n  },\n  argTypes: {\n    id: { table: { disable: false } },\n    className: { table: { disable: false } },\n    lang: { table: { disable: false } },\n    'data-testid': { table: { disable: false } },\n  },\n  parameters: {\n    a11y: {\n      test: 'off',\n    },\n  },\n  play: async ({ canvasElement }): Promise<void> => {\n    const canvas = within(canvasElement);\n    const group = canvas.getByTestId('123ID');\n    await expect(group).toHaveAttribute('id', 'htmlId');\n    await expect(group).toHaveClass('dummyClassname');\n    await expect(group).toHaveAttribute('lang', 'nb');\n  },\n} satisfies Story;\n\nexport const WithTitle = {\n  name: 'With Title',\n  args: {\n    title: 'Mottaker 1 av fullmakt',\n    children: defaultChildren,\n  },\n  argTypes: {\n    title: { table: { disable: false } },\n    children: { table: { disable: false } },\n  },\n  parameters: {\n    imageSnapshot: { disableSnapshot: true },\n  },\n  play: async ({ canvasElement }): Promise<void> => {\n    const canvas = within(canvasElement);\n    const heading = canvas.getByRole('heading', { level: 3 });\n    await expect(heading).toBeInTheDocument();\n    await expect(heading).toHaveTextContent('Mottaker 1 av fullmakt');\n    const listItems = canvas.getAllByRole('listitem');\n    await expect(listItems).toHaveLength(2);\n  },\n} satisfies Story;\n\nexport const WithTitleAs = {\n  name: 'With TitleAs',\n  args: {\n    title: 'Mottaker 1 av fullmakt',\n    titleAs: 'h4',\n    children: defaultChildren,\n  },\n  argTypes: {\n    titleAs: { table: { disable: false } },\n  },\n  parameters: {\n    imageSnapshot: { disableSnapshot: true },\n  },\n  play: async ({ canvasElement }): Promise<void> => {\n    const canvas = within(canvasElement);\n    const heading = canvas.getByRole('heading', { level: 4 });\n    await expect(heading).toBeInTheDocument();\n    await expect(heading).toHaveTextContent('Mottaker 1 av fullmakt');\n  },\n} satisfies Story;\n\nconst WithinErrorSummaryTemplate = (): JSX.Element => (\n  <ErrorSummary\n    title={'For å gå videre må du rette opp i følgende'}\n    showErrorSummary\n  >\n    <ErrorSummary.Error referenceId={'inntekstaaret'}>\n      {'Inntekstsåret må være etter 2008'}\n    </ErrorSummary.Error>\n    <ErrorSummary.Error referenceId={'epost'}>\n      {'E-posten ser ikke riktig ut. Skriv slik: olaug.nordmann@norge.no'}\n    </ErrorSummary.Error>\n    <ErrorSummary.Error referenceId={'antallDager'}>\n      {'Antall dager må fylles ut.'}\n    </ErrorSummary.Error>\n\n    <ErrorSummary.Group title={'Mottaker 1 av fullmakt'}>\n      <ErrorSummary.Error referenceId={'navn1'}>\n        {'Navn på person må fylles ut'}\n      </ErrorSummary.Error>\n      <ErrorSummary.Error referenceId={'fnummer1'}>\n        {'Fødselsnummer eller D-nummer må fylles ut'}\n      </ErrorSummary.Error>\n      <ErrorSummary.Error referenceId={'telefon1'}>\n        {'Telefonnummer må fylles ut'}\n      </ErrorSummary.Error>\n    </ErrorSummary.Group>\n\n    <ErrorSummary.Group title={'Mottaker 2 av fullmakt'}>\n      <ErrorSummary.Error referenceId={'navn2'}>\n        {'Navn på person må fylles ut'}\n      </ErrorSummary.Error>\n      <ErrorSummary.Error referenceId={'fnummer2'}>\n        {'Fødselsnummer eller D-nummer må fylles ut'}\n      </ErrorSummary.Error>\n      <ErrorSummary.Error referenceId={'telefon2'}>\n        {'Telefonnummer må fylles ut'}\n      </ErrorSummary.Error>\n    </ErrorSummary.Group>\n  </ErrorSummary>\n);\n\nexport const WithinErrorSummary = {\n  name: 'Within ErrorSummary',\n  args: {\n    title: 'Mottaker 1 av fullmakt',\n    children: defaultChildren,\n  },\n  render: WithinErrorSummaryTemplate,\n  play: async ({ canvasElement }): Promise<void> => {\n    const canvas = within(canvasElement);\n    const mainHeading = canvas.getByRole('heading', { level: 2 });\n    await expect(mainHeading).toHaveTextContent(\n      'For å gå videre må du rette opp i følgende'\n    );\n    const groupHeadings = canvas.getAllByRole('heading', { level: 3 });\n    await expect(groupHeadings).toHaveLength(2);\n    await expect(groupHeadings[0]).toHaveTextContent('Mottaker 1 av fullmakt');\n    await expect(groupHeadings[1]).toHaveTextContent('Mottaker 2 av fullmakt');\n    const links = canvas.getAllByRole('link');\n    await expect(links).toHaveLength(9);\n  },\n} satisfies Story;\n\nexport const WithinErrorSummaryOnMobile = {\n  name: 'Within ErrorSummary on Mobile',\n  args: {\n    title: 'Mottaker 1 av fullmakt',\n    children: defaultChildren,\n  },\n  globals: {\n    viewport: {\n      value: '--mobile',\n    },\n  },\n  render: WithinErrorSummaryTemplate,\n  play: async ({ canvasElement }): Promise<void> => {\n    const canvas = within(canvasElement);\n    const mainHeading = canvas.getByRole('heading', { level: 2 });\n    await expect(mainHeading).toHaveTextContent(\n      'For å gå videre må du rette opp i følgende'\n    );\n    const groupHeadings = canvas.getAllByRole('heading', { level: 3 });\n    await expect(groupHeadings).toHaveLength(2);\n    await expect(groupHeadings[0]).toHaveTextContent('Mottaker 1 av fullmakt');\n    await expect(groupHeadings[1]).toHaveTextContent('Mottaker 2 av fullmakt');\n    const links = canvas.getAllByRole('link');\n    await expect(links).toHaveLength(9);\n  },\n} satisfies Story;\n"],"names":["expect","within","meta","component","ErrorSummary","Group","title","argTypes","ref","table","disable","className","id","lang","children","control","titleAs","tags","defaultChildren","jsx","WithRef","name","args","instance","parameters","imageSnapshot","disableSnapshot","play","canvasElement","group","getAllByRole","toHaveAttribute","WithAttributes","a11y","test","getByTestId","toHaveClass","WithTitle","canvas","heading","getByRole","level","toBeInTheDocument","toHaveTextContent","listItems","toHaveLength","WithTitleAs","WithinErrorSummaryTemplate","jsxs","WithinErrorSummary","render","mainHeading","groupHeadings","links","WithinErrorSummaryOnMobile","globals","viewport","value","docs","source","originalSource"],"mappings":"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"}