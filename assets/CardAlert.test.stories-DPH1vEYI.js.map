{"version":3,"file":"CardAlert.test.stories-DPH1vEYI.js","sources":["../../../../apps/ds-playground/src/stories/__tests__/CardAlert.test.stories.tsx"],"sourcesContent":["import { Meta, StoryFn, StoryObj } from '@storybook/react-vite';\nimport { expect, userEvent, waitFor, within } from 'storybook/test';\n\nimport { Card, CardAlertVariant } from '@skatteetaten/ds-content';\nimport { SkattetrekkSVGpath } from '@skatteetaten/ds-icons';\nimport { Heading, Paragraph } from '@skatteetaten/ds-typography';\n\nconst meta = {\n  component: Card.Alert,\n  title: 'Tester/Card/Alert',\n  argTypes: {\n    // Baseprops\n    ref: { table: { disable: true } },\n    className: { table: { disable: true } },\n    id: { table: { disable: true } },\n    lang: { table: { disable: true } },\n    'data-testid': { table: { disable: true } },\n    // Props\n    children: {\n      table: { disable: true },\n      control: 'text',\n    },\n    variant: { table: { disable: true } },\n    title: { table: { disable: true } },\n    titleAs: { table: { disable: true } },\n    showAlert: { table: { disable: true } },\n    svgPath: { table: { disable: true } },\n    // Events\n    onClose: { table: { disable: true } },\n  },\n  tags: ['test'],\n  parameters: {\n    imageSnapshot: { disableSnapshot: false },\n  },\n} satisfies Meta<typeof Card.Alert>;\nexport default meta;\ntype Story = StoryObj<typeof meta>;\n\nconst defaultText =\n  'Gruppering av opplysninger i skjema, for eksempel inntekter, personer eller oppsummeringer.';\n\nconst defaultArgs = {\n  children: defaultText,\n  title: 'Merknad',\n};\n\nexport const WithRef = {\n  name: 'With Ref (FA1)',\n  args: {\n    ...defaultArgs,\n    ref: (instance: HTMLDivElement | null): void => {\n      if (instance) {\n        instance.id = 'dummyIdForwardedFromRef';\n      }\n    },\n  },\n  argTypes: {\n    ref: { table: { disable: false } },\n  },\n  parameters: {\n    imageSnapshot: { disableSnapshot: true },\n  },\n  play: async ({ canvasElement }): Promise<void> => {\n    const canvas = within(canvasElement);\n    const container = canvas.getAllByRole('generic')[1];\n    await expect(container).toHaveAttribute('id', 'dummyIdForwardedFromRef');\n  },\n} satisfies Story;\n\nexport const WithAttributes = {\n  name: 'With Attributes (FA2-5)',\n  args: {\n    ...defaultArgs,\n    id: 'htmlId',\n    className: 'dummyClassname',\n    lang: 'en',\n    'data-testid': '123ID',\n  },\n  argTypes: {\n    id: { table: { disable: false } },\n    className: { table: { disable: false } },\n    lang: { table: { disable: false } },\n    'data-testid': { table: { disable: false } },\n  },\n  parameters: {\n    a11y: {\n      test: 'off',\n    },\n  },\n  play: async ({ canvasElement }): Promise<void> => {\n    const canvas = within(canvasElement);\n    const cardNote = canvas.getAllByRole('generic')[1];\n    await expect(cardNote).toHaveAttribute('id', 'htmlId');\n    await expect(cardNote).toHaveClass('dummyClassname');\n    await expect(cardNote).toHaveAttribute('lang', 'en');\n    await expect(cardNote).toHaveAttribute('data-testid', '123ID');\n  },\n} satisfies Story;\n\nexport const WithSvgPath = {\n  name: 'With custom icon, children and title (A7)',\n  args: {\n    ...defaultArgs,\n    svgPath: SkattetrekkSVGpath,\n  },\n  argTypes: {\n    children: { table: { disable: false } },\n  },\n} satisfies Story;\n\nconst variantsArr: CardAlertVariant[] = ['info', 'warning', 'danger'];\nconst TemplateAllVariants: StoryFn<typeof Card> = (args) => (\n  <Card>\n    {variantsArr.map((variant, index) => {\n      return (\n        <Card.Alert\n          title={defaultArgs.title}\n          {...args}\n          key={`card_${index}`}\n          className={'bottomSpacingXL'}\n          variant={variant}\n        >\n          <Card.Content>{args.children}</Card.Content>\n        </Card.Alert>\n      );\n    })}\n  </Card>\n);\n\nexport const AllVariants = {\n  render: TemplateAllVariants,\n  name: 'All Variants (A7)',\n  args: {\n    ...defaultArgs,\n  },\n} satisfies Story;\n\nexport const WithOnClose = {\n  name: 'With OnClose',\n  args: {\n    ...defaultArgs,\n    children: (\n      <>\n        <Heading as={'h1'} level={4}>\n          {'Avvist av kortutsteder'}\n        </Heading>\n        <Paragraph>\n          {'Ta kontakt med kortutsteder for '}\n          <a href={'#storybook-root'}>{'mer informasjon'}</a>\n        </Paragraph>\n      </>\n    ),\n  },\n  parameters: {\n    imageSnapshot: { disableSnapshot: true },\n  },\n  play: async ({ canvasElement }): Promise<void> => {\n    const canvas = within(canvasElement);\n    const closeButton = canvas.getByRole('button');\n    await userEvent.click(closeButton);\n    await waitFor(() => {\n      expect(\n        canvas.queryByText('Avvist av kortutsteder')\n      ).not.toBeInTheDocument();\n    });\n  },\n} satisfies Story;\n"],"names":["expect","userEvent","waitFor","within","meta","component","Card","Alert","title","argTypes","ref","table","disable","className","id","lang","children","control","variant","titleAs","showAlert","svgPath","onClose","tags","parameters","imageSnapshot","disableSnapshot","defaultText","defaultArgs","WithRef","name","args","instance","play","canvasElement","container","getAllByRole","toHaveAttribute","WithAttributes","a11y","test","cardNote","toHaveClass","WithSvgPath","SkattetrekkSVGpath","variantsArr","TemplateAllVariants","jsx","map","index","createElement","AllVariants","render","WithOnClose","jsxs","Fragment","Heading","Paragraph","canvas","closeButton","getByRole","click","queryByText","not","toBeInTheDocument","docs","source","originalSource"],"mappings":"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"}