{"version":3,"file":"Help.test.stories-Bgu-mcwa.js","sources":["../../../../apps/ds-playground/src/stories/__tests__/Help.test.stories.tsx"],"sourcesContent":["import { Meta, StoryObj } from '@storybook/react-vite';\nimport { expect, fireEvent, within } from 'storybook/test';\n\nimport {\n  dsI18n,\n  getHelpTitleHelpSvgDefault,\n} from '@skatteetaten/ds-core-utils';\nimport { WarningSVGpath } from '@skatteetaten/ds-icons';\n\nimport { loremIpsumWithoutSpaces } from './testUtils/storybook.testing.utils';\n// eslint-disable-next-line @nx/enforce-module-boundaries\nimport { Help } from '../../../../../libs/ds-forms/src/LabelWithHelp/Help/Help';\nimport { SystemSVGPaths } from '../utils/icon.systems';\n\nconst meta = {\n  component: Help,\n  title: 'Tester/Help (intern)',\n  argTypes: {\n    // Props\n    description: { table: { disable: true } },\n    classNames: { table: { disable: true } },\n    hideHelp: { table: { disable: true } },\n    helpText: { table: { disable: true } },\n    helpSvgPath: {\n      table: { disable: true },\n      options: Object.keys(SystemSVGPaths),\n      mapping: SystemSVGPaths,\n    },\n    titleHelpSvg: { table: { disable: true } },\n    targetId: { table: { disable: true } },\n    // Events\n    onHelpToggle: { table: { disable: true } },\n  },\n  tags: ['test'],\n  parameters: {\n    imageSnapshot: { disableSnapshot: false },\n  },\n} satisfies Meta<typeof Help>;\nexport default meta;\ntype Story = StoryObj<typeof meta>;\n\nconst defaultDescription = 'En liten beskrivelse';\nconst defaultHelpText =\n  'Vi trenger Ã¥ vite navnet ditt dersom vi skal kontakte deg senere.';\n\nexport const Defaults = {\n  name: 'Defaults',\n  play: async ({ canvasElement }): Promise<void> => {\n    const helpButton = canvasElement.querySelector('button');\n    await expect(helpButton).not.toBeInTheDocument();\n  },\n} satisfies Story;\n\nexport const WithHelptext = {\n  name: 'With HelpText (FS-A1, FS-A5 delvis, FS-B2 delvis)',\n  args: {\n    helpText: defaultHelpText,\n  },\n  argTypes: {\n    helpText: { table: { disable: false } },\n  },\n  play: async ({ canvasElement }): Promise<void> => {\n    const canvas = within(canvasElement);\n    const helpButton = canvas.getByRole('button');\n    await expect(helpButton).toBeInTheDocument();\n    await expect(helpButton).toHaveAttribute('aria-expanded', 'false');\n    const helpSvg = canvas.getByLabelText(getHelpTitleHelpSvgDefault(), {\n      selector: 'svg',\n    });\n    await expect(helpSvg).toBeInTheDocument();\n  },\n} satisfies Story;\n\nexport const WithDescription = {\n  name: 'With Description (FS-A5 delvis)',\n  args: {\n    description: defaultDescription,\n  },\n  argTypes: {\n    description: { table: { disable: false } },\n  },\n  play: async ({ canvasElement }): Promise<void> => {\n    const canvas = within(canvasElement);\n    const descriptionNode = canvas.getByText(defaultDescription);\n    await expect(descriptionNode).toBeInTheDocument();\n  },\n} satisfies Story;\n\nexport const WithHelpTextAndDescription = {\n  name: 'With HelpText And Description (FS-A5 delvis)',\n  args: {\n    helpText: defaultHelpText,\n    description: defaultDescription,\n  },\n  argTypes: {\n    helpText: { table: { disable: false } },\n    description: { table: { disable: false } },\n  },\n} satisfies Story;\n\nexport const WithLongHelpTextAndDescription = {\n  name: 'With Long HelpText And Description',\n  args: {\n    helpText: loremIpsumWithoutSpaces,\n    description: loremIpsumWithoutSpaces,\n  },\n  argTypes: {\n    helpText: { table: { disable: false } },\n  },\n  globals: {\n    viewport: {\n      value: '--mobile',\n    },\n  },\n  play: async ({ canvasElement }): Promise<void> => {\n    const canvas = within(canvasElement);\n    const helpButton = canvas.getByRole('button');\n    await fireEvent.click(helpButton);\n  },\n} satisfies Story;\n\nexport const WithHelpSvgPathTitleHelpSvgAndTargetId = {\n  name: 'With HelpSvgPath TitleHelpSvg And TargetId (FS-A5 delvis)',\n  args: {\n    helpText: defaultHelpText,\n    helpSvgPath: WarningSVGpath,\n    titleHelpSvg: 'Tooltip',\n    targetId: 'storybook-root',\n  },\n  argTypes: {\n    helpSvgPath: { table: { disable: false } },\n    titleHelpSvg: { table: { disable: false } },\n    targetId: { table: { disable: false } },\n  },\n  play: async ({ canvasElement }): Promise<void> => {\n    const canvas = within(canvasElement);\n    const helpButton = canvas.getByRole('button');\n    await expect(helpButton).toHaveAttribute(\n      'aria-describedby',\n      'storybook-root'\n    );\n    const svgNode = canvas.getByLabelText('Tooltip', { selector: 'svg' });\n    await expect(svgNode).toBeInTheDocument();\n  },\n} satisfies Story;\n\nexport const WithHideHelp = {\n  name: 'With HideHelp (FS-A7)',\n  args: {\n    helpText: defaultHelpText,\n    description: defaultDescription,\n    hideHelp: true,\n  },\n  argTypes: {\n    hideHelp: { table: { disable: false } },\n  },\n  play: async ({ canvasElement }): Promise<void> => {\n    const canvas = within(canvasElement);\n    const helpButton = canvas.getByRole('button');\n    const descriptionNode = canvas.getByText(defaultDescription);\n    await expect(helpButton).toBeInTheDocument();\n    await expect(descriptionNode).toBeInTheDocument();\n  },\n} satisfies Story;\n\nexport const ClickHelpButton = {\n  name: 'Click HelpButton On And Off (FS-A5 delvis, FS-B2 delvis)',\n  args: {\n    helpText: defaultHelpText,\n  },\n  parameters: {\n    imageSnapshot: {\n      disable: true,\n    },\n  },\n  play: async ({ canvasElement }): Promise<void> => {\n    const canvas = within(canvasElement);\n    const helpButton = canvas.getByRole('button');\n    await fireEvent.click(helpButton);\n    await expect(helpButton).toHaveAttribute('aria-expanded', 'true');\n    const helpText = canvas.getByText(defaultHelpText);\n    await expect(helpText).toBeInTheDocument();\n    await fireEvent.click(helpButton);\n    await expect(helpText).not.toBeInTheDocument();\n    await expect(helpButton).toHaveAttribute('aria-expanded', 'false');\n  },\n} satisfies Story;\n\nexport const ClickCloseButton = {\n  name: 'Close HelpText With CloseButton (FS-A5 delvis, FS-A6, FS-B2 delvis)',\n  args: {\n    helpText: defaultHelpText,\n  },\n  parameters: {\n    imageSnapshot: {\n      disable: true,\n    },\n  },\n  play: async ({ canvasElement }): Promise<void> => {\n    const canvas = within(canvasElement);\n    const helpButton = canvas.getByRole('button');\n    await fireEvent.click(helpButton);\n    const closeButton = canvas.getByTitle(dsI18n.t('Shared:shared.Close'));\n    await expect(closeButton).toBeInTheDocument();\n    const helpText = canvas.getByText(defaultHelpText);\n    await fireEvent.click(closeButton);\n    await expect(helpText).not.toBeInTheDocument();\n    await expect(helpButton).toHaveFocus();\n  },\n} satisfies Story;\n\nexport const WithHelpToggleEvent = {\n  name: 'With onHelpToggle Event',\n  args: {\n    helpText: 'Hjelpetekst',\n    onHelpToggle: (isOpen: boolean): void => {\n      alert(isOpen ? 'Hjelpetekst blir vist' : 'Hjelpetekst skjules');\n    },\n  },\n  parameters: {\n    imageSnapshot: {\n      disable: true,\n    },\n  },\n} satisfies Story;\n"],"names":["expect","within","meta","component","Help","title","argTypes","description","table","disable","classNames","hideHelp","helpText","helpSvgPath","options","Object","keys","SystemSVGPaths","mapping","titleHelpSvg","targetId","onHelpToggle","tags","parameters","imageSnapshot","disableSnapshot","defaultDescription","defaultHelpText","Defaults","name","play","canvasElement","helpButton","querySelector","not","toBeInTheDocument","WithHelptext","args","canvas","getByRole","toHaveAttribute","helpSvg","getByLabelText","getHelpTitleHelpSvgDefault","selector","WithDescription","descriptionNode","getByText","WithHelpTextAndDescription","WithLongHelpTextAndDescription","loremIpsumWithoutSpaces","globals","viewport","value","fireEvent","click","WithHelpSvgPathTitleHelpSvgAndTargetId","WarningSVGpath","svgNode","WithHideHelp","ClickHelpButton","ClickCloseButton","closeButton","getByTitle","dsI18n","t","toHaveFocus","WithHelpToggleEvent","isOpen","alert","docs","source","originalSource"],"mappings":"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"}