{"version":3,"file":"ErrorMessage.test.stories-BLlyU_g-.js","sources":["../../../../apps/ds-playground/src/stories/__tests__/ErrorMessage.test.stories.tsx"],"sourcesContent":["import { StoryFn, Meta, StoryObj } from '@storybook/react-vite';\nimport { expect, within } from 'storybook/test';\n\nimport { ErrorMessage } from '@skatteetaten/ds-forms';\n\nconst meta = {\n  component: ErrorMessage,\n  title: 'Tester/ErrorMessage',\n  argTypes: {\n    // Baseprops\n    ref: { table: { disable: true } },\n    className: { table: { disable: true } },\n    id: { table: { disable: true } },\n    lang: { table: { disable: true } },\n    'data-testid': { table: { disable: true } },\n    // Props\n    children: { table: { disable: true } },\n    hasSpacing: { table: { disable: true } },\n    showError: { table: { disable: true } },\n  },\n  tags: ['test'],\n  parameters: {\n    imageSnapshot: { disableSnapshot: false },\n  },\n} satisfies Meta<typeof ErrorMessage>;\nexport default meta;\ntype Story = StoryObj<typeof meta>;\n\nconst defaultText = 'Feilmelding';\n\nconst defaultArgs = {\n  showError: false,\n  children: defaultText,\n};\n\nexport const WithRef = {\n  name: 'With Ref (FA1)',\n  args: {\n    ...defaultArgs,\n    ref: (instance: HTMLDivElement | null): void => {\n      if (instance) {\n        instance.id = 'dummyIdForwardedFromRef';\n      }\n    },\n  },\n  argTypes: {\n    ref: { table: { disable: false } },\n  },\n  parameters: {\n    imageSnapshot: { disableSnapshot: true },\n  },\n  play: async ({ canvasElement }): Promise<void> => {\n    const canvas = within(canvasElement);\n    const container = canvas.getAllByRole('generic')[1];\n    await expect(container).toHaveAttribute('id', 'dummyIdForwardedFromRef');\n  },\n} satisfies Story;\n\nexport const WithAttributes = {\n  name: 'With Attributes (FA2-5, B1)',\n  args: {\n    ...defaultArgs,\n    id: 'htmlId',\n    className: 'dummyClassname',\n    lang: 'nb',\n    'data-testid': '123ID',\n    showError: true,\n  },\n  argTypes: {\n    id: { table: { disable: false } },\n    className: { table: { disable: false } },\n    lang: { table: { disable: false } },\n    'data-testid': { table: { disable: false } },\n  },\n  parameters: {\n    a11y: {\n      test: 'off',\n    },\n  },\n  play: async ({\n    canvasElement,\n  }: {\n    canvasElement: HTMLElement;\n  }): Promise<void> => {\n    const canvas = within(canvasElement);\n    const container = canvas.getAllByRole('generic')[1];\n    const errorMessage = canvas.getAllByRole('generic')[2];\n    await expect(container).toHaveAttribute('id', 'htmlId');\n    await expect(errorMessage).toHaveClass('dummyClassname');\n    await expect(container).toHaveAttribute('lang', 'nb');\n    await expect(container).toHaveAttribute('data-testid', '123ID');\n  },\n} satisfies Story;\n\nexport const Defaults = {\n  name: 'Default (A1, A2)',\n  args: {\n    ...defaultArgs,\n  },\n  play: async ({ canvasElement }): Promise<void> => {\n    const canvas = within(canvasElement);\n    const container = canvas.getAllByRole('generic')[1];\n    await expect(container).toBeInTheDocument();\n    await expect(container).toHaveAttribute('aria-live', 'assertive');\n    await expect(container).toHaveAttribute('aria-atomic');\n\n    const textNode = container.querySelector('p');\n    await expect(textNode).not.toBeInTheDocument();\n  },\n} satisfies Story;\n\nexport const WithPElement = {\n  name: 'With <p>-element (B1)',\n  args: {\n    ...defaultArgs,\n    showError: true,\n  },\n  argTypes: {\n    showError: {\n      table: { disable: false },\n    },\n  },\n  play: async ({ canvasElement }): Promise<void> => {\n    const canvas = within(canvasElement);\n    const textNode = canvas.getByText(defaultText);\n    await expect(textNode.tagName).toBe('P');\n  },\n} satisfies Story;\n\nconst TemplateWithInput: StoryFn<typeof ErrorMessage> = (args) => (\n  <div className={'errorMessageContainer'}>\n    <ErrorMessage {...args} />\n  </div>\n);\n\nexport const WithLongText = {\n  render: TemplateWithInput,\n  name: 'With Long Text (A3)',\n  args: {\n    ...defaultArgs,\n    showError: true,\n    children:\n      'Dette blir en veldig lang feilmelding for å teste om du oppfører seg om den skal.',\n  },\n  argTypes: {\n    children: {\n      table: { disable: false },\n    },\n  },\n} satisfies Story;\n\nexport const WithLongTextAndBreaking = {\n  render: TemplateWithInput,\n  name: 'With Long Text And Breaking',\n  args: {\n    ...defaultArgs,\n    showError: true,\n    children:\n      'Detteblirenveldiglangfeilmeldingforåtesteomduoppførersegomdenskal.',\n  },\n  argTypes: {\n    children: {\n      table: { disable: false },\n    },\n  },\n} satisfies Story;\n"],"names":["expect","within","meta","component","ErrorMessage","title","argTypes","ref","table","disable","className","id","lang","children","hasSpacing","showError","tags","parameters","imageSnapshot","disableSnapshot","defaultText","defaultArgs","WithRef","name","args","instance","play","canvasElement","container","getAllByRole","toHaveAttribute","WithAttributes","a11y","test","canvas","errorMessage","toHaveClass","Defaults","toBeInTheDocument","textNode","querySelector","not","WithPElement","getByText","tagName","toBe","TemplateWithInput","jsx","WithLongText","render","WithLongTextAndBreaking","docs","source","originalSource"],"mappings":"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"}